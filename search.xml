<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>LeetCode：最接近的三数之和</title>
    <url>/2021/07/06/algorithm/LeetCode%EF%BC%9A%E6%9C%80%E6%8E%A5%E8%BF%91%E7%9A%84%E4%B8%89%E6%95%B0%E4%B9%8B%E5%92%8C/</url>
    <content><![CDATA[<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><blockquote>
<p>给定一个包括 n 个整数的数组 nums 和 一个目标值 target。找出 nums 中的三个整数，使得它们的和与 target 最接近。返回这三个数的和。假定每组输入只存在唯一答案。 </p>
</blockquote>
<span id="more"></span>

<h2 id="审题"><a href="#审题" class="headerlink" title="审题"></a>审题</h2><p>从一个数组中拿出三个数，使得这三个数的和与目标值的差值最小，这三个数具有唯一解的性质。<br>该题如果使用暴力破解法，时间复杂度为 O(n^3)，这是一个比较糟糕的破解方式。</p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>找出每个数组元素的另外两个最优解，使得这三个元素之和与目标值的差值达到最小。</p>
<p>为了能够把握数组三个元素之和与目标值的大小，从而找到比当前三个元素更加合适的元素值，我们可以先对数组进行一次有序排序，这样就可以准确把握三个元素之和与目标值的大小关系。</p>
<p>如果三数之和比目标值小，我们可以尝试往数组的右边找更大的元素来找寻更优解。<br>如果三数之和比目标值大，我们可以尝试往数组的左边找更小的元素来找寻更优解。</p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">threeSumClosest</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">        <span class="comment">// 首先对数组进行一次有序排序</span></span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="type">int</span> i, l, r, sum, n = nums.length;</span><br><span class="line">        <span class="comment">// 随便获取目标值和三位数的差绝对值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> nums[<span class="number">0</span>] + nums[<span class="number">1</span>] + nums[<span class="number">2</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">cha</span> <span class="operator">=</span> Math.abs(target - result), temCha;</span><br><span class="line">        <span class="comment">// 循环的最后一位是 [n-3], 最后三位相加 [n-3] + [n-2] + [n-1]</span></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n - <span class="number">2</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// 在循环过程中，如果当前循环的值和前一位值相等，就可以不用循环，因为值都是一样的，结果也就是一样的</span></span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 获取当前循环的下一位元素</span></span><br><span class="line">            l = i + <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// 获取数组最后一位元素</span></span><br><span class="line">            r = n - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">                sum = nums[i] + nums[l] + nums[r];</span><br><span class="line">                <span class="keyword">if</span> (sum == target) &#123;</span><br><span class="line">                    <span class="keyword">return</span> sum;</span><br><span class="line">                &#125;</span><br><span class="line">                temCha = Math.abs(target - sum);</span><br><span class="line">                <span class="comment">// 如果差值更小，将差值更小的和赋值给 result，并保存更小的差值</span></span><br><span class="line">                <span class="keyword">if</span> (temCha &lt; cha) &#123;</span><br><span class="line">                    result = sum;</span><br><span class="line">                    cha = temCha;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 因为是有序数组，如果值太小，则尝试增加左边的值</span></span><br><span class="line">                <span class="keyword">if</span> (sum &lt; target) &#123;</span><br><span class="line">                    l++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 因为是有序数组，如果值太小，则尝试减小右边的值</span></span><br><span class="line">                <span class="keyword">if</span> (sum &gt; target) &#123;</span><br><span class="line">                    r--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><blockquote>
<p>解答成功:<br>执行耗时:4 ms,击败了97.88% 的Java用户<br>内存消耗:38 MB,击败了64.64% 的Java用户</p>
</blockquote>
]]></content>
      <categories>
        <category>数据结构与算法</category>
      </categories>
      <tags>
        <tag>链表</tag>
        <tag>LeetCode</tag>
        <tag>面试</tag>
      </tags>
  </entry>
  <entry>
    <title>排序算法之快速排序</title>
    <url>/2021/04/17/algorithm/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E4%B9%8B%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/</url>
    <content><![CDATA[<h1 id="什么是快速排序"><a href="#什么是快速排序" class="headerlink" title="什么是快速排序"></a>什么是快速排序</h1><p>和冒泡排序一样，快速排序也属于交换排序，通过元素直接的比较和交换位置来达到排序的目的。</p>
<span id="more"></span>
<p>快速排序的思想是：<strong>在每一轮挑选一个基准元素，并让其他比它大的元素移动到数的一边，比它小的元素移动到数列的另一边，从而把数列拆解成两个部分。</strong></p>
<p>这种思想就叫做<strong>分治法</strong>。</p>
<h2 id="基准元素的选择"><a href="#基准元素的选择" class="headerlink" title="基准元素的选择"></a>基准元素的选择</h2><p>基准元素（pivot），在分治过程中，以基准元素为中心，要把其他元素移动到它的左右两边。</p>
<p>那么如何选择基准元素呢？</p>
<h3 id="选择数组的第一个元素"><a href="#选择数组的第一个元素" class="headerlink" title="选择数组的第一个元素"></a>选择数组的第一个元素</h3><p>这种方法是最简单，而且在绝大多数的情况都不会出现问题。但是如果有一个逆序的数列，期望排成顺序的数列，使用快速排序的时候，会出现一种最坏的情况。</p>
<p>由于这个数组原本是逆序的，在选择基准元素之后，由于确定的基准元素都是在数组的边界位置，永远都是比其他元素大，或者比其他元素小，这样一来，快速排序就会退化为一种 O(n^2) 级别的排序。</p>
<h3 id="随机选择一个元素"><a href="#随机选择一个元素" class="headerlink" title="随机选择一个元素"></a>随机选择一个元素</h3><p>为了解决上述情况可能出现的最坏情况，可以使用随机选择一个数组元素最为基准元素，并让选中的基准元素和数组的第一个元素进行位置交换即可。</p>
<p>当然，随机选择一个元素的方法可以尽量避免快速排序出现最坏的情况，但是仍然有可能会出现极端的情况。</p>
<p>所以快速排序的平均时间复杂度为 O(nlogn)，但最坏情况下的时间复杂度为 O(n^2)。</p>
<h2 id="算法实现"><a href="#算法实现" class="headerlink" title="算法实现"></a>算法实现</h2><p>选中基准元素之后，就可以进行数组的元素交换操作了，就是将比基准元素小的元素放在基准元素左边，比基准元素大的元素放在基准元素右边。</p>
<h3 id="双边循坏法"><a href="#双边循坏法" class="headerlink" title="双边循坏法"></a>双边循坏法</h3><p>1、选中基准元素（pivot），并将排序的数组最左边和最右边的元素索引设为 left 和 right。</p>
<p>2、从 right 指针开始向左索引，如果指针指向的元素大于等于基准元素，则继续向左边移动，如果元素比基准元素小，则 right 指针停止移动。</p>
<p>3、从 left 指针开始向右索引，如果指针指向的元素小于等于基准元素，则继续向右边移动，如果元素比基准元素大，则 left 指针停止移动。</p>
<p>4、交换 left 和 right 索引位置的元素。</p>
<p>5、从之前停止的 left 和 right 指针的位置，继续重复 2、3 步骤，直到 left 指针等于 right 指针，停止索引。</p>
<p>6、交换 left 和 pivot 指针的元素。</p>
<p>7、根据基准元素的位置，将数组一分为二，并继续从第一步开始执行，直到所有元素有序。</p>
<ul>
<li>代码实现</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    SortRunner.run(SortUtils.generateRandomArray(<span class="number">10000</span>, <span class="number">100</span>, <span class="number">100000</span>),</span><br><span class="line">            (arr) -&gt; &#123;</span><br><span class="line">                quickSort(arr, <span class="number">0</span>, arr.length - <span class="number">1</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> startIndex, <span class="type">int</span> endIndex)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (startIndex &gt;= endIndex) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">pivotIndex</span> <span class="operator">=</span> partition(arr, startIndex, endIndex);</span><br><span class="line">    <span class="comment">// 7、根据基准元素的位置，将数组一分为二，并继续从第一步开始执行，直到所有元素有序。</span></span><br><span class="line">    quickSort(arr, startIndex, pivotIndex - <span class="number">1</span>);</span><br><span class="line">    quickSort(arr, pivotIndex + <span class="number">1</span>, endIndex);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> startIndex, <span class="type">int</span> endIndex)</span> &#123;</span><br><span class="line">    <span class="comment">// 1、选中基准元素（pivot），并将排序的数组最左边和最右边的元素索引设为 left 和 right。</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> arr[startIndex];</span><br><span class="line">    <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> startIndex;</span><br><span class="line">    <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> endIndex;</span><br><span class="line">    <span class="comment">// 5、从之前停止的 left 和 right 指针的位置，继续重复 2、3 步骤，直到 left 指针等于 right 指针，停止索引。</span></span><br><span class="line">    <span class="keyword">while</span> (left != right) &#123;</span><br><span class="line">        <span class="comment">// 2、从 right 指针开始向左索引，如果指针指向的元素大于等于基准元素，则继续向左边移动，如果元素比基准元素小，则 right 指针停止移动。</span></span><br><span class="line">        <span class="keyword">while</span> (left &lt; right &amp;&amp; arr[right] &gt; pivot) &#123;</span><br><span class="line">            right--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3、从 left 指针开始向右索引，如果指针指向的元素小于等于基准元素，则继续向右边移动，如果元素比基准元素大，则 left 指针停止移动。</span></span><br><span class="line">        <span class="keyword">while</span> (left &lt; right &amp;&amp; arr[left] &lt;= pivot) &#123;</span><br><span class="line">            left++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//  4、交换 left 和 right 索引位置的元素。</span></span><br><span class="line">        <span class="keyword">if</span> (left &lt; right) &#123;</span><br><span class="line">            SortUtils.swap(arr, left, right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 6、交换 left 和 pivot 指针的元素。</span></span><br><span class="line">    SortUtils.swap(arr, startIndex, left);</span><br><span class="line">    <span class="keyword">return</span> left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="单边循环法"><a href="#单边循环法" class="headerlink" title="单边循环法"></a>单边循环法</h3><p>1、选中基准元素（pivot），并将数组的第一个元素索引设为 mark，mark 指针代表小于基准元素的边界。</p>
<p>2、从基准元素的下一个位置开始遍历数组，如果遍历到的元素大于基准元素，则继续向后遍历。</p>
<p>3、如果遍历到的元素小于基准元素，将 mark 指针的位置向后移动一位，并交换 mark 指针指向的元素和当前遍历到的元素的位置。</p>
<p>4、遍历结束后，交换 pivot 和 mark 指针的位置。</p>
<p>5、根据基准元素的位置，将数组一分为二，并继续从第一步开始执行，直到所有元素有序。</p>
<ul>
<li>代码实现</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    SortRunner.run(SortUtils.generateRandomArray(<span class="number">10000</span>, <span class="number">100</span>, <span class="number">100000</span>),</span><br><span class="line">            (arr) -&gt; &#123;</span><br><span class="line">                quickSort(arr, <span class="number">0</span>, arr.length - <span class="number">1</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> startIndex, <span class="type">int</span> endIndex)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (startIndex &gt;= endIndex) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">pivotIndex</span> <span class="operator">=</span> partition(arr, startIndex, endIndex);</span><br><span class="line">    <span class="comment">// 5、根据基准元素的位置，将数组一分为二，并继续从第一步开始执行，直到所有元素有序。</span></span><br><span class="line">    quickSort(arr, startIndex, pivotIndex - <span class="number">1</span>);</span><br><span class="line">    quickSort(arr, pivotIndex + <span class="number">1</span>, endIndex);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> startIndex, <span class="type">int</span> endIndex)</span> &#123;</span><br><span class="line">    <span class="comment">// 1、选中基准元素（pivot），并将数组的第一个元素索引设为 mark，mark 指针代表小于基准元素的边界。</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> arr[startIndex];</span><br><span class="line">    <span class="type">int</span> <span class="variable">mark</span> <span class="operator">=</span> startIndex;</span><br><span class="line">    <span class="comment">// 2、从基准元素的下一个位置开始遍历数组，如果遍历到的元素大于基准元素，则继续向后遍历。</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> startIndex + <span class="number">1</span>; i &lt;= endIndex; i++) &#123;</span><br><span class="line">        <span class="comment">// 3、如果遍历到的元素小于基准元素，将 mark 指针的位置向后移动一位，并交换 mark 指针指向的元素和当前遍历到的元素的位置。</span></span><br><span class="line">        <span class="keyword">if</span> (arr[i] &lt; pivot) &#123;</span><br><span class="line">            mark++;</span><br><span class="line">            SortUtils.swap(arr, mark, i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4、遍历结束后，交换 pivot 和 mark 指针的位置。</span></span><br><span class="line">    SortUtils.swap(arr, startIndex, mark);</span><br><span class="line">    <span class="keyword">return</span> mark;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="非递归实现"><a href="#非递归实现" class="headerlink" title="非递归实现"></a>非递归实现</h3><p>递归的本质就是一个方法通过不同参数调用自身，在 Java 虚拟机的表现本质上就是将方法进行压栈，执行完成之后进行出栈操作。</p>
<p>所以快速排序的非递归实现可以使用一个栈来进行代替。</p>
<p>1、创建一个栈，将数组的开始索引和结束索引压入栈中。</p>
<p>2、取出栈顶的元素，通过数组的开始索引和结束索引，对该范围内的数组元素进行排序，获取基准元素。</p>
<p>3、根据基准元素的位置，将数组一分为二，并将切分的数组的开始索引和结束索引压入栈中。</p>
<p>4、轮询栈，只要栈内元素不为空，继续执行，否则停止程序。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    SortRunner.run(SortUtils.generateRandomArray(<span class="number">10000</span>, <span class="number">100</span>, <span class="number">100000</span>),</span><br><span class="line">            (arr) -&gt; &#123;</span><br><span class="line">                quickSort(arr, <span class="number">0</span>, arr.length - <span class="number">1</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> startIndex, <span class="type">int</span> endIndex)</span> &#123;</span><br><span class="line">    <span class="comment">// 1、创建一个栈，将数组的开始索引和结束索引压入栈中。</span></span><br><span class="line">    Stack&lt;Map&lt;String, Integer&gt;&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    Map&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;start&quot;</span>, startIndex);</span><br><span class="line">    map.put(<span class="string">&quot;end&quot;</span>, endIndex);</span><br><span class="line">    stack.push(map);</span><br><span class="line">    <span class="comment">// 4、轮询栈，只要栈内元素不为空，继续执行，否则停止程序。</span></span><br><span class="line">    <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">        <span class="comment">// 2、取出栈顶的元素，通过数组的开始索引和结束索引，对该范围内的数组元素进行排序，获取基准元素。</span></span><br><span class="line">        Map&lt;String, Integer&gt; pop = stack.pop();</span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> pop.get(<span class="string">&quot;start&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> pop.get(<span class="string">&quot;end&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">pivotIndex</span> <span class="operator">=</span> partition(arr, start, end);</span><br><span class="line">        <span class="comment">// 3、根据基准元素的位置，将数组一分为二，并将切分的数组的开始索引和结束索引压入栈中。</span></span><br><span class="line">        <span class="keyword">if</span> (start &lt; pivotIndex - <span class="number">1</span>) &#123;</span><br><span class="line">            Map&lt;String, Integer&gt; leftParam = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            leftParam.put(<span class="string">&quot;start&quot;</span>, start);</span><br><span class="line">            leftParam.put(<span class="string">&quot;end&quot;</span>, pivotIndex - <span class="number">1</span>);</span><br><span class="line">            stack.push(leftParam);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (end &gt; pivotIndex + <span class="number">1</span>) &#123;</span><br><span class="line">            Map&lt;String, Integer&gt; rightParam = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            rightParam.put(<span class="string">&quot;start&quot;</span>, pivotIndex + <span class="number">1</span>);</span><br><span class="line">            rightParam.put(<span class="string">&quot;end&quot;</span>, end);</span><br><span class="line">            stack.push(rightParam);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> startIndex, <span class="type">int</span> endIndex)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> arr[startIndex];</span><br><span class="line">    <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> startIndex;</span><br><span class="line">    <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> endIndex;</span><br><span class="line">    <span class="keyword">while</span> (left != right) &#123;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right &amp;&amp; arr[right] &gt; pivot) &#123;</span><br><span class="line">            right--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right &amp;&amp; arr[left] &lt;= pivot) &#123;</span><br><span class="line">            left++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (left &lt; right) &#123;</span><br><span class="line">            SortUtils.swap(arr, left, right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    SortUtils.swap(arr, startIndex, left);</span><br><span class="line">    <span class="keyword">return</span> left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><blockquote>
<p>本文<strong>Github</strong> <a href="https://github.com/herenpeng/code-learn">https://github.com/herenpeng/code-learn</a> 已收录，欢迎<strong>Star</strong>。</p>
</blockquote>
]]></content>
      <categories>
        <category>数据结构与算法</category>
      </categories>
      <tags>
        <tag>排序算法</tag>
      </tags>
  </entry>
  <entry>
    <title>排序算法之聊聊你所不知道的冒泡排序</title>
    <url>/2021/03/27/algorithm/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E4%B9%8B%E8%81%8A%E8%81%8A%E4%BD%A0%E6%89%80%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/</url>
    <content><![CDATA[<h1 id="什么是冒泡排序"><a href="#什么是冒泡排序" class="headerlink" title="什么是冒泡排序"></a>什么是冒泡排序</h1><p>冒泡排序是一种基础的交换排序，其思想是，把相邻的元素两两比较，当一个元素大于右侧相邻的元素时，交换它们的位置：当一个元素小于或等于右侧的元素时，位置不变。</p>
<span id="more"></span>

<p>冒泡排序是一种稳定排序，值相等的元素并不会打乱原有的顺序，由于该排序算法的每一轮都要遍历元素，总共遍历（元素数量 - 1）轮，所以平均时间复杂度是O(n^2)。</p>
<h1 id="工欲善其事，必先利其器"><a href="#工欲善其事，必先利其器" class="headerlink" title="工欲善其事，必先利其器"></a>工欲善其事，必先利其器</h1><p>在讲述冒泡排序之前，我们先来搭建一个简单的排序算法编写的环境，这个环境可以帮助我们更加方便地编写和测试排序算法。</p>
<h2 id="SortUtils"><a href="#SortUtils" class="headerlink" title="SortUtils"></a>SortUtils</h2><blockquote>
<p>一个排序算法的工具类，其中包含了排序算法编写和测试的一些基本操作。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SortUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 随机生成一个整形数组</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> size   数组大小</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> rangeL 数组左边范围（包含）</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> rangeR 数组右边范围（包含）</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 一个整形数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] generateRandomArray(<span class="type">int</span> size, <span class="type">int</span> rangeL, <span class="type">int</span> rangeR) &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            arr[i] = (<span class="type">int</span>) (Math.random() * (rangeR - rangeL + <span class="number">1</span>)) + rangeL;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成一个近乎有序的整形数组</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> size      数组大小</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> swapTimes 将有序数组打乱次数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 一个近乎有序的整形数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] generateAlmostOrderlyArray(<span class="type">int</span> size, <span class="type">int</span> swapTimes) &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            arr[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; swapTimes; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">index1</span> <span class="operator">=</span> (<span class="type">int</span>) (Math.random() * size);</span><br><span class="line">            <span class="type">int</span> <span class="variable">index2</span> <span class="operator">=</span> (<span class="type">int</span>) (Math.random() * size);</span><br><span class="line">            swap(arr, index1, index2);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断一个数组是否有序，有序返回true，无序返回false</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr 数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 是否有序</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isOrderly</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> isOrderAsc(arr) || isOrderDesc(arr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断一个数组是否顺序有序，有序返回true，无序返回false</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr 数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 是否有序</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isOrderAsc</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] &gt; arr[i + <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断一个数组是否倒序有序，有序返回true，无序返回false</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr 数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 是否有序</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isOrderDesc</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> arr.length - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] &gt; arr[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 拷贝一个整形数组</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr 整形数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 新的整形数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] copyIntArray(<span class="type">int</span>[] arr) &#123;</span><br><span class="line">        <span class="type">int</span>[] copyArr = <span class="keyword">new</span> <span class="title class_">int</span>[arr.length];</span><br><span class="line">        System.arraycopy(arr, <span class="number">0</span>, copyArr, <span class="number">0</span>, arr.length);</span><br><span class="line">        <span class="keyword">return</span> copyArr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 交换数组中的两个索引的位置</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr 整形数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> i   第一个索引</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> j   第二个索引</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[i];</span><br><span class="line">        arr[i] = arr[j];</span><br><span class="line">        arr[j] = temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 打印数组</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr 整形数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printArray</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i : arr) &#123;</span><br><span class="line">            System.out.print(i + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Sort函数式接口"><a href="#Sort函数式接口" class="headerlink" title="Sort函数式接口"></a>Sort函数式接口</h2><blockquote>
<p>一个基于 JDK8 Lambda 特性的函数式接口，所以该排序算法环境的搭建基于 JDK8+ 的版本。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Sort</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 排序方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr 数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] arr)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="SortRunner"><a href="#SortRunner" class="headerlink" title="SortRunner"></a>SortRunner</h2><blockquote>
<p>SortRunner 中有用于运行 Sort 函数式接口的方法，可以在该类的方法下编写一些特定的操作，用于辅助排序算法编写和测试。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SortRunner</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 运行排序算法的方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr  一个数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sort Sort函数式接口</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(<span class="type">int</span>[] arr, Sort sort)</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;数组排序前：&quot;</span>);</span><br><span class="line">        SortUtils.printArray(arr);</span><br><span class="line">        <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        sort.sort(arr);</span><br><span class="line">        <span class="type">long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">if</span> (SortUtils.isOrderly(arr)) &#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;数组排序后：&quot;</span>);</span><br><span class="line">            SortUtils.printArray(arr);</span><br><span class="line">            System.out.println(<span class="string">&quot;数组排序所需时间为：&quot;</span> + (endTime - startTime) + <span class="string">&quot;毫秒&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;数组排序失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h1><h2 id="普通冒泡排序"><a href="#普通冒泡排序" class="headerlink" title="普通冒泡排序"></a>普通冒泡排序</h2><p>普通的冒泡排序是把相邻的元素两两比较，直到所有元素都比较结束为止</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.println(<span class="string">&quot;普通冒泡排序&quot;</span>);</span><br><span class="line">SortRunner.run(SortUtils.generateRandomArray(<span class="number">10000</span>, <span class="number">100</span>, <span class="number">100000</span>),</span><br><span class="line">        (arr) -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; arr.length - i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                        SortUtils.swap(arr, j, j + <span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>

<p>这是最为常见的冒泡排序，编写简单，易于理解，但是在一些特殊情况下，可能会浪费一些性能。</p>
<p>比如排序到 n - i 轮的时候，这是遍历数组，发现数组已经有序了，剩下的 i -1 轮其实已经可以不进行遍历了。</p>
<p>所以我们可以对冒泡排序进行一些优化。</p>
<h2 id="布尔类型变量判断有序"><a href="#布尔类型变量判断有序" class="headerlink" title="布尔类型变量判断有序"></a>布尔类型变量判断有序</h2><p>这种冒泡排序的思想是，在每一轮遍历数组前，设置一个变量用于标识数组有序，如果在该轮中，数组相邻的元素之间发生了交换，则说明此时数组仍处于无序状态，反之则有序。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 布尔类型变量判断有序优化冒泡排序</span></span><br><span class="line">System.out.println(<span class="string">&quot;布尔类型变量判断有序优化冒泡排序&quot;</span>);</span><br><span class="line">SortRunner.run(SortUtils.generateRandomArray(<span class="number">10000</span>, <span class="number">100</span>, <span class="number">100000</span>),</span><br><span class="line">        (arr) -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">                <span class="type">boolean</span> <span class="variable">isSorted</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; arr.length - i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                        SortUtils.swap(arr, j, j + <span class="number">1</span>);</span><br><span class="line">                        isSorted = <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (isSorted) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>



<h2 id="无序边界值"><a href="#无序边界值" class="headerlink" title="无序边界值"></a>无序边界值</h2><p>布尔类型变量判断有序优化冒泡排序，本质上是减少了冒泡排序的轮数，可以让冒泡排序轮询 &lt;= n - 1 次，但是对于每一轮交换的元素个数，依然是固定的。</p>
<p>但是有的时候，每一轮交换元素的时候，可能交换 n - i 次，数组后段的元素其实就已经有序了，这时继续向后遍历比较是无用的。</p>
<p>所以为了解决这种情况，可以使用无序边界来优化冒泡排序</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 无序边界值优化冒泡排序</span></span><br><span class="line">System.out.println(<span class="string">&quot;无序边界值优化冒泡排序&quot;</span>);</span><br><span class="line">SortRunner.run(SortUtils.generateRandomArray(<span class="number">10000</span>, <span class="number">100</span>, <span class="number">100000</span>),</span><br><span class="line">        (arr) -&gt; &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">lastExchangeIndex</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">sortBorder</span> <span class="operator">=</span> arr.length - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">                <span class="type">boolean</span> <span class="variable">isSorted</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; sortBorder; j++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                        SortUtils.swap(arr, j, j + <span class="number">1</span>);</span><br><span class="line">                        isSorted = <span class="literal">false</span>;</span><br><span class="line">                        lastExchangeIndex = j;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                sortBorder = lastExchangeIndex;</span><br><span class="line">                <span class="keyword">if</span> (isSorted) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>

<h2 id="鸡尾酒排序"><a href="#鸡尾酒排序" class="headerlink" title="鸡尾酒排序"></a>鸡尾酒排序</h2><p>在一些特殊情况下，比如对一些近似有序的数组进行排序的时候，可以考虑用鸡尾酒排序来对数据进行排序。</p>
<p>鸡尾酒排序的思想是：在冒泡排序比较元素和交换的过程中，使用双向遍历比较和交换元素。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 鸡尾酒排序</span></span><br><span class="line">System.out.println(<span class="string">&quot;鸡尾酒排序&quot;</span>);</span><br><span class="line">SortRunner.run(SortUtils.generateRandomArray(<span class="number">10000</span>, <span class="number">100</span>, <span class="number">100000</span>),</span><br><span class="line">        (arr) -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length / <span class="number">2</span>; i++) &#123;</span><br><span class="line">                <span class="comment">// 奇数轮，从左往右排序</span></span><br><span class="line">                <span class="type">boolean</span> <span class="variable">isSorted</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i; j &lt; arr.length - i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                        SortUtils.swap(arr, j, j + <span class="number">1</span>);</span><br><span class="line">                        isSorted = <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (isSorted) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 偶数轮，从右往左毕竟</span></span><br><span class="line">                isSorted = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> arr.length - i - <span class="number">1</span>; j &gt; i; j--) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (arr[j] &lt; arr[j - <span class="number">1</span>]) &#123;</span><br><span class="line">                        SortUtils.swap(arr, j, j - <span class="number">1</span>);</span><br><span class="line">                        isSorted = <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (isSorted) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>

<h2 id="左右无序边界值"><a href="#左右无序边界值" class="headerlink" title="左右无序边界值"></a>左右无序边界值</h2><blockquote>
<p>鸡尾酒排序同样可以使用无序边界值的方法对算法进行优化，不过因为鸡尾酒排序是双向的，所以无序值也是有左右两个。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 左右无序边界值优化鸡尾酒排序</span></span><br><span class="line">System.out.println(<span class="string">&quot;左右无序边界值优化鸡尾酒排序&quot;</span>);</span><br><span class="line">SortRunner.run(SortUtils.generateRandomArray(<span class="number">10000</span>, <span class="number">100</span>, <span class="number">100000</span>),</span><br><span class="line">        (arr) -&gt; &#123;</span><br><span class="line">            <span class="comment">// 左边最后进行元素交换的索引位置</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">leftExchangeIndex</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="comment">// 左边界</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">leftSortBorder</span> <span class="operator">=</span> leftExchangeIndex;</span><br><span class="line">            <span class="comment">// 右边最后进行元素交换的索引位置</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">rightExchangeIndex</span> <span class="operator">=</span> arr.length - <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// 右边界</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">rightSortBorder</span> <span class="operator">=</span> rightExchangeIndex;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length / <span class="number">2</span>; i++) &#123;</span><br><span class="line">                <span class="comment">// 奇数轮，从左往右排序</span></span><br><span class="line">                <span class="type">boolean</span> <span class="variable">isSorted</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i; j &lt; rightSortBorder; j++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                        SortUtils.swap(arr, j, j + <span class="number">1</span>);</span><br><span class="line">                        isSorted = <span class="literal">false</span>;</span><br><span class="line">                        rightExchangeIndex = j;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                rightSortBorder = rightExchangeIndex;</span><br><span class="line">                <span class="keyword">if</span> (isSorted) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 偶数轮，从右往左毕竟</span></span><br><span class="line">                isSorted = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> arr.length - i - <span class="number">1</span>; j &gt; leftSortBorder; j--) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (arr[j] &lt; arr[j - <span class="number">1</span>]) &#123;</span><br><span class="line">                        SortUtils.swap(arr, j, j - <span class="number">1</span>);</span><br><span class="line">                        isSorted = <span class="literal">false</span>;</span><br><span class="line">                        leftExchangeIndex = j;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                leftSortBorder = leftExchangeIndex;</span><br><span class="line">                <span class="keyword">if</span> (isSorted) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>


<h2 id="鸡尾酒排序的效率"><a href="#鸡尾酒排序的效率" class="headerlink" title="鸡尾酒排序的效率"></a>鸡尾酒排序的效率</h2><p>数组长度：100000</p>
<table>
<thead>
<tr>
<th></th>
<th>冒泡排序</th>
<th>鸡尾酒排序</th>
</tr>
</thead>
<tbody><tr>
<td>无序数组</td>
<td>27412毫秒</td>
<td>12868毫秒</td>
</tr>
<tr>
<td>近似有序</td>
<td>13962毫秒</td>
<td>43毫秒</td>
</tr>
</tbody></table>
<blockquote>
<p>以上的测试数据仅仅为简单测试，具体情况请自行测试，另外，如果排序数组长度过长，建议修改 SortRunner.run() 方法，去掉一些无用的操作步骤，减少排序测试的总体时长</p>
</blockquote>
<h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><blockquote>
<p>本文<strong>Github</strong> <a href="https://github.com/herenpeng/code-learn">https://github.com/herenpeng/code-learn</a> 已收录，欢迎<strong>Star</strong>。</p>
</blockquote>
]]></content>
      <categories>
        <category>数据结构与算法</category>
      </categories>
      <tags>
        <tag>排序算法</tag>
      </tags>
  </entry>
  <entry>
    <title>排序算法之计数排序</title>
    <url>/2021/04/18/algorithm/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E4%B9%8B%E8%AE%A1%E6%95%B0%E6%8E%92%E5%BA%8F/</url>
    <content><![CDATA[<h1 id="什么是计数排序"><a href="#什么是计数排序" class="headerlink" title="什么是计数排序"></a>什么是计数排序</h1><p>计数排序是一种利用数组下标来确定元素的正确位置的排序算法。</p>
<span id="more"></span>

<h2 id="算法实现"><a href="#算法实现" class="headerlink" title="算法实现"></a>算法实现</h2><p>1、根据数组中最大的元素的值 length，创建一个额外的长度为 length + 1 的数组，该数组的初始值均为 0。</p>
<p>2、遍历原数组，通过原数组的值，找到新开辟的数组的位置，将该位置的元素值进行 +1 操作。</p>
<p>3、遍历新数组，新数组中，下标标索引代表了原数组的元素的值，下标索引对应的值代表了原数组的元素出现的次数。</p>
<h3 id="计数排序的基本实现"><a href="#计数排序的基本实现" class="headerlink" title="计数排序的基本实现"></a>计数排序的基本实现</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    SortRunner.run(SortUtils.generateRandomArray(<span class="number">10000</span>, <span class="number">100</span>, <span class="number">1000</span>),</span><br><span class="line">            (arr) -&gt; &#123;</span><br><span class="line">                countSort(arr);</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">countSort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> arr[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] &gt; max) &#123;</span><br><span class="line">            max = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 统计每个元素的个数</span></span><br><span class="line">    <span class="type">int</span>[] countArray = <span class="keyword">new</span> <span class="title class_">int</span>[max + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        countArray[arr[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 通过元素个数，输入所有元素</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; countArray.length; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; countArray[i]; j++) &#123;</span><br><span class="line">            arr[index++] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="计数排序优化"><a href="#计数排序优化" class="headerlink" title="计数排序优化"></a>计数排序优化</h3><p>在上述的计数排序中，有一个问题，就是原数组的最小值是 100，最大值是 1000，而用于计数的数组长度开辟为 length + 1，这样一来，计数数组 0-99 的索引空间就被浪费了。</p>
<p>所以可以对计数排序进行一些优化，获取数组的最小值，作为计数数组的偏移量，用于计算整数在计数数组中的下标。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    SortRunner.run(SortUtils.generateRandomArray(<span class="number">10000</span>, <span class="number">100</span>, <span class="number">1000</span>),</span><br><span class="line">            (arr) -&gt; &#123;</span><br><span class="line">                countSort(arr);</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">countSort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> arr[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> arr[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] &gt; max) &#123;</span><br><span class="line">            max = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] &lt; min) &#123;</span><br><span class="line">            min = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 统计每个元素的个数</span></span><br><span class="line">    <span class="type">int</span>[] countArray = <span class="keyword">new</span> <span class="title class_">int</span>[max - min + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        countArray[arr[i] - min]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 通过元素个数，输入所有元素</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; countArray.length; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; countArray[i]; j++) &#123;</span><br><span class="line">            arr[index++] = i + min;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="稳定排序"><a href="#稳定排序" class="headerlink" title="稳定排序"></a>稳定排序</h3><p>什么是稳定排序？</p>
<p>稳定排序是指，在需要排序的元素之中，值相同的元素可以保持原本的相对位置，这种排序就被称作稳定排序。</p>
<p>上述的计数排序并不是稳定排序，可以通过再次进行优化，而使计数排序变成一种稳定排序。</p>
<p>为了使计数排序变成稳定排序，需要对计数数组进行变形，从计数数组的第二个元素开始，每一个元素都加上前面所有元素之和。</p>
<p>这样做的目的是使得计数数组的元素值，由原本对应的整数的个数，变成对应整数的最终排序的序号。</p>
<p>计数数组变形之和，从后往前遍历原数组，将原数组找到计数数组的值，从而将元素放入一个新的数组中，并将计数数组对应的值 -1。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    SortRunner.run(SortUtils.generateRandomArray(<span class="number">10000</span>, <span class="number">100</span>, <span class="number">1000</span>),</span><br><span class="line">            (arr) -&gt; &#123;</span><br><span class="line">                countSort(arr);</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">countSort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> arr[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> arr[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] &gt; max) &#123;</span><br><span class="line">            max = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] &lt; min) &#123;</span><br><span class="line">            min = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 统计每个元素的个数</span></span><br><span class="line">    <span class="type">int</span>[] countArray = <span class="keyword">new</span> <span class="title class_">int</span>[max - min + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        countArray[arr[i] - min]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 变形</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; countArray.length; i++) &#123;</span><br><span class="line">        countArray[i] += countArray[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] sortArray = <span class="keyword">new</span> <span class="title class_">int</span>[arr.length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> arr.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="comment">// 获取排序的序号</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sort</span> <span class="operator">=</span> countArray[arr[i] - min];</span><br><span class="line">        <span class="comment">// 索引 = 序号-1</span></span><br><span class="line">        sortArray[sort - <span class="number">1</span>] = arr[i];</span><br><span class="line">        countArray[arr[i] - min]--;</span><br><span class="line">    &#125;</span><br><span class="line">    System.arraycopy(sortArray, <span class="number">0</span>, arr, <span class="number">0</span>, arr.length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="计数排序的复杂度"><a href="#计数排序的复杂度" class="headerlink" title="计数排序的复杂度"></a>计数排序的复杂度</h2><p>元素数组的规模为 n，最大和最小整数的差值是 m，则计数排序的时间复杂度和空间复杂度为：</p>
<p>时间复杂度为：O(n+m)</p>
<p>空间复杂度为：O(m)</p>
<h2 id="计数排序的局限性"><a href="#计数排序的局限性" class="headerlink" title="计数排序的局限性"></a>计数排序的局限性</h2><p>计数排序的速度非常快，但是有一定的局限性。</p>
<p>1、当原始数组的规模最大值和最小值差距过大时，计数排序并不适用，因为差值过大的时候，会严重浪费空间，而且计数数组过大，也会增加时间复杂度。</p>
<p>2、当原始数组的值不是整数的时候，也不适用计数排序，因为计数排序需要通过值来找到对应的索引，而小数找不到对应的索引。</p>
<h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><blockquote>
<p>本文<strong>Github</strong> <a href="https://github.com/herenpeng/code-learn">https://github.com/herenpeng/code-learn</a> 已收录，欢迎<strong>Star</strong>。</p>
</blockquote>
]]></content>
      <categories>
        <category>数据结构与算法</category>
      </categories>
      <tags>
        <tag>排序算法</tag>
      </tags>
  </entry>
  <entry>
    <title>数据结构——栈与队列（Java实现）</title>
    <url>/2020/02/14/algorithm/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E2%80%94%E2%80%94%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97%EF%BC%88Java%E5%AE%9E%E7%8E%B0%EF%BC%89/</url>
    <content><![CDATA[<h1 id="什么是栈与队列？"><a href="#什么是栈与队列？" class="headerlink" title="什么是栈与队列？"></a>什么是栈与队列？</h1><ul>
<li>栈是一种特殊的线性表结构，数据在栈中，只能从栈顶进入，也只能从栈顶弹出，具有<strong>先进后出</strong>的特点。</li>
<li>队列也是一种特殊的线性表结构，数据在队列中，只能从队列的最后存入队列，数据移出只能从队列的最前面取出，具有<strong>先进先出，后进后出</strong>的特点。</li>
</ul>
<p>【<strong>循环队列</strong>】循环队列是一种特殊的队列，在满足普通队列的基础上，解决了普通队列因为取出数据而造成空间浪费的情况，它维护了队列的队首和队尾索引，使索引在越界时能够从新返回初始化。</p>
<h2 id="栈的实现（Java）"><a href="#栈的实现（Java）" class="headerlink" title="栈的实现（Java）"></a>栈的实现（Java）</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *     数据栈，Java实现</span></span><br><span class="line"><span class="comment"> *         数据栈是一种特殊的线性表结构，</span></span><br><span class="line"><span class="comment"> *         所有数据只能从栈顶插入，也只能从栈顶取出</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> hrp</span></span><br><span class="line"><span class="comment"> * 2020年2月14日 上午11:33:59</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyStack</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] arr;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> maxSize;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> top;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     指定栈的大小，初始化栈</span></span><br><span class="line"><span class="comment">     *         maxSize：栈的最大容量</span></span><br><span class="line"><span class="comment">     *         top：栈顶数据的索引</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> size</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyStack</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.maxSize = size;</span><br><span class="line">        <span class="built_in">this</span>.arr = <span class="keyword">new</span> <span class="title class_">int</span>[maxSize];</span><br><span class="line">        <span class="built_in">this</span>.top = -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     压栈，将数据从栈顶压入栈中，维护top索引</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        arr[++top] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     弹出，将数据中栈顶弹出，维护top索引</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> arr[top--];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     判断栈是否为空，直接比较top==-1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> top == -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     判断栈是否满了，直接比较top==(maxSize-1)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> top == maxSize - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     打印栈，循环次数为top+1</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printStack</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= top; i++) &#123;</span><br><span class="line">            System.out.print(arr[i]+<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="循环队列的实现（Java）"><a href="#循环队列的实现（Java）" class="headerlink" title="循环队列的实现（Java）"></a>循环队列的实现（Java）</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *     循环队列，Java实现</span></span><br><span class="line"><span class="comment"> *         队列是一种特殊的线性表结构，</span></span><br><span class="line"><span class="comment"> *         它只允许在表的前端进行删除操作，在表的后端进行添加操作 </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> hrp</span></span><br><span class="line"><span class="comment"> * 2020年2月14日 上午10:46:57</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyQueue</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] arr;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> maxSize;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> elems;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> font;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> end;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     指定队列的大小，初始化队列</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> size</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyQueue</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.maxSize = size;</span><br><span class="line">        <span class="built_in">this</span>.arr = <span class="keyword">new</span> <span class="title class_">int</span>[maxSize];</span><br><span class="line">        <span class="built_in">this</span>.elems = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">this</span>.font = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">this</span>.end = -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     插入操作，如果此时end索引已经到达最后了，将索引维护为-1，在执行插入操作</span></span><br><span class="line"><span class="comment">     *         同时判断队列是否满了，如果队列未满，则elems++，如果满了，则覆盖最前面的值，font++</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(end == maxSize - <span class="number">1</span>) &#123;</span><br><span class="line">            end = -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[++end] = value;</span><br><span class="line">        <span class="keyword">if</span>(elems &lt; maxSize) &#123;</span><br><span class="line">            elems++;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            font++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     移除操作，先判断font是否已经超出了数组索引范围，是则重新维护索引</span></span><br><span class="line"><span class="comment">     *         首先队列长度elems--，并将font索引是指返回，同时维护索引位置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">remove</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(font == maxSize) &#123;</span><br><span class="line">            font = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        elems--;</span><br><span class="line">        <span class="keyword">return</span> arr[font++];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     判断队列是否为空，直接比较队列的elems属性是否为0</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.elems == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     判断队列是否满了，直接比较队列的elems属性和MaxSize的值是否相等</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.elems == maxSize;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     打印队列，已知循环次数为队列长度，打印次数为elems</span></span><br><span class="line"><span class="comment">     *         注意：不应该直接使用font作为数组索引进行打印，</span></span><br><span class="line"><span class="comment">     *         因为在++过程中会破坏数组font索引的正确性</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> font;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; elems; i++) &#123;</span><br><span class="line">            System.out.print(arr[index++]+<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(index == maxSize) &#123;</span><br><span class="line">                index = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>数据结构与算法</category>
      </categories>
      <tags>
        <tag>数据结构</tag>
        <tag>Java</tag>
        <tag>栈</tag>
        <tag>队列</tag>
      </tags>
  </entry>
  <entry>
    <title>数据结构与算法-排序算法辅助工具编写与三种基本排序算法（Java实现）</title>
    <url>/2020/01/11/algorithm/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7%E7%BC%96%E5%86%99%E4%B8%8E%E4%B8%89%E7%A7%8D%E5%9F%BA%E6%9C%AC%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%EF%BC%88Java%E5%AE%9E%E7%8E%B0%EF%BC%89/</url>
    <content><![CDATA[<p>初学者刚刚接触算法的时候，可以通过编写一些辅助的工具来辅助算法的学习。</p>
<span id="more"></span>

<h1 id="一、排序算法辅助工具类"><a href="#一、排序算法辅助工具类" class="headerlink" title="一、排序算法辅助工具类"></a>一、排序算法辅助工具类</h1><h2 id="1-随机生成一个整形数组"><a href="#1-随机生成一个整形数组" class="headerlink" title="1. 随机生成一个整形数组"></a>1. 随机生成一个整形数组</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *     随机生成一个整形数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> size        数组大小</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> rangeL    数组左边范围（包含）</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> rangeR    数组右边范围（包含）</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] generateRandomArray(<span class="type">int</span> size,<span class="type">int</span> rangeL,<span class="type">int</span> rangeR) &#123;</span><br><span class="line">    <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; size;i++) &#123;</span><br><span class="line">        arr[i] = (<span class="type">int</span>) (Math.random() * (rangeR-rangeL+<span class="number">1</span>)) + rangeL;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-生成一个近乎有序的整形数组"><a href="#2-生成一个近乎有序的整形数组" class="headerlink" title="2. 生成一个近乎有序的整形数组"></a>2. 生成一个近乎有序的整形数组</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生成一个近乎有序的整形数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> size        数组大小</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> swapTimes    将有序数组打乱次数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] generateAlmostOrderlyArray(<span class="type">int</span> size,<span class="type">int</span> swapTimes) &#123;</span><br><span class="line">    <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i&lt;size;i++) &#123;</span><br><span class="line">        arr[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; swapTimes;i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">index1</span> <span class="operator">=</span> (<span class="type">int</span>) Math.random()*size;</span><br><span class="line">        <span class="type">int</span> <span class="variable">index2</span> <span class="operator">=</span> (<span class="type">int</span>) Math.random()*size;</span><br><span class="line">        swap(arr,index1,index2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-判断一个数组是否正反皆有序"><a href="#3-判断一个数组是否正反皆有序" class="headerlink" title="3. 判断一个数组是否正反皆有序"></a>3. 判断一个数组是否正反皆有序</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断一个数组是否有序，有序返回true，无序返回false</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr    整形数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isOrderly</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(isOrderAsc(arr) || isOrderDesc(arr)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断一个数组是否顺序有序，有序返回true，无序返回false</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isOrderAsc</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i &lt; arr.length-<span class="number">1</span>;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i] &gt; arr[i+<span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断一个数组是否倒序有序，有序返回true，无序返回false</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isOrderDesc</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> arr.length-<span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i] &gt; arr[i-<span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-拷贝一个整形数组"><a href="#4-拷贝一个整形数组" class="headerlink" title="4. 拷贝一个整形数组"></a>4. 拷贝一个整形数组</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 拷贝一个整形数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr    整形数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] copyIntArray(<span class="type">int</span>[] arr) &#123;</span><br><span class="line">    <span class="type">int</span>[] copyArr = <span class="keyword">new</span> <span class="title class_">int</span>[arr.length];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; arr.length; i++) &#123;</span><br><span class="line">        copyArr[i] = arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> copyArr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-交换数组中的两个索引的位置"><a href="#5-交换数组中的两个索引的位置" class="headerlink" title="5. 交换数组中的两个索引的位置"></a>5. 交换数组中的两个索引的位置</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 交换数组中的两个索引的位置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr    整形数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> i        第一个索引</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> j        第二个索引</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> i, <span class="type">int</span> j)</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[i];</span><br><span class="line">    arr[i] = arr[j];</span><br><span class="line">    arr[j] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-打印数组"><a href="#6-打印数组" class="headerlink" title="6. 打印数组"></a>6. 打印数组</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *     打印数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr    整形数组</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printArray</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i : arr) &#123;</span><br><span class="line">        System.out.print(i+<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="二、三种基本排序算法"><a href="#二、三种基本排序算法" class="headerlink" title="二、三种基本排序算法"></a>二、三种基本排序算法</h1><h2 id="1-冒泡排序"><a href="#1-冒泡排序" class="headerlink" title="1. 冒泡排序"></a>1. 冒泡排序</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 冒泡排序</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr    整形数组</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">bubbleSort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; arr.length-<span class="number">1</span>;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>;j &lt; arr.length-<span class="number">1</span>;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[j+<span class="number">1</span>] &lt; arr[j]) &#123;</span><br><span class="line">                SortTestUtils.swap(arr, j+<span class="number">1</span>, j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-选择排序"><a href="#2-选择排序" class="headerlink" title="2. 选择排序"></a>2. 选择排序</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 选择排序</span></span><br><span class="line"><span class="comment"> *         -选择一个最小的数，插入最左边</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr    整形数组</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">selectSort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; arr.length-<span class="number">1</span>;i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i+<span class="number">1</span>;j &lt; arr.length;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[j] &lt; arr[min]) &#123;</span><br><span class="line">                min = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        SortTestUtils.swap(arr, i, min);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-插入排序"><a href="#3-插入排序" class="headerlink" title="3. 插入排序"></a>3. 插入排序</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 插入排序</span></span><br><span class="line"><span class="comment"> *         -随机选一个数，插入到合适的位置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr    整形数组</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">insertSort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">insertValue</span> <span class="operator">=</span> arr[i];</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(j = i;j &gt; <span class="number">0</span> &amp;&amp; arr[j-<span class="number">1</span>] &gt; insertValue; j--) &#123;</span><br><span class="line">            arr[j] = arr[j-<span class="number">1</span>]; </span><br><span class="line">        &#125;</span><br><span class="line">        arr[j] = insertValue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>数据结构与算法</category>
      </categories>
      <tags>
        <tag>排序算法</tag>
        <tag>数据结构</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>数据结构与算法——希尔排序（Java实现）</title>
    <url>/2020/02/18/algorithm/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E2%80%94%E2%80%94%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F%EF%BC%88Java%E5%AE%9E%E7%8E%B0%EF%BC%89/</url>
    <content><![CDATA[<p>希尔排序是插入排序的一个变种排序算法，由D.L.Shell在1959年提出，所以命名为希尔排序。</p>
<span id="more"></span>
<p>插入排序是一个时间复杂度为O(n^2)级别的不稳定的排序算法，之所以说它的不稳定的，是因为插入排序在处理近乎有序的数组的时候，排序效率会非常快，而在处理完全无序的数组的时候，排序效率则为N平方级别。<br>希尔排序就是为了解决插入排序在处理完全无序的数组时效率过慢而诞生的优秀算法。<br>希尔排序是思想是，在插入排序的基础上，对插入数组的索引的间隔进行扩大，这个间隔大小为 h。<br>h的最小值为1，最大值为h*3+1小于数组长度。</p>
<ul>
<li>希尔排序（Java实现）<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">shellsort</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>((h*<span class="number">3</span>+<span class="number">1</span>) &lt; arr.length) &#123;</span><br><span class="line">        h = h*<span class="number">3</span>+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(h &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> h; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">insertValue</span> <span class="operator">=</span> arr[i];</span><br><span class="line">            <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i;</span><br><span class="line">            <span class="keyword">for</span>(j = i; j &gt; h-<span class="number">1</span> &amp;&amp; arr[j-h] &gt; insertValue; j = j-h ) &#123;</span><br><span class="line">                arr[j] = arr[j-h];</span><br><span class="line">            &#125;</span><br><span class="line">            arr[j] = insertValue;</span><br><span class="line">        &#125;</span><br><span class="line">        h = (h-<span class="number">1</span>)/<span class="number">3</span>;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
]]></content>
      <categories>
        <category>数据结构与算法</category>
      </categories>
      <tags>
        <tag>排序算法</tag>
      </tags>
  </entry>
  <entry>
    <title>数据结构之什么是二叉堆？</title>
    <url>/2021/03/06/algorithm/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%8B%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8C%E5%8F%89%E5%A0%86/</url>
    <content><![CDATA[<h1 id="什么是二叉堆？"><a href="#什么是二叉堆？" class="headerlink" title="什么是二叉堆？"></a>什么是二叉堆？</h1><p>二叉堆本质上是一种完全二叉树，它分为两个类型：</p>
<ul>
<li>最大堆</li>
<li>最小堆<span id="more"></span>

</li>
</ul>
<p>什么是最大堆？</p>
<p>最大堆的任何一个父节点的值，都大于或等于它的左、右孩子节点的值。</p>
<p>什么是最小堆？</p>
<p>最小堆的任何一个父节点的值，都小于或等于它的左、右孩子节点的值。</p>
<p>二叉堆的根节点叫做堆顶。<br>最大堆和最小堆的特点决定了：最大堆的堆顶是整个堆中的最大元素，最小堆的堆顶是整个堆中的最小元素。</p>
<h1 id="二叉堆的自我调整"><a href="#二叉堆的自我调整" class="headerlink" title="二叉堆的自我调整"></a>二叉堆的自我调整</h1><p>二叉堆的操作都基于堆的自我调整。所谓堆的自我调整，就是把一个不符合堆性质的完全二叉树，调整为一个堆。</p>
<blockquote>
<p>本篇文章中是以最小堆为例子讲述的。</p>
</blockquote>
<h2 id="插入节点"><a href="#插入节点" class="headerlink" title="插入节点"></a>插入节点</h2><p>当二叉堆插入节点时，插入的位置是二叉堆的最后一个位置，可以将新插入的节点和它的父节点进行对比，如果新节点比父节点小，就需要让新节点“<strong>上浮</strong>”，和父节点交换位置。</p>
<p>然后继续和父节点比较大小，直到父节点比当前节点的值小为止。</p>
<h2 id="删除节点"><a href="#删除节点" class="headerlink" title="删除节点"></a>删除节点</h2><p>当二叉堆删除节点时，所删除的节点是对于堆顶的节点。</p>
<p>然后将堆的最后一个节点补到堆顶的位置，然后对堆顶的位置的节点进行“<strong>下沉</strong>”操作</p>
<h1 id="构建二叉堆"><a href="#构建二叉堆" class="headerlink" title="构建二叉堆"></a>构建二叉堆</h1><p>构建二叉堆，是通过一个无序的完全二叉树，对所有非叶子节点进行依次“下沉”操作，这样就得到了一个最小二叉堆。</p>
<h2 id="最小二叉堆的实现"><a href="#最小二叉堆的实现" class="headerlink" title="最小二叉堆的实现"></a>最小二叉堆的实现</h2><p>二叉堆虽然是一个完全二叉堆，但是它并不是链式存储，而是顺序存储，也就是说，二叉堆是通过数组实现的。</p>
<p>在数组中，在没有左、右孩子节点指针的情况下，可以通过数组下标的计算来得到一个节点的左右孩子节点。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">       <span class="number">1</span></span><br><span class="line">     /   \</span><br><span class="line">    <span class="number">4</span>     <span class="number">8</span></span><br><span class="line">   /  \  / \</span><br><span class="line">  <span class="number">10</span>  <span class="number">7</span>  <span class="number">9</span>  <span class="number">13</span></span><br><span class="line"> / \</span><br><span class="line"><span class="number">11</span>  <span class="number">19</span></span><br></pre></td></tr></table></figure>

<p>如上图中的最小堆，在数组中的存储位置为：</p>
<table>
<tr>
<td>1</td>
<td>4</td>
<td>8</td>
<td>10</td>
<td>7</td>
<td>9</td>
<td>13</td>
<td>11</td>
<td>19</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
</tr>
</table>

<p>如果一个节点的数组下标为<code>current</code>，则该节点的左孩子节点下标为<code>2 * current + 1</code>，该节点的右孩子节点下标为<code>2 * current + 2</code>，该节点的父节点下标为<code>(current - 1) / 2</code>。</p>
<h2 id="最小堆的构建"><a href="#最小堆的构建" class="headerlink" title="最小堆的构建"></a>最小堆的构建</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MinHeap</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用于存储二叉堆的数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer[] array;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当前二叉堆的最大节点个数，即数组长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> maxSize;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当前二叉堆的节点个数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取数组的实际元素个数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 数组的实际元素个数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取数组的长度</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 数组的长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">length</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.maxSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 最小堆的构造函数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr 数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MinHeap</span><span class="params">(Integer[] arr)</span> &#123;</span><br><span class="line">        buildMinHeap(arr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构建最小堆</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr 数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">buildMinHeap</span><span class="params">(Integer[] arr)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.size = arr.length;</span><br><span class="line">        <span class="built_in">this</span>.maxSize = arr.length;</span><br><span class="line">        <span class="built_in">this</span>.array = arr;</span><br><span class="line">        <span class="comment">// 获取最后一个节点的下标</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">lastIndex</span> <span class="operator">=</span> arr.length - <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 从最后一个非叶子节点开始进行下沉</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> getParentIndex(lastIndex); i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            downAdjust(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过孩子节点下标，获取父节点下标</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> childIndex 孩子节点下标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 父节点下标</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getParentIndex</span><span class="params">(<span class="type">int</span> childIndex)</span> &#123;</span><br><span class="line">        <span class="comment">// 通过取余数的方式，直接获取左右孩子节点的父节点</span></span><br><span class="line">        <span class="keyword">return</span> (childIndex - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过父节点下标，获取左孩子节点下标</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> parentIndex 父节点下标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 左孩子节点下标</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getLeftChildIndex</span><span class="params">(<span class="type">int</span> parentIndex)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * parentIndex + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过父节点下标，获取右孩子节点下标</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> parentIndex 父节点下标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 右孩子节点下标</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getRightChildIndex</span><span class="params">(<span class="type">int</span> parentIndex)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * parentIndex + <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最小堆插入节点并上浮"><a href="#最小堆插入节点并上浮" class="headerlink" title="最小堆插入节点并上浮"></a>最小堆插入节点并上浮</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 在堆的末尾插入一个数据</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> data 数值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> data)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (size &gt;= maxSize) &#123;</span><br><span class="line">        resize();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.array[<span class="built_in">this</span>.size++] = data;</span><br><span class="line">    upAdjust();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数组扩容操作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">resize</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 新数组的长度为原数组的2倍</span></span><br><span class="line">    <span class="built_in">this</span>.maxSize = <span class="built_in">this</span>.maxSize * <span class="number">2</span>;</span><br><span class="line">    <span class="comment">// 初始化新数组</span></span><br><span class="line">    Integer[] newArray = <span class="keyword">new</span> <span class="title class_">Integer</span>[maxSize];</span><br><span class="line">    <span class="comment">// 将原数组的元素复制到新数组中</span></span><br><span class="line">    System.arraycopy(<span class="built_in">this</span>.array, <span class="number">0</span>, newArray, <span class="number">0</span>, <span class="built_in">this</span>.size);</span><br><span class="line">    <span class="comment">// 使用新数组替换原数组</span></span><br><span class="line">    <span class="built_in">this</span>.array = newArray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 上浮操作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">upAdjust</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 数组最后一个节点所在的下标，即需要上浮的节点</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">currentIndex</span> <span class="operator">=</span> <span class="built_in">this</span>.size - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">parentIndex</span> <span class="operator">=</span> getParentIndex(currentIndex);</span><br><span class="line">    <span class="comment">// 将当前孩子节点使用临时变量保存</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="built_in">this</span>.array[currentIndex];</span><br><span class="line">    <span class="comment">// 如果当前孩子节点的下标大于0，并且当前孩子节点的值小于父节点的值</span></span><br><span class="line">    <span class="keyword">while</span> (currentIndex &gt; <span class="number">0</span> &amp;&amp; temp &lt; <span class="built_in">this</span>.array[parentIndex]) &#123;</span><br><span class="line">        <span class="comment">// 将父节点的值和当前孩子节点的值进行交换</span></span><br><span class="line">        <span class="built_in">this</span>.array[currentIndex] = <span class="built_in">this</span>.array[parentIndex];</span><br><span class="line">        <span class="comment">// 将当前孩子节点的值修改为之前的父节点的值</span></span><br><span class="line">        currentIndex = parentIndex;</span><br><span class="line">        <span class="comment">// 维护父节点的下标</span></span><br><span class="line">        parentIndex = getParentIndex(currentIndex);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.array[currentIndex] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="最小堆删除节点并下沉"><a href="#最小堆删除节点并下沉" class="headerlink" title="最小堆删除节点并下沉"></a>最小堆删除节点并下沉</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 移除堆顶的元素</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 堆顶的元素</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">remove</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.size == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">removeData</span> <span class="operator">=</span> <span class="built_in">this</span>.array[<span class="number">0</span>];</span><br><span class="line">    <span class="comment">// 获取最后一个节点</span></span><br><span class="line">    <span class="built_in">this</span>.array[<span class="number">0</span>] = <span class="built_in">this</span>.array[size - <span class="number">1</span>];</span><br><span class="line">    downAdjust(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">this</span>.array[--size] = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> removeData;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 下沉操作</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> parentIndex 需要下沉的节点下标</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">downAdjust</span><span class="params">(<span class="type">int</span> parentIndex)</span> &#123;</span><br><span class="line">    <span class="comment">// 获取左孩子节点的下标</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">childIndex</span> <span class="operator">=</span> getLeftChildIndex(parentIndex);</span><br><span class="line">    <span class="comment">// 将需要下沉的节点使用临时变量保存</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="built_in">this</span>.array[parentIndex];</span><br><span class="line">    <span class="comment">// 如果左孩子节点的下标还在堆的有效个数之内，</span></span><br><span class="line">    <span class="keyword">while</span> (childIndex &lt; <span class="built_in">this</span>.size) &#123;</span><br><span class="line">        <span class="comment">// 右孩子节点为左孩子节点的下一位</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">rightChildIndex</span> <span class="operator">=</span> childIndex + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 如果有右孩子节点，并右孩子节点比左孩子节点的值小，则定位到右孩子节点</span></span><br><span class="line">        <span class="keyword">if</span> (rightChildIndex &lt; <span class="built_in">this</span>.size &amp;&amp; <span class="built_in">this</span>.array[rightChildIndex] &lt; <span class="built_in">this</span>.array[childIndex]) &#123;</span><br><span class="line">            childIndex++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 如果需要下沉的节点小于孩子节点中最小的那个节点的值，直接打断程序，不继续下沉</span></span><br><span class="line">        <span class="keyword">if</span> (temp &lt;= <span class="built_in">this</span>.array[childIndex]) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 调换父子节点的值</span></span><br><span class="line">        <span class="built_in">this</span>.array[parentIndex] = <span class="built_in">this</span>.array[childIndex];</span><br><span class="line">        <span class="comment">// 将父节点的下标修改为子节点的下标</span></span><br><span class="line">        parentIndex = childIndex;</span><br><span class="line">        <span class="comment">// 维护左孩子节点的下标</span></span><br><span class="line">        childIndex = getLeftChildIndex(parentIndex);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.array[parentIndex] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="最小堆的完整代码实现"><a href="#最小堆的完整代码实现" class="headerlink" title="最小堆的完整代码实现"></a>最小堆的完整代码实现</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MinHeap</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用于存储二叉堆的数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer[] array;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当前二叉堆的最大节点个数，即数组长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> maxSize;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当前二叉堆的节点个数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取数组的实际元素个数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 数组的实际元素个数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取数组的长度</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 数组的长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">length</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.maxSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 最小堆的构造函数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr 数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MinHeap</span><span class="params">(Integer[] arr)</span> &#123;</span><br><span class="line">        buildMinHeap(arr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构建最小堆</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr 数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">buildMinHeap</span><span class="params">(Integer[] arr)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.size = arr.length;</span><br><span class="line">        <span class="built_in">this</span>.maxSize = arr.length;</span><br><span class="line">        <span class="built_in">this</span>.array = arr;</span><br><span class="line">        <span class="comment">// 获取最后一个节点的下标</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">lastIndex</span> <span class="operator">=</span> arr.length - <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 从最后一个非叶子节点开始进行下沉</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> getParentIndex(lastIndex); i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            downAdjust(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 在堆的末尾插入一个数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data 数值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> data)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (size &gt;= maxSize) &#123;</span><br><span class="line">            resize();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.array[<span class="built_in">this</span>.size++] = data;</span><br><span class="line">        upAdjust();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数组扩容操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">resize</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 新数组的长度为原数组的2倍</span></span><br><span class="line">        <span class="built_in">this</span>.maxSize = <span class="built_in">this</span>.maxSize * <span class="number">2</span>;</span><br><span class="line">        <span class="comment">// 初始化新数组</span></span><br><span class="line">        Integer[] newArray = <span class="keyword">new</span> <span class="title class_">Integer</span>[maxSize];</span><br><span class="line">        <span class="comment">// 将原数组的元素复制到新数组中</span></span><br><span class="line">        System.arraycopy(<span class="built_in">this</span>.array, <span class="number">0</span>, newArray, <span class="number">0</span>, <span class="built_in">this</span>.size);</span><br><span class="line">        <span class="comment">// 使用新数组替换原数组</span></span><br><span class="line">        <span class="built_in">this</span>.array = newArray;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 上浮操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">upAdjust</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 数组最后一个节点所在的下标，即需要上浮的节点</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">currentIndex</span> <span class="operator">=</span> <span class="built_in">this</span>.size - <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">parentIndex</span> <span class="operator">=</span> getParentIndex(currentIndex);</span><br><span class="line">        <span class="comment">// 将当前孩子节点使用临时变量保存</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="built_in">this</span>.array[currentIndex];</span><br><span class="line">        <span class="comment">// 如果当前孩子节点的下标大于0，并且当前孩子节点的值小于父节点的值</span></span><br><span class="line">        <span class="keyword">while</span> (currentIndex &gt; <span class="number">0</span> &amp;&amp; temp &lt; <span class="built_in">this</span>.array[parentIndex]) &#123;</span><br><span class="line">            <span class="comment">// 将父节点的值和当前孩子节点的值进行交换</span></span><br><span class="line">            <span class="built_in">this</span>.array[currentIndex] = <span class="built_in">this</span>.array[parentIndex];</span><br><span class="line">            <span class="comment">// 将当前孩子节点的值修改为之前的父节点的值</span></span><br><span class="line">            currentIndex = parentIndex;</span><br><span class="line">            <span class="comment">// 维护父节点的下标</span></span><br><span class="line">            parentIndex = getParentIndex(currentIndex);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.array[currentIndex] = temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 移除堆顶的元素</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 堆顶的元素</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">remove</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">removeData</span> <span class="operator">=</span> <span class="built_in">this</span>.array[<span class="number">0</span>];</span><br><span class="line">        <span class="comment">// 获取最后一个节点</span></span><br><span class="line">        <span class="built_in">this</span>.array[<span class="number">0</span>] = <span class="built_in">this</span>.array[size - <span class="number">1</span>];</span><br><span class="line">        downAdjust(<span class="number">0</span>);</span><br><span class="line">        <span class="built_in">this</span>.array[--size] = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">return</span> removeData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 下沉操作</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> parentIndex 需要下沉的节点下标</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">downAdjust</span><span class="params">(<span class="type">int</span> parentIndex)</span> &#123;</span><br><span class="line">        <span class="comment">// 获取左孩子节点的下标</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">childIndex</span> <span class="operator">=</span> getLeftChildIndex(parentIndex);</span><br><span class="line">        <span class="comment">// 将需要下沉的节点使用临时变量保存</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="built_in">this</span>.array[parentIndex];</span><br><span class="line">        <span class="comment">// 如果左孩子节点的下标还在堆的有效个数之内，</span></span><br><span class="line">        <span class="keyword">while</span> (childIndex &lt; <span class="built_in">this</span>.size) &#123;</span><br><span class="line">            <span class="comment">// 右孩子节点为左孩子节点的下一位</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">rightChildIndex</span> <span class="operator">=</span> childIndex + <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// 如果有右孩子节点，并右孩子节点比左孩子节点的值小，则定位到右孩子节点</span></span><br><span class="line">            <span class="keyword">if</span> (rightChildIndex &lt; <span class="built_in">this</span>.size &amp;&amp; <span class="built_in">this</span>.array[rightChildIndex] &lt; <span class="built_in">this</span>.array[childIndex]) &#123;</span><br><span class="line">                childIndex++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 如果需要下沉的节点小于孩子节点中最小的那个节点的值，直接打断程序，不继续下沉</span></span><br><span class="line">            <span class="keyword">if</span> (temp &lt;= <span class="built_in">this</span>.array[childIndex]) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 调换父子节点的值</span></span><br><span class="line">            <span class="built_in">this</span>.array[parentIndex] = <span class="built_in">this</span>.array[childIndex];</span><br><span class="line">            <span class="comment">// 将父节点的下标修改为子节点的下标</span></span><br><span class="line">            parentIndex = childIndex;</span><br><span class="line">            <span class="comment">// 维护左孩子节点的下标</span></span><br><span class="line">            childIndex = getLeftChildIndex(parentIndex);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.array[parentIndex] = temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过孩子节点下标，获取父节点下标</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> childIndex 孩子节点下标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 父节点下标</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getParentIndex</span><span class="params">(<span class="type">int</span> childIndex)</span> &#123;</span><br><span class="line">        <span class="comment">// 通过取余数的方式，直接获取左右孩子节点的父节点</span></span><br><span class="line">        <span class="keyword">return</span> (childIndex - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过父节点下标，获取左孩子节点下标</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> parentIndex 父节点下标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 左孩子节点下标</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getLeftChildIndex</span><span class="params">(<span class="type">int</span> parentIndex)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * parentIndex + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过父节点下标，获取右孩子节点下标</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> parentIndex 父节点下标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 右孩子节点下标</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getRightChildIndex</span><span class="params">(<span class="type">int</span> parentIndex)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * parentIndex + <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><blockquote>
<p>本文<strong>Github</strong> <a href="https://github.com/herenpeng/code-learn">https://github.com/herenpeng/code-learn</a> 已收录，欢迎<strong>Star</strong>。</p>
</blockquote>
]]></content>
      <categories>
        <category>数据结构与算法</category>
      </categories>
      <tags>
        <tag>堆</tag>
      </tags>
  </entry>
  <entry>
    <title>数据结构之什么是数组？</title>
    <url>/2021/02/23/algorithm/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%8B%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E7%BB%84/</url>
    <content><![CDATA[<h1 id="什么是数组？"><a href="#什么是数组？" class="headerlink" title="什么是数组？"></a>什么是数组？</h1><p>数组对应的英文是array，是有限个相同类型的变量所组成的有序集合，数组中的每一个变量被称为元素。数组是最为简单、最为常用的数据结构。</p>
<span id="more"></span>

<ul>
<li>数组的每一个元素都有自己的下标，该下标从0开始，一直到数组长度-1结束。</li>
<li>数组在内容中是顺序存储，在内存中的表现形式为一整块完整的内存空间。</li>
<li>数组的特点，有限个数，相同类型，有序。</li>
</ul>
<h1 id="数组的基本操作"><a href="#数组的基本操作" class="headerlink" title="数组的基本操作"></a>数组的基本操作</h1><p>数组的基本操作，无非就是增、删、改、查四种情况。</p>
<h2 id="查——读取元素"><a href="#查——读取元素" class="headerlink" title="查——读取元素"></a>查——读取元素</h2><p>对于数组来说，读取元素是最为简单的操作。由于数组在内存中顺序存储，所以只需要给出一个数组下标，就可以读取到对应的数组元素。</p>
<p>这种通过数组下标读取元素的方式叫做<strong>随机读取</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">3</span>&#125;;</span><br><span class="line"><span class="comment">// 输出下标为2的数组元素，即数组的第三个元素，4</span></span><br><span class="line">System.out.println(arr[<span class="number">2</span>]);</span><br></pre></td></tr></table></figure>

<h2 id="改——更新元素"><a href="#改——更新元素" class="headerlink" title="改——更新元素"></a>改——更新元素</h2><p>把数组的某一个元素替换为一个新值，也是非常简单的事情，直接利用数组的下标，就可以把新值赋给该元素。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">3</span>&#125;;</span><br><span class="line"><span class="comment">// 输出赋值前，下标为4的数组元素，值为：1</span></span><br><span class="line">System.out.println(arr[<span class="number">4</span>]);</span><br><span class="line"><span class="comment">// 赋值，改变数组元素的值</span></span><br><span class="line">arr[<span class="number">4</span>] = <span class="number">10</span>;</span><br><span class="line"><span class="comment">// 输出赋值后，下标为4的数组元素，值为：10</span></span><br><span class="line">System.out.println(arr[<span class="number">4</span>]);</span><br></pre></td></tr></table></figure>

<h2 id="增——插入元素"><a href="#增——插入元素" class="headerlink" title="增——插入元素"></a>增——插入元素</h2><p>数组的插入元素操作是一个比较复杂的操作，因为涉及数组元素个数的变动，所以在介绍插入元素操作之前，需要先介绍一下数组的长度和数组的实际元素个数。</p>
<p>数组的长度：即数组初始化时开辟的内存空间大小。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 开辟了一个数组长度为5的数组内存空间</span></span><br><span class="line"><span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">5</span>];</span><br></pre></td></tr></table></figure>

<p>数组的实际元素个数：即数组中存在的元素个数。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 开辟了一个数组长度为5的数组内存空间</span></span><br><span class="line"><span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">5</span>];</span><br><span class="line">arr[<span class="number">0</span>] = <span class="number">2</span>;</span><br><span class="line">arr[<span class="number">1</span>] = <span class="number">8</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i : arr) &#123;</span><br><span class="line">    <span class="comment">// 输出：2 8 0 0 0，数组的实际元素个数为2</span></span><br><span class="line">    System.out.print(i + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述的数组中，实际的元素个数只有两个，即下标为0、1的两个元素，其他元素之所以输出为0，是因为在Java中，int类型的初始化值为0，所以输出的数组为<code>2 8 0 0 0</code>，如果使用<code>Integer</code>类型的数组，则可以通过<code>null</code>值进行更直观的判断。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 开辟了一个数组长度为5，类型为Integer的数组内存空间</span></span><br><span class="line">Integer[] array = <span class="keyword">new</span> <span class="title class_">Integer</span>[<span class="number">5</span>];</span><br><span class="line">array[<span class="number">0</span>] = <span class="number">2</span>;</span><br><span class="line">array[<span class="number">1</span>] = <span class="number">8</span>;</span><br><span class="line"><span class="keyword">for</span> (Integer integer : array) &#123;</span><br><span class="line">    <span class="comment">// 输出：2	8	null	null	null，数组的实际元素个数为2</span></span><br><span class="line">    System.out.print(integer + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>正是因为存在数组的长度和实际元素个数不同的情况，所以在一般情况下，我们会使用一个变量来记录数组的实际元素个数。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Array</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] array;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数组的最大元素个数，即为数组的长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> maxSize;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数组的实际元素个数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造函数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> capacity 初始化数组的容量大小，即maxSize大小</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Array</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="comment">// 初始化数组长度</span></span><br><span class="line">        <span class="built_in">this</span>.maxSize = capacity;</span><br><span class="line">        <span class="comment">// 初始化数组，开辟数组空间</span></span><br><span class="line">        <span class="built_in">this</span>.array = <span class="keyword">new</span> <span class="title class_">int</span>[maxSize];</span><br><span class="line">        <span class="comment">// 初始化数组实际元素个数，为0</span></span><br><span class="line">        <span class="built_in">this</span>.size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取数组的实际元素个数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 数组的实际元素个数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取数组的长度</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 数组的长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">length</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.maxSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们只需要通过创建Array类的对象的方式，即可完成一个数组的初始化。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Array</span> <span class="variable">array</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">5</span>);</span><br><span class="line"><span class="comment">// 数组的实际元素个数为：0</span></span><br><span class="line">System.out.println(array.size());</span><br><span class="line"><span class="comment">// 数组长度为：5</span></span><br><span class="line">System.out.println(array.length());</span><br></pre></td></tr></table></figure>

<p>这个时候，数组的插入插入操作即可以开始了。</p>
<p>数组的插入操作也分为三种，分别为：</p>
<ul>
<li>尾部插入  </li>
<li>中间插入，头部插入本质上也属于中间插入的一种</li>
<li>超范围插入</li>
</ul>
<p>尾部插入最为简单，只需要将元素放置在数组尾部的空闲元素的位置上即可。</p>
<p>中间插入较为复杂，因为在数组中间位置插入元素，需要先将插入位置及插入位置后面的元素向后移动，空出一个数组下标给插入的元素。</p>
<p>超范围插入最为复杂，因为超范围插入涉及到了数组的扩容。</p>
<h3 id="数组扩容"><a href="#数组扩容" class="headerlink" title="数组扩容"></a>数组扩容</h3><p>为什么需要数组扩容？</p>
<p>我们不断往一个数组中插入元素，最终数组实际元素个数等于，甚至大于数组长度，这个时候数组已经无法容纳更多的元素了，所以我们需要通过扩容在扩大数组的容量。</p>
<p>怎么扩容？</p>
<p>数组的长度在初始化的时候就已经固定了，这也是数组有限个数的特点，如果如果想要对数组进行扩容，就需要创建一个容量比原数组更大的新数组，并将原数组的元素复制到新数组中，实现原数组的替换操作。</p>
<p>所以数组的插入操作的具体代码为：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 直接在数组尾部插入元素</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> element 需要插入的元素</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> element)</span> &#123;</span><br><span class="line">    add(<span class="built_in">this</span>.size, element);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 在数组指定位置插入元素</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index   数组指定的下标位置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> element 需要插入的元素</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> element)</span> &#123;</span><br><span class="line">    <span class="comment">// 这样操作的目的是为了保证数组的元素全部都可以从0开始，并且中间不会出现空闲元素</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt; size) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;插入元素的位置超出数组的实际元素范围&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 如果当前数组实际元素个数大于等于数组长度，进行扩容操作</span></span><br><span class="line">    <span class="keyword">if</span> (size &gt;= maxSize) &#123;</span><br><span class="line">        resize();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 从下标index开始将元素向后移动一位</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size; i &gt; index; i--) &#123;</span><br><span class="line">        <span class="built_in">this</span>.array[i] = <span class="built_in">this</span>.array[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 在index位置插入需要插入的元素</span></span><br><span class="line">    <span class="built_in">this</span>.array[index] = element;</span><br><span class="line">    <span class="comment">// 数组实际元素个数+1</span></span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 扩容操作，每次扩容，新数组的长度为原数组的2倍</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">resize</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 新数组的长度为原数组的2倍</span></span><br><span class="line">    <span class="built_in">this</span>.maxSize = <span class="built_in">this</span>.maxSize * <span class="number">2</span>;</span><br><span class="line">    <span class="comment">// 初始化新数组</span></span><br><span class="line">    <span class="type">int</span>[] newArray = <span class="keyword">new</span> <span class="title class_">int</span>[maxSize];</span><br><span class="line">    <span class="comment">// 将原数组的元素复制到新数组中</span></span><br><span class="line">    System.arraycopy(<span class="built_in">this</span>.array, <span class="number">0</span>, newArray, <span class="number">0</span>, <span class="built_in">this</span>.size);</span><br><span class="line">    <span class="comment">// 使用新数组替换原数组</span></span><br><span class="line">    <span class="built_in">this</span>.array = newArray;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="删——删除元素"><a href="#删——删除元素" class="headerlink" title="删——删除元素"></a>删——删除元素</h2><p>数组的删除操作比起插入元素来，比较简单一些，因为不涉及数组扩容的问题，我们只需要将数组被删除位置后面的元素向前移动即可。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除数组元素</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index 需要删除的数组元素下标位置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 删除的元素</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="comment">// 判断需要删除的数组下标是否在数组实际元素范围之内</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;删除元素的位置超出数组的实际元素范围&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">deleteElement</span> <span class="operator">=</span> <span class="built_in">this</span>.array[index];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> index; i &lt; size - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">this</span>.array[index] = <span class="built_in">this</span>.array[index + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    size--;</span><br><span class="line">    <span class="keyword">return</span> deleteElement;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="数组操作的时间复杂度"><a href="#数组操作的时间复杂度" class="headerlink" title="数组操作的时间复杂度"></a>数组操作的时间复杂度</h1><table>
<thead>
<tr>
<th>数组操作</th>
<th>时间复杂度</th>
</tr>
</thead>
<tbody><tr>
<td>读取元素</td>
<td>O(1)</td>
</tr>
<tr>
<td>更新元素</td>
<td>O(1)</td>
</tr>
<tr>
<td>插入元素</td>
<td>O(n)</td>
</tr>
<tr>
<td>删除元素</td>
<td>O(n)</td>
</tr>
</tbody></table>
<h1 id="数组的优势和劣势"><a href="#数组的优势和劣势" class="headerlink" title="数组的优势和劣势"></a>数组的优势和劣势</h1><p>优势：数组拥有非常高效的随机访问能力，只需要通过下标，就可以用常量时间找到对应的元素。</p>
<p>劣势：数组在插入和删除的时候，需要移动大量元素，导致效率低下。</p>
<p>总结：数组适用于读操作多，写操作少的场景。</p>
<h1 id="数组的完整代码（Java）"><a href="#数组的完整代码（Java）" class="headerlink" title="数组的完整代码（Java）"></a>数组的完整代码（Java）</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Array</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] array;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数组的最大元素个数，即为数组的长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> maxSize;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数组的实际元素个数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造函数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> capacity 初始化数组的容量大小，即maxSize大小</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Array</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="comment">// 初始化数组长度</span></span><br><span class="line">        <span class="built_in">this</span>.maxSize = capacity;</span><br><span class="line">        <span class="comment">// 初始化数组，开辟数组空间</span></span><br><span class="line">        <span class="built_in">this</span>.array = <span class="keyword">new</span> <span class="title class_">int</span>[maxSize];</span><br><span class="line">        <span class="comment">// 初始化数组实际元素个数，为0</span></span><br><span class="line">        <span class="built_in">this</span>.size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取数组的实际元素个数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 数组的实际元素个数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取数组的长度</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 数组的长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">length</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.maxSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取下标对应的元素</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index 数组下标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 下标对应的元素</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="comment">// 判断需要删除的数组下标是否在数组实际元素范围之内</span></span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;删除元素的位置超出数组的实际元素范围&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.array[index];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新下标对应的元素</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index   数组下标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> element 需要更新的元素</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> element)</span> &#123;</span><br><span class="line">        <span class="comment">// 判断需要删除的数组下标是否在数组实际元素范围之内</span></span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;删除元素的位置超出数组的实际元素范围&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.array[index] = element;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 直接在数组尾部插入元素</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> element 需要插入的元素</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> element)</span> &#123;</span><br><span class="line">        add(<span class="built_in">this</span>.size, element);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 在数组指定位置插入元素</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index   数组指定的下标位置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> element 需要插入的元素</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> element)</span> &#123;</span><br><span class="line">        <span class="comment">// 这样操作的目的是为了保证数组的元素全部都可以从0开始，并且中间不会出现空闲元素</span></span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt; size) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;插入元素的位置超出数组的实际元素范围&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 如果当前数组实际元素个数大于等于数组长度，进行扩容操作</span></span><br><span class="line">        <span class="keyword">if</span> (size &gt;= maxSize) &#123;</span><br><span class="line">            resize();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 从下标index开始将元素向后移动一位</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size; i &gt; index; i--) &#123;</span><br><span class="line">            <span class="built_in">this</span>.array[i] = <span class="built_in">this</span>.array[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 在index位置插入需要插入的元素</span></span><br><span class="line">        <span class="built_in">this</span>.array[index] = element;</span><br><span class="line">        <span class="comment">// 数组实际元素个数+1</span></span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 扩容操作，每次扩容，新数组的长度为原数组的2倍</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">resize</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 新数组的长度为原数组的2倍</span></span><br><span class="line">        <span class="built_in">this</span>.maxSize = <span class="built_in">this</span>.maxSize * <span class="number">2</span>;</span><br><span class="line">        <span class="comment">// 初始化新数组</span></span><br><span class="line">        <span class="type">int</span>[] newArray = <span class="keyword">new</span> <span class="title class_">int</span>[maxSize];</span><br><span class="line">        <span class="comment">// 将原数组的元素复制到新数组中</span></span><br><span class="line">        System.arraycopy(<span class="built_in">this</span>.array, <span class="number">0</span>, newArray, <span class="number">0</span>, <span class="built_in">this</span>.size);</span><br><span class="line">        <span class="comment">// 使用新数组替换原数组</span></span><br><span class="line">        <span class="built_in">this</span>.array = newArray;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除数组元素</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index 需要删除的数组元素下标位置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 删除的元素</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="comment">// 判断需要删除的数组下标是否在数组实际元素范围之内</span></span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;删除元素的位置超出数组的实际元素范围&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">deleteElement</span> <span class="operator">=</span> <span class="built_in">this</span>.array[index];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> index; i &lt; size - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="built_in">this</span>.array[index] = <span class="built_in">this</span>.array[index + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> deleteElement;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><blockquote>
<p>本文<strong>Github</strong> <a href="https://github.com/herenpeng/code-learn">https://github.com/herenpeng/code-learn</a> 已收录，欢迎<strong>Star</strong>。</p>
</blockquote>
]]></content>
      <categories>
        <category>数据结构与算法</category>
      </categories>
      <tags>
        <tag>数组</tag>
      </tags>
  </entry>
  <entry>
    <title>数据结构之什么是树？</title>
    <url>/2021/02/28/algorithm/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%8B%E4%BB%80%E4%B9%88%E6%98%AF%E6%A0%91/</url>
    <content><![CDATA[<h1 id="什么是树？"><a href="#什么是树？" class="headerlink" title="什么是树？"></a>什么是树？</h1><p>数据结构中的树和现实生活中的树虽然不是同一种事物，但是却有着相同的特点。</p>
<p>数据结构中的树，其实就是一种和现实生活中的树有着相似结构的数据逻辑结构，从同一个“根”衍生出许多“枝干”，最后衍生出更多的“叶子”。</p>
<span id="more"></span>

<p>树的定义：</p>
<blockquote>
<p>树是n（你&gt;=0）个节点的有限集。当n=0时，称为空树。在任意一个非空树中，有如下特点。<br>1、有且仅有一个特定的称为根的节点。<br>2、当n&gt;1时，其余节点可分为m（m&gt;0）个互不相交的有限集，每一个集合本身又是一个树，并称为根的子树。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">     <span class="number">7</span></span><br><span class="line">   /   \</span><br><span class="line">  <span class="number">10</span>    <span class="number">8</span></span><br><span class="line"> /  \  /  \</span><br><span class="line"><span class="number">4</span>   <span class="number">1</span>  <span class="number">3</span>   <span class="number">6</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>根节点：树的最上面的那个节点，被称为<strong>根节点</strong>，所有非空树有且只有一个根节点。在上图中，元素<code>7</code>为根节点。</p>
</li>
<li><p>叶子节点：树的末端，没有“孩子”节点的节点被称作<strong>叶子节点</strong>。在上图中，元素<code>4、1、3、6</code>为叶子节点。</p>
</li>
<li><p>子树：树的非根节点，以及它的孩子节点，组成的树结构被称为<strong>子树</strong>。在上图中，由元素<code>10、4、1</code>组成的树结构为整棵树的子树。</p>
</li>
<li><p>树的高度：树的最大层级数，被称为树的高度或深度。在上图中，树的高度为<code>3</code>。</p>
</li>
<li><p>父节点：一个节点的上一层级的节点被称为当前节点的<strong>父节点</strong>。根节点没有父节点。在上图中，节点<code>10</code>是节点<code>4、1</code>的父节点。</p>
</li>
<li><p>孩子节点：一个节点的下一层级的节点被称为当前节点的<strong>孩子节点</strong>。叶子节点没有孩子节点。在上图中，节点<code>10</code>是节点<code>7</code>的孩子节点。</p>
</li>
<li><p>兄弟节点：一个节点同一层级的节点被称为当前节点的<strong>兄弟节点</strong>。所有节点都有n（n&gt;=0）个兄弟节点。在上图中，节点<code>8</code>是节点<code>10</code>的兄弟节点。</p>
</li>
</ul>
<h1 id="什么是二叉树？"><a href="#什么是二叉树？" class="headerlink" title="什么是二叉树？"></a>什么是二叉树？</h1><p>二叉树（binary tree）是数的一种特殊形式。二叉，顾名思义，这种数的每个节点最多有2个孩子节点。</p>
<blockquote>
<p>注意：这里是最多有2两个，可能只有1个节点，或者没有孩子节点。</p>
</blockquote>
<p>二叉树节点的两个孩子节点，一个被称为左孩子（lift child），一个被称为右孩子（right child）。这两个孩子节点的顺序是固定的，不能够颠倒或者混淆。</p>
<p>二叉树有两种特殊形式，分别叫做<strong>满二叉树</strong>和<strong>完全二叉树</strong>。</p>
<p>什么是满二叉树？</p>
<p>一个二叉树的所有非叶子节点都存在左右孩子，并且所有叶子节点都在同一层级上，那么这个树就叫做满二叉树。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">  满二叉树</span><br><span class="line">     <span class="number">7</span></span><br><span class="line">   /   \</span><br><span class="line">  <span class="number">10</span>    <span class="number">8</span></span><br><span class="line"> /  \  /  \</span><br><span class="line"><span class="number">4</span>   <span class="number">1</span>  <span class="number">3</span>   <span class="number">6</span></span><br></pre></td></tr></table></figure>

<p>什么是完全二叉树？</p>
<p>对于一个有n个节点的二叉树，按层级顺序编号，则所有节点的编号为从1到n。如果这个树的所有节点和同样深度的满二叉树的编号为从1到n的节点位置相同，则这个二叉树为完全二叉树。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">  完全二叉树</span><br><span class="line">     <span class="number">7</span></span><br><span class="line">   /   \</span><br><span class="line">  <span class="number">10</span>    <span class="number">8</span></span><br><span class="line"> /  \  /</span><br><span class="line"><span class="number">4</span>   <span class="number">1</span>  <span class="number">3</span></span><br></pre></td></tr></table></figure>

<h1 id="二叉树的实现"><a href="#二叉树的实现" class="headerlink" title="二叉树的实现"></a>二叉树的实现</h1><p>二叉树的实现方法一般有两种，分别为：</p>
<ul>
<li>链式存储结构</li>
<li>数组</li>
</ul>
<h2 id="链式存储结构"><a href="#链式存储结构" class="headerlink" title="链式存储结构"></a>链式存储结构</h2><p>链式存储结构实现二叉树，每个二叉树的节点拥有存储数据的data变量，同时有着指向左右孩子节点的指针变量，这样就可以简单实现二叉树的数据结构了。</p>
<h3 id="实现代码"><a href="#实现代码" class="headerlink" title="实现代码"></a>实现代码</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinaryTree</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 二叉树根节点指针</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> TreeNode root;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取二叉树的根节点</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 二叉树的根节点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">root</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过数组创建二叉树时数组的索引位置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">createBinaryTreeByArrIndex</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过数组创建二叉树的构造方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr 数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BinaryTree</span><span class="params">(Integer[] arr)</span> &#123;</span><br><span class="line">        <span class="comment">// 通过数组构建二叉树，并保存二叉树根节点的指针</span></span><br><span class="line">        <span class="built_in">this</span>.root = createBinaryTree(arr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建二叉树的方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr 数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> root根节点指针</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">createBinaryTree</span><span class="params">(Integer[] arr)</span> &#123;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// 如果数组为空，或者索引越界，则直接返回空的二叉树</span></span><br><span class="line">        <span class="keyword">if</span> (arr == <span class="literal">null</span> || arr.length == <span class="number">0</span> || createBinaryTreeByArrIndex &lt; <span class="number">0</span></span><br><span class="line">                || createBinaryTreeByArrIndex &gt; arr.length - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 通过索引获取数组对应位置的数据</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">data</span> <span class="operator">=</span> arr[createBinaryTreeByArrIndex++];</span><br><span class="line">        <span class="keyword">if</span> (data != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 如果这个数据不为空，则创建节点，并返回</span></span><br><span class="line">            node = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(data);</span><br><span class="line">            <span class="comment">// 数组的下一个节点为该节点的左孩子节点</span></span><br><span class="line">            node.leftChild = createBinaryTree(arr);</span><br><span class="line">            <span class="comment">// 数组的下一个节点为该节点的右孩子节点</span></span><br><span class="line">            node.rightChile = createBinaryTree(arr);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 二叉树节点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">TreeNode</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 二叉树节点存储节点数据的变量</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> Integer data;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 二叉树节点左孩子节点指针</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> TreeNode leftChild;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 二叉树节点右孩子节点指针</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> TreeNode rightChile;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 获取节点数据的方法</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> 节点数据</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> Integer <span class="title function_">data</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.data;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 获取节点左孩子节点指针的方法</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> 节点左孩子节点指针</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> TreeNode <span class="title function_">leftChild</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.leftChild;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 获取节点右孩子节点指针的方法</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> 节点右孩子节点指针</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> TreeNode <span class="title function_">rightChile</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.rightChile;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 节点构造方法</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> data 节点数据</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        TreeNode(Integer data) &#123;</span><br><span class="line">            <span class="built_in">this</span>.data = data;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>使用数组存储时，会按照层级顺序把二叉树的节点放入数组中对应的位置上去。如果某一个节点的左孩子或者右孩子缺失，则数组对应的位置也会空出来。</p>
<p>其中二叉树的根节点存储在数组的第一位，即下标为0的位置。</p>
<p>如果一个二叉树的父节点下标为<code>parent</code>，则该节点的左孩子节点的下标即为<code>2*parent+1</code>，该节点的右孩子节点的下标为<code>2*parent+2</code>。</p>
<p>同理而言，一个左孩子节点的下标为<code>leftChild</code>，则该左孩子节点的父节点为<code>(leftChile-1)/2</code>。</p>
<p>如果一个右孩子节点的下标为<code>rightChild</code>，则该右孩子节点的父节点为<code>(rightChild-1)/2</code>。</p>
<h1 id="二叉查找树"><a href="#二叉查找树" class="headerlink" title="二叉查找树"></a>二叉查找树</h1><p>什么是二叉查找树？</p>
<p>二叉查找树是一种特殊的二叉树，这种树的主要作用是进行查找操作的。</p>
<ul>
<li><p>如果左子树不为空，则左子树上的所有节点的值均小于根节点的值。</p>
</li>
<li><p>如果右子树不为空，则右子树上的所有节点的值均大于根节点的值。</p>
</li>
<li><p>左右子树也都是二叉查找树。</p>
</li>
</ul>
<h1 id="二叉树的遍历"><a href="#二叉树的遍历" class="headerlink" title="二叉树的遍历"></a>二叉树的遍历</h1><p>二叉树的遍历，从节点之间的位置关系角度来看，二叉树的遍历分为4种：</p>
<ul>
<li>前序遍历</li>
<li>中序遍历</li>
<li>后续遍历</li>
<li>层序遍历</li>
</ul>
<p>如果从宏观的角度来看，二叉树的遍历归结为两大类：</p>
<ul>
<li><p>深度优先遍历（前序遍历，中序遍历，后续遍历）</p>
</li>
<li><p>广度优先遍历（层序遍历）</p>
</li>
</ul>
<h2 id="前序遍历"><a href="#前序遍历" class="headerlink" title="前序遍历"></a>前序遍历</h2><p>二叉树的前序遍历，输出顺序为根节点、左子树、右子树。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">     <span class="number">3</span></span><br><span class="line">   /   \</span><br><span class="line">  <span class="number">2</span>     <span class="number">8</span></span><br><span class="line"> /  \     \</span><br><span class="line"><span class="number">9</span>   <span class="number">10</span>     <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>上述的二叉树中，前序遍历的输出循序为：<code>3、2、9、10、8、4</code>。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    Integer[] arr = <span class="keyword">new</span> <span class="title class_">Integer</span>[]&#123;<span class="number">3</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="number">10</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="number">8</span>, <span class="literal">null</span>, <span class="number">4</span>&#125;;</span><br><span class="line">    <span class="comment">// 构建二叉树</span></span><br><span class="line">    <span class="type">BinaryTree</span> <span class="variable">binaryTree</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BinaryTree</span>(arr);</span><br><span class="line">    <span class="comment">// 获取二叉树的根节点</span></span><br><span class="line">    BinaryTree.<span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> binaryTree.root();</span><br><span class="line">    System.out.println(<span class="string">&quot;前序遍历：&quot;</span>);</span><br><span class="line">    <span class="comment">// 前序遍历</span></span><br><span class="line">    preOrderTraveral(root);</span><br><span class="line">    System.out.println();</span><br><span class="line">    preOrderTraveralWithStack(root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 前序遍历</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> node 节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">preOrderTraveral</span><span class="params">(BinaryTree.TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.print(node.data() + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">    preOrderTraveral(node.leftChild());</span><br><span class="line">    preOrderTraveral(node.rightChile());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 前序遍历，非递归</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> root 二叉树根节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">preOrderTraveralWithStack</span><span class="params">(BinaryTree.TreeNode root)</span> &#123;</span><br><span class="line">    Stack&lt;BinaryTree.TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    BinaryTree.<span class="type">TreeNode</span> <span class="variable">treeNode</span> <span class="operator">=</span> root;</span><br><span class="line">    <span class="keyword">while</span> (treeNode != <span class="literal">null</span> || !stack.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">while</span> (treeNode != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.print(treeNode.data() + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            stack.push(treeNode);</span><br><span class="line">            treeNode = treeNode.leftChild();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            treeNode = stack.pop();</span><br><span class="line">            treeNode = treeNode.rightChile();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="中序遍历"><a href="#中序遍历" class="headerlink" title="中序遍历"></a>中序遍历</h2><p>二叉树的中序遍历，输出顺序为左子树、根节点、右子树。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">     <span class="number">3</span></span><br><span class="line">   /   \</span><br><span class="line">  <span class="number">2</span>     <span class="number">8</span></span><br><span class="line"> /  \     \</span><br><span class="line"><span class="number">9</span>   <span class="number">10</span>     <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>上述的二叉树中，中序遍历的输出循序为：<code>9、2、10、3、8、4</code>。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    Integer[] arr = <span class="keyword">new</span> <span class="title class_">Integer</span>[]&#123;<span class="number">3</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="number">10</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="number">8</span>, <span class="literal">null</span>, <span class="number">4</span>&#125;;</span><br><span class="line">    <span class="comment">// 构建二叉树</span></span><br><span class="line">    <span class="type">BinaryTree</span> <span class="variable">binaryTree</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BinaryTree</span>(arr);</span><br><span class="line">    <span class="comment">// 获取二叉树的根节点</span></span><br><span class="line">    BinaryTree.<span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> binaryTree.root();</span><br><span class="line">    System.out.println(<span class="string">&quot;中序遍历：&quot;</span>);</span><br><span class="line">    <span class="comment">// 中序遍历</span></span><br><span class="line">    inOrderTraveral(root);</span><br><span class="line">    System.out.println();</span><br><span class="line">    inOrderTraveralWithStack(root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 中序遍历</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> node 节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inOrderTraveral</span><span class="params">(BinaryTree.TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    inOrderTraveral(node.leftChild());</span><br><span class="line">    System.out.print(node.data() + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">    inOrderTraveral(node.rightChile());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 中序遍历，非递归</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> root 二叉树根节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inOrderTraveralWithStack</span><span class="params">(BinaryTree.TreeNode root)</span> &#123;</span><br><span class="line">    Stack&lt;BinaryTree.TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    BinaryTree.<span class="type">TreeNode</span> <span class="variable">treeNode</span> <span class="operator">=</span> root;</span><br><span class="line">    <span class="keyword">while</span> (treeNode != <span class="literal">null</span> || !stack.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">while</span> (treeNode != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.push(treeNode);</span><br><span class="line">            treeNode = treeNode.leftChild();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            treeNode = stack.pop();</span><br><span class="line">            System.out.print(treeNode.data() + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            treeNode = treeNode.rightChile();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="后序遍历"><a href="#后序遍历" class="headerlink" title="后序遍历"></a>后序遍历</h2><p>二叉树的后序遍历，输出顺序为左子树、右子树、根节点。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">     <span class="number">3</span></span><br><span class="line">   /   \</span><br><span class="line">  <span class="number">2</span>     <span class="number">8</span></span><br><span class="line"> /  \     \</span><br><span class="line"><span class="number">9</span>   <span class="number">10</span>     <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>上述的二叉树中，后序遍历的输出循序为：<code>9、10、2、4、8、3</code>。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    Integer[] arr = <span class="keyword">new</span> <span class="title class_">Integer</span>[]&#123;<span class="number">3</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="number">10</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="number">8</span>, <span class="literal">null</span>, <span class="number">4</span>&#125;;</span><br><span class="line">    <span class="comment">// 构建二叉树</span></span><br><span class="line">    <span class="type">BinaryTree</span> <span class="variable">binaryTree</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BinaryTree</span>(arr);</span><br><span class="line">    <span class="comment">// 获取二叉树的根节点</span></span><br><span class="line">    BinaryTree.<span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> binaryTree.root();</span><br><span class="line">    System.out.println(<span class="string">&quot;后序遍历：&quot;</span>);</span><br><span class="line">    <span class="comment">// 后序遍历</span></span><br><span class="line">    postOrderTraveral(root);</span><br><span class="line">    System.out.println();</span><br><span class="line">    postOrderTraveralWithStack(root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 后序遍历</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> node 节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postOrderTraveral</span><span class="params">(BinaryTree.TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    postOrderTraveral(node.leftChild());</span><br><span class="line">    postOrderTraveral(node.rightChile());</span><br><span class="line">    System.out.print(node.data() + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 后序遍历，非递归</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> root 二叉树根节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postOrderTraveralWithStack</span><span class="params">(BinaryTree.TreeNode root)</span> &#123;</span><br><span class="line">    Stack&lt;BinaryTree.TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    BinaryTree.<span class="type">TreeNode</span> <span class="variable">treeNode</span> <span class="operator">=</span> root;</span><br><span class="line">    <span class="keyword">while</span> (treeNode != <span class="literal">null</span> || !stack.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">while</span> (treeNode != <span class="literal">null</span>) &#123;</span><br><span class="line">            list.add(treeNode.data());</span><br><span class="line">            stack.push(treeNode);</span><br><span class="line">            treeNode = treeNode.rightChile();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            treeNode = stack.pop();</span><br><span class="line">            treeNode = treeNode.leftChild();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> list.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        System.out.print(list.get(i) + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="层序遍历"><a href="#层序遍历" class="headerlink" title="层序遍历"></a>层序遍历</h2><p>二叉树的层序遍历，输出顺序按照一层一层往下输出，所以也叫作广度优先遍历。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">     <span class="number">3</span></span><br><span class="line">   /   \</span><br><span class="line">  <span class="number">2</span>     <span class="number">8</span></span><br><span class="line"> /  \     \</span><br><span class="line"><span class="number">9</span>   <span class="number">10</span>     <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>上述的二叉树中，层序遍历的输出循序为：<code>3、2、8、9、10、4</code>。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    Integer[] arr = <span class="keyword">new</span> <span class="title class_">Integer</span>[]&#123;<span class="number">3</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="number">10</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="number">8</span>, <span class="literal">null</span>, <span class="number">4</span>&#125;;</span><br><span class="line">    <span class="comment">// 构建二叉树</span></span><br><span class="line">    <span class="type">BinaryTree</span> <span class="variable">binaryTree</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BinaryTree</span>(arr);</span><br><span class="line">    <span class="comment">// 获取二叉树的根节点</span></span><br><span class="line">    BinaryTree.<span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> binaryTree.root();</span><br><span class="line">    System.out.println(<span class="string">&quot;层序遍历：&quot;</span>);</span><br><span class="line">    <span class="comment">// 层序遍历</span></span><br><span class="line">    levelOrderTraveralWithQueue(root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 层序遍历</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> root 二叉树根节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">levelOrderTraveralWithQueue</span><span class="params">(BinaryTree.TreeNode root)</span> &#123;</span><br><span class="line">    Queue&lt;BinaryTree.TreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    queue.offer(root);</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        BinaryTree.<span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">        System.out.print(node.data() + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">        BinaryTree.<span class="type">TreeNode</span> <span class="variable">leftChild</span> <span class="operator">=</span> node.leftChild();</span><br><span class="line">        <span class="keyword">if</span> (leftChild != <span class="literal">null</span>) &#123;</span><br><span class="line">            queue.offer(leftChild);</span><br><span class="line">        &#125;</span><br><span class="line">        BinaryTree.<span class="type">TreeNode</span> <span class="variable">rightChile</span> <span class="operator">=</span> node.rightChile();</span><br><span class="line">        <span class="keyword">if</span> (rightChile != <span class="literal">null</span>) &#123;</span><br><span class="line">            queue.offer(rightChile);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><blockquote>
<p>本文<strong>Github</strong> <a href="https://github.com/herenpeng/code-learn">https://github.com/herenpeng/code-learn</a> 已收录，欢迎<strong>Star</strong>。</p>
</blockquote>
]]></content>
      <categories>
        <category>数据结构与算法</category>
      </categories>
      <tags>
        <tag>树</tag>
      </tags>
  </entry>
  <entry>
    <title>数据结构之什么是链表？</title>
    <url>/2021/02/24/algorithm/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%8B%E4%BB%80%E4%B9%88%E6%98%AF%E9%93%BE%E8%A1%A8/</url>
    <content><![CDATA[<h1 id="什么是链表？"><a href="#什么是链表？" class="headerlink" title="什么是链表？"></a>什么是链表？</h1><p>链表（linked list）是一种在物理上非连续、非顺序的数据结构，由若干个节点（node）所组成。</p>
<span id="more"></span>

<p>链表分为单向链表和双向链表。</p>
<ul>
<li><p>单向链表的每一个节点包含两部分，一部分是存放数据的变量data，另一部分是指向下一个节点的指针next。</p>
</li>
<li><p>双向链表比单向链表复杂一些，它的每一个节点除了拥有data和next指针，还拥有指向前置节点的prev指针。</p>
</li>
</ul>
<p>如果说数组在内存中的存储方式为顺序存储，那么链表在内存在的存储方式则是随机存储。</p>
<p><strong>什么是随机存储？</strong></p>
<p>数组在内存中占用了连续完整的存储空间。而链表则采用见缝插针的方式，链表的每一个节点分布在内存空间中的不同位置，依靠指针关联起来，这样可以灵活有效地利用零散的碎片空间。</p>
<h1 id="链表的组成"><a href="#链表的组成" class="headerlink" title="链表的组成"></a>链表的组成</h1><blockquote>
<p>本篇文章中的链表均以单链表的Demo，在文章的末尾处会附带双向链表的实现代码。</p>
</blockquote>
<ul>
<li><p>节点：一个链表是有若干个结点组成的，节点是链表的基础结构。</p>
</li>
<li><p>头节点指针：链表需要一个头节点指针，用于表示链表开始的位置。</p>
</li>
<li><p>尾结点指针：链表可以设置一个尾部节点指针。</p>
<blockquote>
<p>当然，链表的尾部节点指针不是必须的，因为链表最后一个节点的next指针指向空，也可以标识链表的结尾。</p>
</blockquote>
</li>
<li><p>链表实际长度：可以设置一个变量记录链表的实际长度。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedList</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 链表的头指针</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Node head;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 链表的尾部指针</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Node last;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 链表的实际长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取链表的头指针</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 链表的头指针</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">head</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取链表的尾部指针</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 链表的尾部指针</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">last</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.last;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取链表的实际长度</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 链表的实际长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将节点点作为链表的一个内部类</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="comment">// 节点存储的数据data</span></span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> data;</span><br><span class="line">        <span class="comment">// 该指针指向下一个节点的指针next</span></span><br><span class="line">        <span class="keyword">private</span> Node next;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 构造函数</span></span><br><span class="line">        Node(<span class="type">int</span> data) &#123;</span><br><span class="line">            <span class="built_in">this</span>.data = data;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 返回节点中存储的数据值</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> 节点中存储的数据值</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">data</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.data;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 返回下一个节点的指针</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> 下一个节点的指针</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> Node <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="链表的基本操作"><a href="#链表的基本操作" class="headerlink" title="链表的基本操作"></a>链表的基本操作</h1><p>和数组一样，链表的基本操作也同样是增、删、改、查四种操作。</p>
<h2 id="查"><a href="#查" class="headerlink" title="查"></a>查</h2><p>链表查找元素不像数组那样可以通过下标进行随机访问，链表想要查找一个元素，只能从头节点开始，一个一个向后查找。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 链表的查找操作</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index 需要查找的链表索引</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 索引对应的链表节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> Node <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;超出链表的实际节点范围&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 找到链表的头节点的位置</span></span><br><span class="line">    <span class="type">Node</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="built_in">this</span>.head;</span><br><span class="line">    <span class="comment">// 从头节点向后查找，共向后循环index次，即可找到index位置的节点</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++) &#123;</span><br><span class="line">        temp = temp.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="改"><a href="#改" class="headerlink" title="改"></a>改</h2><p>链表的更新操作也比较简单，只需要查找到需要修改的节点，直接将原节点的数据替换即可。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 更新链表节点</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index 需要更新的链表位置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> data  需要更新的节点的值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> data)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;超出链表的实际节点范围&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 找到链表的头节点的位置</span></span><br><span class="line">    <span class="type">Node</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="built_in">this</span>.head;</span><br><span class="line">    <span class="comment">// 从头节点向后查找，共向后循环index次，即可找到index位置的节点</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++) &#123;</span><br><span class="line">        temp = temp.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 使用需要替换的值，替换原值</span></span><br><span class="line">    temp.data = data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="增"><a href="#增" class="headerlink" title="增"></a>增</h2><p>链表的插入操作分为三组：</p>
<ul>
<li><p>尾部插入</p>
<blockquote>
<p>链表的尾部操作最为简单，只需要将链表的尾部节点的next指针，指向新结点即可。<br>  如果有尾部节点指针，则还需要维护链表尾部节点指针，将其指向新节点。</p>
</blockquote>
</li>
<li><p>中间插入</p>
<blockquote>
<p>链表的中间插入，分为三步：<br>  第一步：找到要插入的链表位置。<br>  第二步：将新结点的next指针指向插入位置的节点。<br>  第三步：将原插入位置的节点的上一个节点的next指针指向新节点。  </p>
</blockquote>
</li>
<li><p>头部插入</p>
<blockquote>
<p>链表的头部插入，分为三步：<br>  第一步：将新节点的next指针指向新节点。<br>  第二步：维护链表的头部节点指针，将其指向新节点。</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>链表的插入操作与数组的插入操作有些许不同，就在于链表不会出现容量不足的情况，无需进行扩容操作。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 直接在尾部插入</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> data 需要插入的数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> data)</span> &#123;</span><br><span class="line">    insert(size, data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 直接在尾部插入</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index 需要插入的链表位置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> data  需要插入的数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> data)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt; size) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;超出链表的实际节点范围&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 将需要插入的数据封装为一个链表节点</span></span><br><span class="line">    <span class="type">Node</span> <span class="variable">insertNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(data);</span><br><span class="line">    <span class="comment">// 链表节点为空的情况</span></span><br><span class="line">    <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 维护链表头部节点指针</span></span><br><span class="line">        <span class="built_in">this</span>.head = insertNode;</span><br><span class="line">        <span class="comment">// 维护链表尾部节点指针</span></span><br><span class="line">        <span class="built_in">this</span>.last = insertNode;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 头部插入</span></span><br><span class="line">        <span class="comment">// 使用新节点的next指针指向头部节点</span></span><br><span class="line">        insertNode.next = <span class="built_in">this</span>.head;</span><br><span class="line">        <span class="comment">// 维护链表头部节点的指针</span></span><br><span class="line">        <span class="built_in">this</span>.head = insertNode;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index == size) &#123;</span><br><span class="line">        <span class="comment">// 尾部插入</span></span><br><span class="line">        <span class="comment">// 直接使用尾部节点指针指向新结点</span></span><br><span class="line">        <span class="built_in">this</span>.last.next = insertNode;</span><br><span class="line">        <span class="comment">// 维护链表尾部节点的指针</span></span><br><span class="line">        <span class="built_in">this</span>.last = insertNode;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 获取插入位置的前一个节点</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">prevNode</span> <span class="operator">=</span> get(index - <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// 将新节点的next指针指向插入位置节点</span></span><br><span class="line">        insertNode.next = prevNode.next;</span><br><span class="line">        <span class="comment">// 插入位置的前一个节点的next指针指向新节点</span></span><br><span class="line">        prevNode.next = insertNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 维护链表长度</span></span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="删"><a href="#删" class="headerlink" title="删"></a>删</h2><p>链表的删除操作和插入操作类似。</p>
<ul>
<li><p>删除头部节点</p>
<blockquote>
<p>删除头部节点，只需要将链表的head指针指向原head节点的下一个节点即可。</p>
</blockquote>
</li>
<li><p>删除中间节点</p>
<blockquote>
<p>删除中间节点，删除位置的前一个节点的next指针指向删除位置的下一个节点即可。</p>
</blockquote>
</li>
<li><p>删除尾部节点</p>
<blockquote>
<p>删除尾部节点，将尾部节点的前一个节点的next指针置空，并维护last指针即可。</p>
</blockquote>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除链表的结点</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index 需要删除的位置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 被删除的节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> Node <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;超出链表的实际节点范围&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">removeNode</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">// 头部删除</span></span><br><span class="line">    <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">        removeNode = <span class="built_in">this</span>.head;</span><br><span class="line">        <span class="comment">// 维护链表的头部指针</span></span><br><span class="line">        <span class="built_in">this</span>.head = removeNode.next;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index == size - <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// 尾部删除</span></span><br><span class="line">        <span class="comment">// 获取尾部的前一个节点</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">prevNode</span> <span class="operator">=</span> get(index - <span class="number">1</span>);</span><br><span class="line">        removeNode = prevNode.next;</span><br><span class="line">        <span class="comment">// 置空尾部的前一个节点的next指针</span></span><br><span class="line">        prevNode.next = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// 维护链表的尾部指针</span></span><br><span class="line">        <span class="built_in">this</span>.last = prevNode;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 获取插入位置的前一个节点</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">prevNode</span> <span class="operator">=</span> get(index - <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// 需要删除的节点</span></span><br><span class="line">        removeNode = prevNode.next;</span><br><span class="line">        <span class="comment">// 将删除位置的上一个节点的next指针指向删除位置的下一个节点</span></span><br><span class="line">        prevNode.next = removeNode.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 维护链表长度</span></span><br><span class="line">    size--;</span><br><span class="line">    <span class="keyword">return</span> removeNode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="链表操作的时间复杂度"><a href="#链表操作的时间复杂度" class="headerlink" title="链表操作的时间复杂度"></a>链表操作的时间复杂度</h1><table>
<thead>
<tr>
<th>链表操作</th>
<th>时间复杂度</th>
</tr>
</thead>
<tbody><tr>
<td>查找节点</td>
<td>O(n)</td>
</tr>
<tr>
<td>更新节点</td>
<td>O(1)</td>
</tr>
<tr>
<td>插入节点</td>
<td>O(1)</td>
</tr>
<tr>
<td>删除节点</td>
<td>O(1)</td>
</tr>
</tbody></table>
<h1 id="链表的优势和劣势"><a href="#链表的优势和劣势" class="headerlink" title="链表的优势和劣势"></a>链表的优势和劣势</h1><p>优势：链表能够灵活地插入，删除节点，所以更适用于插入，更新，删除操作更多场景。</p>
<p>劣势：链表的查找操作，需要从头遍历整个链表，性能低下，不适用与读操作多的场景。</p>
<h1 id="单链表的完整代码（Java）"><a href="#单链表的完整代码（Java）" class="headerlink" title="单链表的完整代码（Java）"></a>单链表的完整代码（Java）</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedList</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 链表的头指针</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Node head;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 链表的尾部指针</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Node last;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 链表的实际长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取链表的头指针</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 链表的头指针</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">head</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取链表的尾部指针</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 链表的尾部指针</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">last</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.last;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取链表的实际长度</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 链表的实际长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 链表的查找操作</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index 需要查找的链表索引</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 索引对应的链表节点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;超出链表的实际节点范围&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 找到链表的头节点的位置</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="built_in">this</span>.head;</span><br><span class="line">        <span class="comment">// 从头节点向后查找，共向后循环index次，即可找到index位置的节点</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++) &#123;</span><br><span class="line">            temp = temp.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新链表节点</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index 需要更新的链表位置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data  需要更新的节点的值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> data)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;超出链表的实际节点范围&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 找到链表的头节点的位置</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="built_in">this</span>.head;</span><br><span class="line">        <span class="comment">// 从头节点向后查找，共向后循环index次，即可找到index位置的节点</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++) &#123;</span><br><span class="line">            temp = temp.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 使用需要替换的值，替换原值</span></span><br><span class="line">        temp.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 直接在尾部插入</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data 需要插入的数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> data)</span> &#123;</span><br><span class="line">        insert(size, data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 直接在尾部插入</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index 需要插入的链表位置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data  需要插入的数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> data)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt; size) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;超出链表的实际节点范围&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 将需要插入的数据封装为一个链表节点</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">insertNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(data);</span><br><span class="line">        <span class="comment">// 链表节点为空的情况</span></span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// 维护链表头部节点指针</span></span><br><span class="line">            <span class="built_in">this</span>.head = insertNode;</span><br><span class="line">            <span class="comment">// 维护链表尾部节点指针</span></span><br><span class="line">            <span class="built_in">this</span>.last = insertNode;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// 头部插入</span></span><br><span class="line">            <span class="comment">// 使用新节点的next指针指向头部节点</span></span><br><span class="line">            insertNode.next = <span class="built_in">this</span>.head;</span><br><span class="line">            <span class="comment">// 维护链表头部节点的指针</span></span><br><span class="line">            <span class="built_in">this</span>.head = insertNode;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index == size) &#123;</span><br><span class="line">            <span class="comment">// 尾部插入</span></span><br><span class="line">            <span class="comment">// 直接使用尾部节点指针指向新结点</span></span><br><span class="line">            <span class="built_in">this</span>.last.next = insertNode;</span><br><span class="line">            <span class="comment">// 维护链表尾部节点的指针</span></span><br><span class="line">            <span class="built_in">this</span>.last = insertNode;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 获取插入位置的前一个节点</span></span><br><span class="line">            <span class="type">Node</span> <span class="variable">prevNode</span> <span class="operator">=</span> get(index - <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// 将新节点的next指针指向插入位置节点</span></span><br><span class="line">            insertNode.next = prevNode.next;</span><br><span class="line">            <span class="comment">// 插入位置的前一个节点的next指针指向新节点</span></span><br><span class="line">            prevNode.next = insertNode;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 维护链表长度</span></span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除链表的结点</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index 需要删除的位置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 被删除的节点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;超出链表的实际节点范围&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">removeNode</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// 头部删除</span></span><br><span class="line">        <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">            removeNode = <span class="built_in">this</span>.head;</span><br><span class="line">            <span class="comment">// 维护链表的头部指针</span></span><br><span class="line">            <span class="built_in">this</span>.head = removeNode.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index == size - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// 尾部删除</span></span><br><span class="line">            <span class="comment">// 获取尾部的前一个节点</span></span><br><span class="line">            <span class="type">Node</span> <span class="variable">prevNode</span> <span class="operator">=</span> get(index - <span class="number">1</span>);</span><br><span class="line">            removeNode = prevNode.next;</span><br><span class="line">            <span class="comment">// 置空尾部的前一个节点的next指针</span></span><br><span class="line">            prevNode.next = <span class="literal">null</span>;</span><br><span class="line">            <span class="comment">// 维护链表的尾部指针</span></span><br><span class="line">            <span class="built_in">this</span>.last = prevNode;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 获取插入位置的前一个节点</span></span><br><span class="line">            <span class="type">Node</span> <span class="variable">prevNode</span> <span class="operator">=</span> get(index - <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// 需要删除的节点</span></span><br><span class="line">            removeNode = prevNode.next;</span><br><span class="line">            <span class="comment">// 将删除位置的上一个节点的next指针指向删除位置的下一个节点</span></span><br><span class="line">            prevNode.next = removeNode.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 维护链表长度</span></span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> removeNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将节点点作为链表的一个内部类</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="comment">// 节点存储的数据data</span></span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> data;</span><br><span class="line">        <span class="comment">// 该指针指向下一个节点的指针next</span></span><br><span class="line">        <span class="keyword">private</span> Node next;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 构造函数</span></span><br><span class="line">        Node(<span class="type">int</span> data) &#123;</span><br><span class="line">            <span class="built_in">this</span>.data = data;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 返回节点中存储的数据值</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> 节点中存储的数据值</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">data</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.data;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 返回下一个节点的指针</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> 下一个节点的指针</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> Node <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="双向链表的完整代码（Java）"><a href="#双向链表的完整代码（Java）" class="headerlink" title="双向链表的完整代码（Java）"></a>双向链表的完整代码（Java）</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DoubleLinkedList</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 链表的头指针</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Node head;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 链表的尾部指针</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Node last;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 链表的实际长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取链表的头指针</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 链表的头指针</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">head</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取链表的尾部指针</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 链表的尾部指针</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">last</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.last;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取链表的实际长度</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 链表的实际长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 链表的查找操作</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index 需要查找的链表索引</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 索引对应的链表节点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;超出链表的实际节点范围&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 找到链表的头节点的位置</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="built_in">this</span>.head;</span><br><span class="line">        <span class="comment">// 从头节点向后查找，共向后循环index次，即可找到index位置的节点</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++) &#123;</span><br><span class="line">            temp = temp.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新链表节点</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index 需要更新的链表位置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data  需要更新的节点的值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> data)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;超出链表的实际节点范围&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 找到链表的头节点的位置</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="built_in">this</span>.head;</span><br><span class="line">        <span class="comment">// 从头节点向后查找，共向后循环index次，即可找到index位置的节点</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++) &#123;</span><br><span class="line">            temp = temp.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 使用需要替换的值，替换原值</span></span><br><span class="line">        temp.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 直接在尾部插入</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data 需要插入的数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> data)</span> &#123;</span><br><span class="line">        insert(size, data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 直接在尾部插入</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index 需要插入的链表位置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data  需要插入的数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> data)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt; size) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;超出链表的实际节点范围&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 将需要插入的数据封装为一个链表节点</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">insertNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(data);</span><br><span class="line">        <span class="comment">// 链表节点为空的情况</span></span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// 维护链表头部节点指针</span></span><br><span class="line">            <span class="built_in">this</span>.head = insertNode;</span><br><span class="line">            <span class="comment">// 维护链表尾部节点指针</span></span><br><span class="line">            <span class="built_in">this</span>.last = insertNode;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// 头部插入</span></span><br><span class="line">            <span class="type">Node</span> <span class="variable">headNode</span> <span class="operator">=</span> <span class="built_in">this</span>.head;</span><br><span class="line">            <span class="comment">// 将原头节点的上一个节点指针指向新节点</span></span><br><span class="line">            headNode.prev = insertNode;</span><br><span class="line">            <span class="comment">// 使用新节点的next指针指向头部节点</span></span><br><span class="line">            insertNode.next = headNode;</span><br><span class="line">            <span class="comment">// 维护链表头部节点的指针</span></span><br><span class="line">            <span class="built_in">this</span>.head = insertNode;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index == size) &#123;</span><br><span class="line">            <span class="comment">// 尾部插入</span></span><br><span class="line">            <span class="comment">// 直接使用尾部节点指针指向新结点</span></span><br><span class="line">            <span class="built_in">this</span>.last.next = insertNode;</span><br><span class="line">            <span class="comment">// 新节点的上一个节点指向原尾部节点</span></span><br><span class="line">            insertNode.prev = <span class="built_in">this</span>.last;</span><br><span class="line">            <span class="comment">// 维护链表尾部节点的指针</span></span><br><span class="line">            <span class="built_in">this</span>.last = insertNode;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 获取插入位置的前一个节点</span></span><br><span class="line">            <span class="type">Node</span> <span class="variable">prevNode</span> <span class="operator">=</span> get(index - <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// 插入位置的节点</span></span><br><span class="line">            <span class="type">Node</span> <span class="variable">nextNode</span> <span class="operator">=</span> prevNode.next;</span><br><span class="line">            nextNode.prev = insertNode;</span><br><span class="line">            <span class="comment">// 将新节点的next指针指向插入位置节点,prev指针指向前一个节点</span></span><br><span class="line">            insertNode.next = nextNode;</span><br><span class="line">            insertNode.prev = prevNode;</span><br><span class="line">            <span class="comment">// 插入位置的前一个节点的next指针指向新节点</span></span><br><span class="line">            prevNode.next = insertNode;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 维护链表长度</span></span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除链表的结点</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index 需要删除的位置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 被删除的节点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;超出链表的实际节点范围&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">removeNode</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// 头部删除</span></span><br><span class="line">        <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">            removeNode = <span class="built_in">this</span>.head;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">nextHead</span> <span class="operator">=</span> removeNode.next;</span><br><span class="line">            <span class="comment">// 置空新的头部节点的pre指针</span></span><br><span class="line">            nextHead.prev = <span class="literal">null</span>;</span><br><span class="line">            <span class="comment">// 维护链表的头部指针</span></span><br><span class="line">            <span class="built_in">this</span>.head = nextHead;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index == size - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// 尾部删除</span></span><br><span class="line">            <span class="comment">// 获取尾部的前一个节点</span></span><br><span class="line">            <span class="type">Node</span> <span class="variable">prevNode</span> <span class="operator">=</span> get(index - <span class="number">1</span>);</span><br><span class="line">            removeNode = prevNode.next;</span><br><span class="line">            <span class="comment">// 置空尾部的前一个节点的next指针</span></span><br><span class="line">            prevNode.next = <span class="literal">null</span>;</span><br><span class="line">            <span class="comment">// 维护链表的尾部指针</span></span><br><span class="line">            <span class="built_in">this</span>.last = prevNode;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 获取插入位置的前一个节点</span></span><br><span class="line">            <span class="type">Node</span> <span class="variable">prevNode</span> <span class="operator">=</span> get(index - <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// 需要删除的节点</span></span><br><span class="line">            removeNode = prevNode.next;</span><br><span class="line">            <span class="comment">// 删除节点的下一个节点</span></span><br><span class="line">            <span class="type">Node</span> <span class="variable">nextNode</span> <span class="operator">=</span> removeNode.next;</span><br><span class="line">            <span class="comment">// 将删除位置的上一个节点的next指针指向删除位置的下一个节点</span></span><br><span class="line">            prevNode.next = nextNode;</span><br><span class="line">            nextNode.prev = prevNode;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 维护链表长度</span></span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> removeNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将节点点作为链表的一个内部类</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="comment">// 节点存储的数据data</span></span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> data;</span><br><span class="line">        <span class="comment">// 该指针指向上一个</span></span><br><span class="line">        <span class="keyword">private</span> Node prev;</span><br><span class="line">        <span class="comment">// 该指针指向下一个节点的指针next</span></span><br><span class="line">        <span class="keyword">private</span> Node next;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 构造函数</span></span><br><span class="line">        Node(<span class="type">int</span> data) &#123;</span><br><span class="line">            <span class="built_in">this</span>.data = data;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 返回节点中存储的数据值</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> 节点中存储的数据值</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">data</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.data;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 返回上一个节点的指针</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> 上一个节点的指针</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> Node <span class="title function_">prev</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.prev;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 返回下一个节点的指针</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> 下一个节点的指针</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> Node <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><blockquote>
<p>本文<strong>Github</strong> <a href="https://github.com/herenpeng/code-learn">https://github.com/herenpeng/code-learn</a> 已收录，欢迎<strong>Star</strong>。</p>
</blockquote>
]]></content>
      <categories>
        <category>数据结构与算法</category>
      </categories>
      <tags>
        <tag>链表</tag>
      </tags>
  </entry>
  <entry>
    <title>面试算法之如何判断链表有环</title>
    <url>/2021/04/21/algorithm/%E9%9D%A2%E8%AF%95%E7%AE%97%E6%B3%95%E4%B9%8B%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E9%93%BE%E8%A1%A8%E6%9C%89%E7%8E%AF/</url>
    <content><![CDATA[<h1 id="如何判断链表有环"><a href="#如何判断链表有环" class="headerlink" title="如何判断链表有环"></a>如何判断链表有环</h1><p>给一个单向链表，使用程序来判断链表中是否存在环结构。</p>
<span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="type">int</span> data;</span><br><span class="line">    Node next;</span><br><span class="line"></span><br><span class="line">    Node(<span class="type">int</span> data) &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">node1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="number">5</span>);</span><br><span class="line">    <span class="type">Node</span> <span class="variable">node2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="type">Node</span> <span class="variable">node3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="number">7</span>);</span><br><span class="line">    <span class="type">Node</span> <span class="variable">node4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="number">2</span>);</span><br><span class="line">    <span class="type">Node</span> <span class="variable">node5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">    node1.next = node2;</span><br><span class="line">    node2.next = node3;</span><br><span class="line">    node3.next = node4;</span><br><span class="line">    node4.next = node5;</span><br><span class="line">    node5.next = node2;</span><br><span class="line">    <span class="comment">// 解法一</span></span><br><span class="line">    System.out.println(isCycle1(node1));</span><br><span class="line">    <span class="comment">// 解法二</span></span><br><span class="line">    System.out.println(isCycle2(node1));</span><br><span class="line">    <span class="comment">// 解法三</span></span><br><span class="line">    System.out.println(isCycle3(node1));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="解法一"><a href="#解法一" class="headerlink" title="解法一"></a>解法一</h2><p>解法一：依次遍历链表的节点，每遍历一个节点，就从头部开始检查到当前节点之前的所有节点，用当前节点和此节点之前的所有节点进行比较，如果存在相等的节点，则说明链表结构存在环，否则继续遍历节点，直到链表结束。</p>
<p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isCycle1</span><span class="params">(Node head)</span> &#123;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">currentNode</span> <span class="operator">=</span> head.next;</span><br><span class="line">    <span class="type">int</span> <span class="variable">currentIndex</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (currentNode != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="literal">null</span> &amp;&amp; i &lt; currentIndex) &#123;</span><br><span class="line">            <span class="keyword">if</span> (node == currentNode) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            node = node.next;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        currentNode = currentNode.next;</span><br><span class="line">        currentIndex++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="解法二"><a href="#解法二" class="headerlink" title="解法二"></a>解法二</h2><p>解法二：使用一个 HashSet 结构，从头开始遍历链表，每次遍历连接，使用当前节点去 HashSet 中获取节点元素，如果 HashSet 中不存在当前节点，则将当前节点存入 HashSet 容器中，如果 HashSet 中存在当前节点，说明链表存在环。</p>
<blockquote>
<p>这其实是一种类似 Redis 中的布隆过滤器的结构。</p>
</blockquote>
<p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isCycle2</span><span class="params">(Node head)</span> &#123;</span><br><span class="line">    Set&lt;Node&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span> (head != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (set.remove(head)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        set.add(head);</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="解法三"><a href="#解法三" class="headerlink" title="解法三"></a>解法三</h2><p>解法三：使用两个指针，让它们从头部开始遍历，其中一个指针每次遍历向后移动一个节点，另一个指针每次遍历向后移动两个节点，然后比较两个指针指向的节点是否相同。如果相同，则可以判断出链表有换，如果不同，则继续下一次循环。</p>
<p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isCycle3</span><span class="params">(Node head)</span> &#123;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">p1</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">p2</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="keyword">while</span> (p2 != <span class="literal">null</span> &amp;&amp; p2.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        p1 = p1.next;</span><br><span class="line">        p2 = p2.next.next;</span><br><span class="line">        <span class="keyword">if</span> (p1 == p2) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="解法评估"><a href="#解法评估" class="headerlink" title="解法评估"></a>解法评估</h2><table>
<thead>
<tr>
<th>-</th>
<th>解法一</th>
<th>解法二</th>
<th>解法三</th>
</tr>
</thead>
<tbody><tr>
<td>时间复杂度</td>
<td>O(n^2)</td>
<td>O(n)</td>
<td>O(n)</td>
</tr>
<tr>
<td>空间复杂度</td>
<td>O(1)</td>
<td>O(n)</td>
<td>O(1)</td>
</tr>
</tbody></table>
<h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><blockquote>
<p>本文<strong>Github</strong> <a href="https://github.com/herenpeng/code-learn">https://github.com/herenpeng/code-learn</a> 已收录，欢迎<strong>Star</strong>。</p>
</blockquote>
]]></content>
      <categories>
        <category>数据结构与算法</category>
      </categories>
      <tags>
        <tag>链表</tag>
        <tag>面试</tag>
      </tags>
  </entry>
  <entry>
    <title>Golang中的GoPath和GoModule</title>
    <url>/2020/04/13/golang/Golang%E4%B8%AD%E7%9A%84GoPath%E5%92%8CGoModule/</url>
    <content><![CDATA[<blockquote>
<p>在Golang中，有两个概念非常容易弄错，第一个就是GoPath，第二个则是GoModule，很多初学者不清楚这两者之间的关系，也就难以清晰地了解项目的整体结构，自然也就难以编写结构清晰的代码。</p>
</blockquote>
<span id="more"></span>
<h1 id="什么是GoPath？"><a href="#什么是GoPath？" class="headerlink" title="什么是GoPath？"></a>什么是GoPath？</h1><p>什么是Gopath？在我的上一篇博客<a href="/2020/04/08/golang/Golang环境安装&IDEA开发Golang/">Golang环境安装&amp;IDEA开发Golang</a>中，曾经提到过GoPath的概念。<br>GoPath是Golang的工作空间，所有的Go文件，都需要放在GoPath下的src目录下才能够编译运行，所以我提议不要直接配置全局的GoPath目录，否则会非常难以管理所有的Golang项目。</p>
<p>但是在另一篇博客<a href="/2020/04/12/golang/Golang连接MySQL数据库之CRUD/">Golang连接MySQL数据库之CRUD</a>中，我也提到过，我们在项目中使用第三方类库的时候，可以使用<code>go get</code>命令从网下直接拉去第三方类库的包，而拉取下来的包就会直接下载到我们的GoPath目录下的src包下。</p>
<p>这样就导致了一个问题，我们自己的Golang代码，和第三方的Golang文件混在了一起，这对于我们管理Golang项目的包显然是非常麻烦的，而且每个如果项目都需要同样的依赖，那么我们就会在不同的GoPath的src中下载大量重复的第三方依赖包，这同样会占用大量的磁盘空间。</p>
<p><strong>我们给不同的项目设置不同的GoPath，优点非常明显：</strong></p>
<p>便于管理项目，每个项目都是不同的GoPath，这对于我们管理多个Golang项目而言，能够非常清晰的处理项目结构。如果我们把所有项目都放在同一个GoPath的src包下，那么项目的结构就会变得非常混乱，难以管理。</p>
<p><strong>但是当我们需要依赖第三方的包的时候，不同的项目设置不同的GoPath的缺点也非常明显：</strong></p>
<ol>
<li>第三方依赖的包和我们自己的Golang包混在一起，会给我们的项目文件管理带来一定的麻烦。</li>
<li>不同的GoPath都需要下载依赖，那么磁盘中重复的依赖就会非常多，会占用我们大量的磁盘空间。</li>
</ol>
<p>所以，究竟是设置一个GoPath目录，解决依赖重复的问题，还是设置不同的GoPath目录，解决Golang项目结构混乱的问题，这是一个有争议性的问题。</p>
<p><strong>为了解决这所有的问题，Golang最终引入了GoModule的概念。</strong></p>
<h1 id="什么是GoModule？"><a href="#什么是GoModule？" class="headerlink" title="什么是GoModule？"></a>什么是GoModule？</h1><p>GoModule是Golang在1.11版本初步引入的概念，在1.12版本中正是开始使用，所以如果需要使用GoModule，那么需要保证你的Golang的版本在1.12或以上。<br>另外需要说一下，Golang1.11和1.12版本虽然已经引入了GoModule的概念，但是GoModule是默认不开启的，如果需要开启，那么需要配置一个环境变量：<code>GO111MODULE=on</code>，默认是<code>off</code>。</p>
<p>而在Golang1.13及以上的版本中，GoModule的默认配置为auto，即GoModule会通过你的目录下是否有go.mod文件来判断是否开启GoModule。所以Golang1.13+的版本中我们就不需要配置GO111MODULE属性了。<br>所以如果你使用GoModule，那么就直接使用Golang1.13+的版本好了！</p>
<p><strong>那么究竟什么是GoModule？</strong></p>
<ul>
<li>其实说得直白一下，GoModule就是一个用来取代GoPath的Golang的工作空间。</li>
</ul>
<p>我们之前说过，所有的Golang的文件，都需要放在GoPath目录下才能进行正确的编译和运行，而有了GoModule之后，那么我们就可以把文件放在GoModule目录下，而放在GoModule目录下的Golang文件，也可以正确地编译运行。</p>
<p>那么我们有了GoModule之后，GoPath是不是就可以被舍弃了？</p>
<p>不是的！</p>
<p>我们之前说过，GoPath所引出的问题，就是因为第三方类库的包所导致的，所以我们在有了GoModule之后，GoPath和GoModule就分别负责不同的职责，共同为我们的Golang项目服务。</p>
<p><strong>GoPath我们用来存放我们从网上拉取的第三方依赖包。</strong><br><strong>GoModule我们用来存放我们自己的Golang项目文件</strong>，当我们自己的项目需要依赖第三方的包的时候，我们通过GoModule目录下的一个go.mod文件来引用GoPath目录src包下的第三方依赖即可。</p>
<p>这样依赖，既解决了原来只能局限在GoPath目录src包下进行编程的问题，也解决了第三方依赖包难以管理和重复依赖占用磁盘空间的问题。</p>
<blockquote>
<p>总而言之，在引入GoModule之后，我们不会直接在GoPath目录进行编程，而是把GoPath作为一个第三方依赖包的仓库，我们真正的工作空间在GoModule目录下。</p>
</blockquote>
<h1 id="GoModule的设置"><a href="#GoModule的设置" class="headerlink" title="GoModule的设置"></a>GoModule的设置</h1><p>既然搞清楚了GoPath和GoModule之间的区别，那么GoModule又该怎么配置呢？一个目录怎么才能算是一个GoModule目录了。</p>
<p>很简单，我们直接使用<code>go mod init 模块名称</code>命令对目录进行初始化操作，即可将这个目录设置为GoModule目录。<br>我们在<code>F:\GoModule</code>目录下创建一个文件夹，名字为：<code>go_module</code>。<br>然后通过cmd命令提示符进入该目录，执行<code>go mod init 模块名称</code>初始化命令。<br><img src="/images/2020/04/20200413173543729.png" alt="在这里插入图片描述"><br>当初始化命令执行完毕之后，会在go_module目录下生成一个go.mod文件，该文件就是用来引入GoPath目录下的第三方依赖的文件。</p>
<p><strong>初始化之后的go.mod文件</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">module go_module</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.14</span></span><br></pre></td></tr></table></figure>

<p>当我们需要引入GoPath目录下的第三方依赖包的时候，只需要在go.mod目录下添加依赖名称，GoModule就会自动帮我们把第三方依赖包下载到GoPath目录下。</p>
<p>例如下面的go.mod文件：</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">module go_module_demo</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.14</span></span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">	github.com/astaxie/beego v1<span class="number">.12</span><span class="number">.1</span></span><br><span class="line">	github.com/<span class="keyword">go</span>-sql-driver/mysql v1<span class="number">.5</span><span class="number">.0</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>我们在这个go.mod文件中引入了两个依赖，分别是：<code>beego框架 v1.12.1版本</code>和<code>mysql驱动  v1.5.0版本</code>。</p>
<ul>
<li>而如果我们使用IDE进行开发的话，那么可以直接创建一个GoModule项目，这样的话IDE会自动帮我们生成所需要的文件，而且在使用依赖的包的时候，IDE还会自动帮我们加入依赖和下载依赖，这会省去我们大量的时间，而且可以不用再去记忆依赖的具体包名和版本号。</li>
</ul>
<h1 id="GoModule无法下载国外的依赖包问题"><a href="#GoModule无法下载国外的依赖包问题" class="headerlink" title="GoModule无法下载国外的依赖包问题"></a>GoModule无法下载国外的依赖包问题</h1><p>这是一个很多开发者都碰到过的问题，对于国外的依赖包无法直接通过网络进行下载，这显然会让开发者非常难受，所以Golang也引入了另一个属性：GOPROXY，我们只需要在环境变量中配置GOPROXY=<code>https://goproxy.io</code>即可解决GoModule无法下载国外的依赖包问题。<br>当然，也可以通过IDE来配置，这样省的在电脑系统的环境变量配置太多难以管理。</p>
<p><strong>在IDEA中配置GOPROXY属性：</strong></p>
<p><img src="/images/2020/04/2020041318024526.png" alt="在这里插入图片描述"></p>
]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Golang</tag>
      </tags>
  </entry>
  <entry>
    <title>Golang环境安装&amp;IDEA开发Golang</title>
    <url>/2020/04/08/golang/Golang%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85&amp;IDEA%E5%BC%80%E5%8F%91Golang/</url>
    <content><![CDATA[<blockquote>
<p>在这篇博客中，我们学习Windows系统安装Golang的环境，并使用IDEA安装Go插件来开发Golang。</p>
</blockquote>
<span id="more"></span>

<h1 id="Golang简介"><a href="#Golang简介" class="headerlink" title="Golang简介"></a>Golang简介</h1><p>Golang，即Go语言，是Google的Robert Griesemer，Rob Pike及Ken Thompson开发的一种静态强类型、编译型语言。Go语言语法与C相近，但功能上有：内存安全，GC（垃圾回收），结构形态及CSP-style并发计算。</p>
<h1 id="Golang环境安装"><a href="#Golang环境安装" class="headerlink" title="Golang环境安装"></a>Golang环境安装</h1><p>Golang下载官网：<a href="https://studygolang.com/dl">https://studygolang.com/dl</a></p>
<p>我们首选访问官网，下载对应操作系统的Golang安装包，在这里，我们选择的是Windows版的安装包。<br><img src="/images/2020/04/2020040818545544.png" alt="在这里插入图片描述">安装包下载之后，直接安装，一路next即可安装完毕。<br>安装完毕之后，可以使用<code>go version</code>命令来查看golang版本，如果显示版本号，则说明golang安装成功。<br><img src="/images/2020/04/20200408190942781.png" alt="在这里插入图片描述"></p>
<h1 id="Golang环境变量配置"><a href="#Golang环境变量配置" class="headerlink" title="Golang环境变量配置"></a>Golang环境变量配置</h1><p>Golang中有需要配置三个环境变量，分别是：</p>
<ul>
<li>GOROOT：Golang的安装目录</li>
<li>PATH：Golang的安装目录下的bin目录</li>
<li>GOPATH：Golang的项目目录</li>
</ul>
<p><strong>【注意】我们将GOROOT和PATH配置到系统的环境变量中，但是GOPATH我们不直接在系统变量中配置成一个固定的配置，因为我们可能在一个系统中创建多个Golang的项目，每一个项目都需要配置一个GOPATH变量，这显然是繁琐而且非常难以管理的，所以我们在创建项目的时候，直接通过IDE在创建项目的时候来配置GOPATH变量，这样就可以给每个Golang项目都配置上对应的GOPATH路径。</strong></p>
<p>我们首先找到系统环境变量的配置界面：<br>此电脑（我的电脑）——右键属性——高级系统设置——环境变量<br>我们会看到如下的界面，其中GOROOT的环境变量如下：<br><img src="/images/2020/04/20200408192238222.png" alt="在这里插入图片描述"><br>PATH的环境变量配置如下：<br><img src="/images/2020/04/20200408192450190.png" alt="在这里插入图片描述"><br><strong>如果你是用的是msi的安装包安装Golang，一般都会在安装的时候自动帮你配置这些信息，只要是用<code>go version</code>能够查看版本信息，就说明Golang配置成功，这些变量也都已经配置好了。<br>如果你使用的是zip解压缩的方式，那么就需要手动配置这些环境变量。</strong></p>
<h1 id="IDEA安装Go插件"><a href="#IDEA安装Go插件" class="headerlink" title="IDEA安装Go插件"></a>IDEA安装Go插件</h1><p>如果要使用IDEA来进行Golang的开发，那么我们需要下载一个Go插件，否则是无法进行Golang的开发的。<br>IDEA自动集成了Go插件，我们只需要在IDEA上下载安装一下即可。<br>我们进入插件下载界面：File——Settings——Plugins</p>
<p><img src="/images/2020/04/2020040819341761.png" alt="在这里插入图片描述"></p>
<h1 id="IDEA开发Golang"><a href="#IDEA开发Golang" class="headerlink" title="IDEA开发Golang"></a>IDEA开发Golang</h1><h2 id="创建一个Golang项目"><a href="#创建一个Golang项目" class="headerlink" title="创建一个Golang项目"></a>创建一个Golang项目</h2><p><img src="/images/2020/04/20200408193655789.png" alt="在这里插入图片描述"><br><img src="/images/2020/04/20200408193852625.png" alt="在这里插入图片描述"></p>
<h2 id="配置GOPATH环境变量"><a href="#配置GOPATH环境变量" class="headerlink" title="配置GOPATH环境变量"></a>配置GOPATH环境变量</h2><p>我们创建项目之后，打开项目，选择File——Settings——Languages&amp;Frameworks——Go——GOPATH，配置项目的GOPATH路径。<br><img src="/images/2020/04/20200408194527479.png" alt="在这里插入图片描述"></p>
<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><p>Golang的项目代码全部放在GOPATH路径下的src目录下，所以我们直接在项目下创建一个src目录，用来存放我们的Golang源代码。</p>
<p><strong>项目目录结构如下：</strong><br><img src="/images/2020/04/20200408200952535.png" alt="在这里插入图片描述"><br><strong>action.go</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> person</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Say</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;我正在说话&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>main.go</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;com/person&quot;</span></span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Hello World!&quot;</span>)</span><br><span class="line">    person.Say()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong><br><img src="/images/2020/04/20200408201121766.png" alt="在这里插入图片描述"></p>
]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>IDEA</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEA Java项目JDK无效</title>
    <url>/2020/08/10/java/IDEA%20Java%E9%A1%B9%E7%9B%AEJDK%E6%97%A0%E6%95%88/</url>
    <content><![CDATA[<p>今天在创建一个新的Java项目的时候，发现项目的JDK失效了，导致main方法的String类爆红，而且其他JDK的类也无法使用。</p>
<span id="more"></span>
<p>一开始我以为是项目资源的Project SDK没有设置，但是我打开File-&gt;Project Structure的时候，发现SDK已经设置了。<br><img src="/images/2020/08/20200810221241367.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>最终我发现，该问题其实是因为设置了忽略文件导致的。</p>
</blockquote>
<p><img src="/images/2020/08/20200810221422533.png" alt="在这里插入图片描述"><br>由于我在Ignore Files and Folders中设置了<code>*.classes</code>,导致项目无法依赖JDK下的包，所以才导致了这个问题，我们把Ignore Files and Folders中的<code>*.classes</code>删除即可解决该问题。</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>IDEA</tag>
      </tags>
  </entry>
  <entry>
    <title>Golang连接MySQL数据库之CRUD</title>
    <url>/2020/04/12/golang/Golang%E8%BF%9E%E6%8E%A5MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8BCRUD/</url>
    <content><![CDATA[<blockquote>
<p>我们这次来学习使用Golang来连接MySQL数据库，并使用Golang实现数据库的CRUD操作。</p>
</blockquote>
<span id="more"></span>
<h1 id="搭建环境"><a href="#搭建环境" class="headerlink" title="搭建环境"></a>搭建环境</h1><p>首先我们创建一个Golang的项目，并配置项目GOPATH，这一步可以参考我的博客<a href="/2020/04/08/golang/Golang环境安装&IDEA开发Golang/">Golang环境安装&amp;IDEA开发Golang</a>。</p>
<p>因为我们使用的是MySQL数据库，所以我们需要获取Golang的MySQL数据库驱动。<br>我们在项目GOPATH的目录下，执行<code>go get</code>命令来获取MySQL的驱动，命令执行成功之后，会直接从网上下载MySQL驱动的包到你的<code>GOPATH</code>目录下的<code>src</code>目录下。</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">go</span> get -u github.com/<span class="keyword">go</span>-sql-driver/mysql</span><br></pre></td></tr></table></figure>
<p>Golang的项目环境搭建完成之后，我们还需要创建一张数据库表。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_user` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `nameindex` (`name`(<span class="number">10</span>))</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure>
<h1 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h1><p><img src="/images/2020/04/2020041210175843.png" alt="在这里插入图片描述"></p>
<h1 id="编写结构体"><a href="#编写结构体" class="headerlink" title="编写结构体"></a>编写结构体</h1><p>为了能够便于封装从数据库中获取的数据，我们创建一个Golang结构，来封装我们的数据。<br>我们创建一个<code>bean</code>包，然后在该包下创建一个<code>user.go</code>文件。</p>
<p><strong>user.go</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> bean</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	id <span class="type">int</span></span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	password <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(user *User)</span></span> GetId() <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> user.id</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(user *User)</span></span> SetId(id <span class="type">int</span>) &#123;</span><br><span class="line">	user.id = id</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(user *User)</span></span> GetName() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> user.name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(user *User)</span></span> SetName(name <span class="type">string</span>) &#123;</span><br><span class="line">	user.name = name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(user *User)</span></span> GetPassword() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> user.password</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(user *User)</span></span> SetPassword(password <span class="type">string</span>) &#123;</span><br><span class="line">	user.password = password</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="编写数据库连接工具"><a href="#编写数据库连接工具" class="headerlink" title="编写数据库连接工具"></a>编写数据库连接工具</h1><p>由于每次连接数据库都需要获取数据库连接，所以我们直接将数据库的连接操作封装为一个方法，这样就可以不用每次都执行获取连接的步骤了。<br>我们创建一个<code>util</code>包，在包下创建一个<code>initdb.go</code>文件。</p>
<p><strong>initdb.go</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> util</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;database/sql&quot;</span></span><br><span class="line">	_ <span class="string">&quot;github.com/go-sql-driver/mysql&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//我们先将数据库配置信息定义成为常量</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	userName = <span class="string">&quot;root&quot;</span></span><br><span class="line">	password = <span class="string">&quot;admin&quot;</span></span><br><span class="line">	ip       = <span class="string">&quot;127.0.0.1&quot;</span></span><br><span class="line">	port     = <span class="string">&quot;3306&quot;</span></span><br><span class="line">	dbName   = <span class="string">&quot;db_database08&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化数据库连接，返回数据库连接的指针引用</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">InitDB</span><span class="params">()</span></span> *sql.DB &#123;</span><br><span class="line">	<span class="comment">//Golang数据连接：&quot;用户名:密码@tcp(IP:端口号)/数据库名?charset=utf8&quot;</span></span><br><span class="line">	path := strings.Join([]<span class="type">string</span>&#123;userName, <span class="string">&quot;:&quot;</span>, password, <span class="string">&quot;@tcp(&quot;</span>, ip, <span class="string">&quot;:&quot;</span>, port, <span class="string">&quot;)/&quot;</span>, dbName, <span class="string">&quot;?charset=utf8&quot;</span>&#125;, <span class="string">&quot;&quot;</span>)</span><br><span class="line">	<span class="comment">//打开数据库,前者是驱动名，所以要导入： _ &quot;github.com/go-sql-driver/mysql&quot;</span></span><br><span class="line">	db, err := sql.Open(<span class="string">&quot;mysql&quot;</span>, path)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="comment">//如果打开数据库错误，直接panic</span></span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//设置数据库最大连接数</span></span><br><span class="line">	db.SetConnMaxLifetime(<span class="number">10</span>)</span><br><span class="line">	<span class="comment">//设置上数据库最大闲置连接数</span></span><br><span class="line">	db.SetMaxIdleConns(<span class="number">5</span>)</span><br><span class="line">	<span class="comment">//验证连接</span></span><br><span class="line">	<span class="keyword">if</span> err := db.Ping(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//将数据库连接的指针引用返回</span></span><br><span class="line">	<span class="keyword">return</span> db</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="CRUD操作"><a href="#CRUD操作" class="headerlink" title="CRUD操作"></a>CRUD操作</h1><h2 id="Insert操作"><a href="#Insert操作" class="headerlink" title="Insert操作"></a>Insert操作</h2><p>我们创建一个<code>insert</code>包，在该包下创建一个<code>insert.go</code>文件</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;mysql/util&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//使用工具获取数据库连接</span></span><br><span class="line">	db := util.InitDB()</span><br><span class="line">	<span class="comment">//开启事务</span></span><br><span class="line">	tx, err := db.Begin()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="comment">//事务开启失败，直接panic</span></span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//准备SQL语句</span></span><br><span class="line">	sql := <span class="string">&quot;insert into tb_user (`name`, `password`) values (?, ?)&quot;</span></span><br><span class="line">	<span class="comment">//对SQL语句进行预处理</span></span><br><span class="line">	stmt, err := db.Prepare(sql)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	result, err := stmt.Exec(<span class="string">&quot;阿部多瑞&quot;</span>,<span class="string">&quot;123&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="comment">//SQL执行失败，直接panic</span></span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//提交事务</span></span><br><span class="line">	tx.Commit()</span><br><span class="line">	<span class="comment">//返回插入记录的id</span></span><br><span class="line">	fmt.Println(result.LastInsertId())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Select操作"><a href="#Select操作" class="headerlink" title="Select操作"></a>Select操作</h2><p>我们创建一个<code>select</code>包，在该包下创建一个<code>select.go</code>文件</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;mysql/bean&quot;</span></span><br><span class="line">	<span class="string">&quot;mysql/util&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//使用工具获取数据库连接</span></span><br><span class="line">	db := util.InitDB()</span><br><span class="line">	<span class="comment">//准备SQL语句</span></span><br><span class="line">	sql := <span class="string">&quot;select * from tb_user&quot;</span></span><br><span class="line">	<span class="comment">//对SQL语句进行预处理</span></span><br><span class="line">	stmt, err := db.Prepare(sql)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	rows, err := stmt.Query()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="comment">//SQL执行失败，直接panic</span></span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> users []bean.User</span><br><span class="line">	<span class="keyword">for</span> rows.Next() &#123;</span><br><span class="line">		<span class="keyword">var</span> id <span class="type">int</span></span><br><span class="line">		<span class="keyword">var</span> name, password <span class="type">string</span></span><br><span class="line">		err := rows.Scan(&amp;id, &amp;name, &amp;password)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="comment">//读取结果集失败</span></span><br><span class="line">			<span class="built_in">panic</span>(err)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">var</span> user bean.User</span><br><span class="line">		user.SetId(id)</span><br><span class="line">		user.SetName(name)</span><br><span class="line">		user.SetPassword(password)</span><br><span class="line">		users = <span class="built_in">append</span>(users, user)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(users)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Update操作"><a href="#Update操作" class="headerlink" title="Update操作"></a>Update操作</h2><p>我们创建一个<code>update</code>包，在该包下创建一个<code>update.go</code>文件</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;mysql/util&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//使用工具获取数据库连接</span></span><br><span class="line">	db := util.InitDB()</span><br><span class="line">	<span class="comment">//开启事务</span></span><br><span class="line">	tx, err := db.Begin()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="comment">//事务开启失败，直接panic</span></span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//准备SQL语句</span></span><br><span class="line">	sql := <span class="string">&quot;update tb_user set `password` = ? where `id` = ?&quot;</span></span><br><span class="line">	<span class="comment">//对SQL语句进行预处理</span></span><br><span class="line">	stmt, err := db.Prepare(sql)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	_, err = stmt.Exec(<span class="string">&quot;789&quot;</span>, <span class="number">1</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="comment">//SQL执行失败，直接panic</span></span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//提交事务</span></span><br><span class="line">	tx.Commit()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Delete操作"><a href="#Delete操作" class="headerlink" title="Delete操作"></a>Delete操作</h2><p>我们创建一个<code>delete</code>包，在该包下创建一个<code>delete.go</code>文件</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;mysql/util&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//使用工具获取数据库连接</span></span><br><span class="line">	db := util.InitDB()</span><br><span class="line">	<span class="comment">//开启事务</span></span><br><span class="line">	tx, err := db.Begin()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="comment">//事务开启失败，直接panic</span></span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//准备SQL语句</span></span><br><span class="line">	sql := <span class="string">&quot;delete from tb_user where `id` = ?&quot;</span></span><br><span class="line">	<span class="comment">//对SQL语句进行预处理</span></span><br><span class="line">	stmt, err := db.Prepare(sql)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	_, err = stmt.Exec(<span class="number">1</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="comment">//SQL执行失败，直接panic</span></span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//提交事务</span></span><br><span class="line">	tx.Commit()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEA使用Spring Initializr创建Spring项目</title>
    <url>/2020/03/31/java/IDEA%E4%BD%BF%E7%94%A8Spring%20Initializr%E5%88%9B%E5%BB%BASpring%E9%A1%B9%E7%9B%AE/</url>
    <content><![CDATA[<p>今天我们来学习使用 IDEA 自带的 Spring Initializr 项目来创建一个全新的 Spring 项目。</p>
<span id="more"></span>
<h2 id="1、创建一个Module项目"><a href="#1、创建一个Module项目" class="headerlink" title="1、创建一个Module项目"></a>1、创建一个Module项目</h2><p><img src="/images/2020/03/20200331091443775.png" alt="在这里插入图片描述"></p>
<h2 id="2、选择Spring-Initializr创建项目。"><a href="#2、选择Spring-Initializr创建项目。" class="headerlink" title="2、选择Spring_Initializr创建项目。"></a>2、选择Spring_Initializr创建项目。</h2><p><img src="/images/2020/03/20200331091705922.png" alt="在这里插入图片描述"></p>
<h2 id="3、设置项目的基本信息"><a href="#3、设置项目的基本信息" class="headerlink" title="3、设置项目的基本信息"></a>3、设置项目的基本信息</h2><p><img src="/images/2020/03/20200331091740988.png" alt="在这里插入图片描述"></p>
<h2 id="4、选择项目所需的依赖"><a href="#4、选择项目所需的依赖" class="headerlink" title="4、选择项目所需的依赖"></a>4、选择项目所需的依赖</h2><p><img src="/images/2020/03/20200331091808586.png" alt="在这里插入图片描述"></p>
<h2 id="5、创建SpringBoot项目"><a href="#5、创建SpringBoot项目" class="headerlink" title="5、创建SpringBoot项目"></a>5、创建SpringBoot项目</h2><p><img src="/images/2020/03/20200331091826459.png" alt="在这里插入图片描述"></p>
<h2 id="6、项目结构图"><a href="#6、项目结构图" class="headerlink" title="6、项目结构图"></a>6、项目结构图</h2><p><img src="/images/2020/03/20200331092101572.png" alt="在这里插入图片描述"></p>
<h2 id="7、项目pom-xml文件"><a href="#7、项目pom-xml文件" class="headerlink" title="7、项目pom.xml文件"></a>7、项目pom.xml文件</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring_initializr_demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>spring_initializr_demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>IDEA</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Jackson解析Yaml文件报错</title>
    <url>/2023/02/09/java/Jackson%E8%A7%A3%E6%9E%90Yaml%E6%96%87%E4%BB%B6%E6%8A%A5%E9%94%99/</url>
    <content><![CDATA[<p>今天在使用<code>jackson-dataformat-yaml</code>框架解析<code>Yaml</code>文件的时候，解析过程中爆出了这样一个错误。</p>
<span id="more"></span>
<p>错误信息大致如下：</p>
<blockquote>
<p>Exception in thread “main” java.lang.NoSuchMethodError: com.fasterxml.jackson.dataformat.yaml.YAMLFactory._createContentReference(Ljava/lang/Object;)Lcom/fasterxml/jackson/core/io/ContentReference;<br>    at com.fasterxml.jackson.dataformat.yaml.YAMLFactory.createParser(YAMLFactory.java:353)<br>    at com.fasterxml.jackson.dataformat.yaml.YAMLFactory.createParser(YAMLFactory.java:15)<br>    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3413)</p>
</blockquote>
<p>这个错误产生的原因是因为，我们的项目同时引入了<code>jackson-databind</code>框架，而<code>jackson-databind</code>框架和<code>jackson-dataformat-yaml</code>框架同时引入了一些<code>jackson</code>相关的核心依赖，且这两个框架的核心依赖版本不一致，导致了报错。</p>
<p><img src="/images/2023/02/12ac822be492400a83ad7a73f0f525d7.png" alt="Maven依赖分析"></p>
<p>使用Maven进行依赖分析，我们可以看到：</p>
<ul>
<li>我们项目自己引入的<code>jackson-databind</code>框架，且版本较低。</li>
<li><code>jackson-dataformat-yaml</code>框架依赖了<code>jackson-core</code>、<code>jackson-databind</code>等依赖，且版本较高。</li>
<li>根据Maven依赖原则，<code>jackson-databind</code>框架的依赖被优先使用（<code>jackson-databind</code>框架在<code>pom.xml</code>文件中被先声明也是导致依赖被优先使用的原因）。</li>
</ul>
<p>根据以上的分析，我们可以得到两个解决方案：</p>
<ul>
<li><p>根据最少依赖原则，我们可以直接注释<code>pom.xml</code>文件中的<code>jackson-databind</code>框架依赖，这样项目就可以直接依赖<code>jackson-dataformat-yaml</code>框架，且<code>jackson-dataformat-yaml</code>框架中依赖了<code>jackson-databind</code>项目，所以完全不影响项目的正常使用。【推荐该方案】</p>
</li>
<li><p>在<code>pom.xml</code>文件中，将<code>jackson-databind</code>框架依赖声明在<code>jackson-dataformat-yaml</code>框架依赖之后。（这个方案本质上和注释<code>jackson-databind</code>依赖区别不大，因为根据Maven依赖原则，这个依赖完全不会被使用。）</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Jackson</tag>
        <tag>Yaml</tag>
      </tags>
  </entry>
  <entry>
    <title>Java main方法中的String[] args</title>
    <url>/2021/01/10/java/Java%20main%E6%96%B9%E6%B3%95%E4%B8%AD%E7%9A%84String%5B%5D%20args/</url>
    <content><![CDATA[<blockquote>
<p>在每一个学习Java的同学，都应该写过下面的这一段代码。</p>
</blockquote>
<span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;Hello,World!&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在Java语言中，规定了入口函数是一个<code>main()</code>方法，该方法有一个<code>String[]</code>类型的参数，但是在很多时候，很多人都使用不上这个参数，也不关心为什么要写这个参数。</p>
<p>那么这个字符串数组类型的参数究竟是什么东西呢？</p>
<blockquote>
<p>其实很简单，main()方法中的字符串数组类型的参数就是java命令的参数，使用java命令的方式运行main()方法，会将java命令的参数入参到Java main()方法的字符串数组参数中。</p>
</blockquote>
<p>我们可以通过以下方式来进行验证：</p>
<ul>
<li>1、先编写一个Hello.java文件，文件内容如下：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;==============args start============&quot;</span>);</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; args.length; i++) &#123;</span><br><span class="line">			System.out.println(args[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">&quot;==============args end============&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>2、在<code>Hello.java</code>文件的路径下打开cmd命令提示符，运行<code>javac Hello.java</code>命令编译该文件，这将会在对应的文件路径下，得到一个<code>Hello.class</code>字节码文件。</p>
</li>
<li><p>3、使用<code>java Hello</code>命令运行Hello.class文件，我们将会得到如下的运行结果：<br><img src="/images/2021/01/20210110215255723.png" alt="在这里插入图片描述"></p>
<ul>
<li>4、我们这次在java命令后面添加一些参数，这些参数我们可以自己定义。<br>例如：<code>java Hello a b c d</code> ，我们将会得到如下的运行结果：<br><img src="/images/2021/01/20210110215501851.png" alt="在这里插入图片描述"><blockquote>
<p>正是因为Java main()方法的这个扩展性，使得每一个开发者，可以通过自己定义一些Java命令的参数，实现一些不同的功能。</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<p>其中SpringBoot的启动类，其实也使用了这个特性，SpringApplication.run()方法有一个重载方法，其中第一个入参的是注解了<code>@SpringBootApplication</code>注解的类的字节码对象，而第二个参数，即为main()方法的字符串数组参数。</p>
<p>SpringBoot可以通过这个字符串数组参数，通过<code>java</code>命令参数的方式，在不同的环境下实现不同的应用配置。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MyApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java位运算，Int类型存储用户的登录足迹</title>
    <url>/2021/08/23/java/Java%E4%BD%8D%E8%BF%90%E7%AE%97%EF%BC%8CInt%E7%B1%BB%E5%9E%8B%E5%AD%98%E5%82%A8%E7%94%A8%E6%88%B7%E7%9A%84%E7%99%BB%E5%BD%95%E8%B6%B3%E8%BF%B9/</url>
    <content><![CDATA[<blockquote>
<p>今天接到一家公司的面试邀请，于是我来到了这家公司，前台的小姐姐面带微笑地把我请进会议室，等待了一会，一位面试官走了进来……</p>
<p>在进行了简单的自我介绍之后，面试官开始发问了……</p>
</blockquote>
<span id="more"></span>



<p>面试官：你好，请你使用最少的存储空间，记录一个用户在一个月内的登录记录，只需要知道用户在某一日是否登录即可。</p>
<p>我（略作沉思）：好的，我们可以建立一张登录日志表，在用户登录的时候，记录一条登录日志数据，这张表和用户表是一对多的关系，有用户主键、登录类型、登录时间等等，如果有需要，我们还可以记录用户的登录 IP、登录国家、城市等等信息……</p>
<p>面试官（面无表情）：……好的，请你回去等我们的通知吧……</p>
<p>我：……开玩笑的，既然要使用最少的存储空间来实现这个需求，使用传统的数据库记录登录日志的方式自然是难以达到这个条件的，所以我们需要打破传统的存储方式来实现这个需求。</p>
<p>面试官（略有兴趣）：哦，那你要怎么实现呢？</p>
<p>我：总所周知，在 Java 中，一个 int 类型所占的内存空间是 4 个字节，而一个字节是 8 个 bit，所以一个 int 类型的数据，所占用的内存空间是 32 个 bit 位，而我的想法就是，使用一个 int 类型的数据，也就是 32 个 bit 位记录用户在一个月内的登录记录。</p>
<p>面试官（点了点头）：32 个 bit 位，这个存储空间确实非常少，但是具体要怎么实现呢？你详细说说。</p>
<p>我：我之前也说了，一个 int 类型的数据，占用的内存空间是 32 个 bit 位，而 Java 中的 int 是一个有符号位的数据，除去最高位的符号位之外，在 Java 中一个 int 类型的数据，能够表达状态的一共有 31 个 bit 位。例如，一个值为 0 的 int 类型数据，转换为二进制的 bit 位，显示为 <code>00000000 00000000 00000000 00000000</code>。</p>
<p>面试官满意地点了点头……</p>
<p>我：一个 int 类型的 bit 为可以有 0 和 1 两个状态，而且恰好有 31 个 bit 位可用，我们完全可以使用这 31 个 bit 位来记录用户当日是否登录。比如一个用户在 3 号登录了，使用 bit 位表示为： <code>00000000 00000000 00000000 00000100</code> 。而后这个用户在 5 号也登录，使用 bit 位可以表示为： <code>00000000 00000000 00000000 00010100</code> 。依次类推，一个月最多也就 31 天，假如一个用户在一个大月中每天都登录，使用 bit 位可以表示为： <code>01111111 11111111 11111111 11111111</code> 。最后，我们将这个二进制的 bit 数据转换为 int 类型即可。</p>
<p>面试官：思路不错，但是具体要怎么实现呢？如果将一个 int 类型的数据转换为二进制的 bit 位数据，具体的算法实现会不会非常麻烦呢？程序的执行效率会不会很慢呢？</p>
<p>我（面带自信）：我的实现很简单，而且程序的执行效率也非常快，甚至要比 Java 中的其他运算都要快！</p>
<p>面试官：哦……</p>
<p>我：我的实现方式，就是使用 Java 中的位运算来实现，使用位运算，不仅实现简单，而且运行效率远比其他符号运算快！</p>
<p>面试官（递过来一张纸）：请你在草稿纸上简单实现一下吧。</p>
<p>我：……</p>
<p>我：首先定义一个私有的 int 类型的数据。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">login</span> <span class="operator">=</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>



<p>我：其次，我们需要两个公有的方法，用来操作这个 int 类型的数据。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">setBit</span><span class="params">(<span class="type">int</span> bitIndex)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (bitIndex &lt; <span class="number">0</span> || bitIndex &gt; <span class="number">30</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;超过 int 类型 bit 位的有效范围&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    login |= <span class="number">1</span> &lt;&lt; bitIndex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">getBit</span><span class="params">(<span class="type">int</span> bitIndex)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (bitIndex &lt; <span class="number">0</span> || bitIndex &gt; <span class="number">30</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(<span class="string">&quot;超过 int 类型 bit 位的有效范围&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (login &amp; <span class="number">1</span> &lt;&lt; bitIndex) != <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>我：最后，我们可以测试一下这个方法。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    setBit(<span class="number">0</span>);</span><br><span class="line">    setBit(<span class="number">3</span>);</span><br><span class="line">    setBit(<span class="number">4</span>);</span><br><span class="line">    setBit(<span class="number">16</span>);</span><br><span class="line">    setBit(<span class="number">30</span>);</span><br><span class="line">    System.out.println(Integer.toBinaryString(login));  <span class="comment">// 1000000 00000001 00000000 00011001</span></span><br><span class="line">    System.out.println(getBit(<span class="number">0</span>));   <span class="comment">// true</span></span><br><span class="line">    System.out.println(getBit(<span class="number">1</span>));   <span class="comment">// false</span></span><br><span class="line">    System.out.println(getBit(<span class="number">2</span>));   <span class="comment">// false</span></span><br><span class="line">    System.out.println(getBit(<span class="number">3</span>));   <span class="comment">// true</span></span><br><span class="line">    System.out.println(getBit(<span class="number">30</span>));  <span class="comment">// true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>我：在这段代码中，我没有对日期进行一个真实数据的维护，比如 1 号对应的是 0 位的 bit 位，31 号对应的是 30 位的 bit 位，所以在正式使用的时候，需要手动对真实的日期数据进行 -1 维护。</p>
<p>面试官（面露微笑）：精彩！精彩啊！很好，我们公司就需要你这也的人才，明天来我们公司报道吧！</p>
<p>我（激动）：好的，请问我的薪资是……</p>
<p>面试官（沉吟片刻）：就 3k 吧。</p>
<p>我：……&amp;#￥$@@*&amp;^%……</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java实现PDF文件转换为图片</title>
    <url>/2020/09/02/java/Java%E5%AE%9E%E7%8E%B0PDF%E6%96%87%E4%BB%B6%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%9B%BE%E7%89%87/</url>
    <content><![CDATA[<blockquote>
<p>前几天写了一篇博客<a href="/2020/08/05/java/Java实现图片转换PDF文件/">Java实现图片转换PDF文件</a>，在博客下方有同学评论是否能够将PDF文件转换为图片，所以今天就在这里写了一个将PDF文件转换为图片的简单系统。</p>
</blockquote>
<span id="more"></span>

<h2 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--SpringMVC的依赖，方便我们可以获取前端传递过来的文件信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--icepdf，用来将pdf文件转换为图片的依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.icepdf.os<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>icepdf-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h2 id="前端页面"><a href="#前端页面" class="headerlink" title="前端页面"></a>前端页面</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>PDf转换图片<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.submitButton</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: <span class="number">150px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#e37e10</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ff8300</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>PDF转换图片工具<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/pdf/to/image&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">onsubmit</span>=<span class="string">&quot;return allowFileType()&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请选择PDF文件&quot;</span> <span class="attr">onchange</span>=<span class="string">&quot;allowFileType()&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid black;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;一键转换图片&quot;</span> <span class="attr">class</span>=<span class="string">&quot;submitButton&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">allowFileType</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> file = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;file&quot;</span>).<span class="property">files</span>[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> fileName = file.<span class="property">name</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> suffix = fileName.<span class="title function_">substring</span>(fileName.<span class="title function_">lastIndexOf</span>(<span class="string">&quot;.&quot;</span>),fileName.<span class="property">length</span>).<span class="title function_">toLowerCase</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(<span class="string">&#x27;.pdf&#x27;</span> != suffix) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;只允许传入PDF格式的文件！&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="控制层接口"><a href="#控制层接口" class="headerlink" title="控制层接口"></a>控制层接口</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hrp.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hrp.util.ImageUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 用于处理Pdf相关的请求</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;pdf&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PdfController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;to/image&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pdfToImage</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile file,HttpServletResponse response)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        ImageUtils.pdfToImage(file,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="Image工具类"><a href="#Image工具类" class="headerlink" title="Image工具类"></a>Image工具类</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hrp.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.icepdf.core.pobjects.Document;</span><br><span class="line"><span class="keyword">import</span> org.icepdf.core.pobjects.Page;</span><br><span class="line"><span class="keyword">import</span> org.icepdf.core.util.GraphicsRenderingHints;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.zip.ZipEntry;</span><br><span class="line"><span class="keyword">import</span> java.util.zip.ZipOutputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: PDF转换为图片的工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImageUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 图片文件格式</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FORMAT_NAME</span> <span class="operator">=</span> <span class="string">&quot;png&quot;</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 图片文件后缀名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">PNG_SUFFIX</span> <span class="operator">=</span> <span class="string">&quot;.png&quot;</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 压缩文件后缀名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ZIP_SUFFIX</span> <span class="operator">=</span> <span class="string">&quot;.zip&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 对外的开放接口，用于将PDF文件转换为图片文件压缩包进行下载</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> file SpringMVC获取的图片文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">pdfToImage</span><span class="params">(MultipartFile file, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">zipFile</span> <span class="operator">=</span> generateImageFile(file);</span><br><span class="line">        downloadZipFile(zipFile, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将PDF文件转换为多张图片并放入一个压缩包中</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> file SpringMVC获取的图片文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 图片文件压缩包</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception 抛出异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> File <span class="title function_">generateImageFile</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">        <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Document</span>();</span><br><span class="line">        document.setByteArray(file.getBytes(), <span class="number">0</span>, file.getBytes().length, fileName);</span><br><span class="line"></span><br><span class="line">        List&lt;File&gt; fileList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; document.getNumberOfPages(); i++) &#123;</span><br><span class="line">            <span class="type">BufferedImage</span> <span class="variable">image</span> <span class="operator">=</span> (BufferedImage) document.getPageImage(i, GraphicsRenderingHints.SCREEN,</span><br><span class="line">                    Page.BOUNDARY_CROPBOX, <span class="number">0F</span>, <span class="number">2.5F</span>);</span><br><span class="line">            <span class="type">File</span> <span class="variable">imageFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>((i + <span class="number">1</span>) + PNG_SUFFIX);</span><br><span class="line">            ImageIO.write(image, FORMAT_NAME, imageFile);</span><br><span class="line">            image.flush();</span><br><span class="line">            fileList.add(imageFile);</span><br><span class="line">        &#125;</span><br><span class="line">        document.dispose();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">directoryName</span> <span class="operator">=</span> fileName.substring(<span class="number">0</span>, fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">        <span class="type">File</span> <span class="variable">zipFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(directoryName + ZIP_SUFFIX);</span><br><span class="line">        <span class="type">ZipOutputStream</span> <span class="variable">zos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(zipFile));</span><br><span class="line">        zipFile(fileList, zos);</span><br><span class="line">        zos.close();</span><br><span class="line">        <span class="keyword">return</span> zipFile;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 下载zip文件</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> zipFile  zip压缩文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response HttpServletResponse</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException IO异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">downloadZipFile</span><span class="params">(File zipFile, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(zipFile);</span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[fis.available()];</span><br><span class="line">        fis.read(bytes);</span><br><span class="line">        fis.close();</span><br><span class="line"></span><br><span class="line">        response.reset();</span><br><span class="line">        response.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/x-msdownload&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment; filename=&quot;</span> + URLEncoder.encode(zipFile.getName(), <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">        out.write(bytes);</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line">        zipFile.delete();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 压缩文件</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> inputFiles 具体需要压缩的文件集合</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> zos        ZipOutputStream对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException IO异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">zipFile</span><span class="params">(List&lt;File&gt; inputFiles, ZipOutputStream zos)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">for</span> (File file : inputFiles) &#123;</span><br><span class="line">            <span class="keyword">if</span> (file.exists()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (file.isFile()) &#123;</span><br><span class="line">                    <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file));</span><br><span class="line">                    zos.putNextEntry(<span class="keyword">new</span> <span class="title class_">ZipEntry</span>(file.getName()));</span><br><span class="line">                    <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">while</span> ((size = bis.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        zos.write(buffer, <span class="number">0</span>, size);</span><br><span class="line">                    &#125;</span><br><span class="line">                    zos.closeEntry();</span><br><span class="line">                    bis.close();</span><br><span class="line">                    file.delete();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    File[] files = file.listFiles();</span><br><span class="line">                    List&lt;File&gt; childrenFileList = Arrays.asList(files);</span><br><span class="line">                    zipFile(childrenFileList, zos);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="页面效果"><a href="#页面效果" class="headerlink" title="页面效果"></a>页面效果</h2><p><img src="/images/2020/09/20200902230305119.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>作者简单测试了一下，该系统是可以顺利运行的，而且作者将后台生成的图片文件和压缩文件都进行了删除，这样就不会对后台系统产生不必要的资源浪费，节约了磁盘空间。</p>
</blockquote>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>PDF</tag>
      </tags>
  </entry>
  <entry>
    <title>Java实现图片转换PDF文件</title>
    <url>/2020/08/25/java/Java%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E8%BD%AC%E6%8D%A2PDF%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<blockquote>
<p>最近因为一些事情，需要将一张简单的图片转换为PDF的文件格式，在网上找了一些工具，但是这些工具不是需要注册账号，就是需要下载软件。<br>而对于只是转换一张图片的情况下，这些操作显然是非常繁琐的，所以作者就直接使用Java写了一个图片转换PDF的系统，现在将该系统分享在这里。</p>
</blockquote>
<span id="more"></span>

<h2 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--该项目以SpringBoot为基础搭建--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--SpringMVC的依赖，方便我们可以获取前端传递过来的文件信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ITextPdf，操作PDF文件的工具类--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itextpdf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>itextpdf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="前端页面"><a href="#前端页面" class="headerlink" title="前端页面"></a>前端页面</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>图片转换Pdf<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.submitButton</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: <span class="number">150px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#e37e10</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ff8300</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>图片转换pdf工具<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/pdf/image/to&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">onsubmit</span>=<span class="string">&quot;return allowFileType()&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请选择图片&quot;</span> <span class="attr">onchange</span>=<span class="string">&quot;allowFileType()&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid black;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;一键转换pdf文件&quot;</span> <span class="attr">class</span>=<span class="string">&quot;submitButton&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">allowFileType</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> file = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;file&quot;</span>).<span class="property">files</span>[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> fileName = file.<span class="property">name</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> fileSize = file.<span class="property">size</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> suffix = fileName.<span class="title function_">substring</span>(fileName.<span class="title function_">lastIndexOf</span>(<span class="string">&quot;.&quot;</span>),fileName.<span class="property">length</span>).<span class="title function_">toLowerCase</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(<span class="string">&#x27;.jpg&#x27;</span> != suffix &amp;&amp; <span class="string">&#x27;.png&#x27;</span> != suffix) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;目前只允许传入.jpg或者.png格式的图片！&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(fileSize &gt; <span class="number">2</span>*<span class="number">1024</span>*<span class="number">1024</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;上传图片不允许超过2MB!&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="控制层接口"><a href="#控制层接口" class="headerlink" title="控制层接口"></a>控制层接口</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hrp.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hrp.util.PdfUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 用于处理Pdf相关的请求</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;pdf&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PdfController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;image/to&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">imageToPdf</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile file,HttpServletResponse response)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        PdfUtils.imageToPdf(file,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="PDF工具类"><a href="#PDF工具类" class="headerlink" title="PDF工具类"></a>PDF工具类</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hrp.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.Document;</span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.DocumentException;</span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.Image;</span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.PageSize;</span><br><span class="line"><span class="keyword">import</span> com.itextpdf.text.pdf.PdfWriter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: pdf相关的工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PdfUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 图片转换PDF的公共接口</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> file     SpringMVC获取的图片文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response HttpServletResponse</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException       IO异常</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> DocumentException PDF文档异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">imageToPdf</span><span class="params">(MultipartFile file, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException, DocumentException &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">pdfFile</span> <span class="operator">=</span> generatePdfFile(file);</span><br><span class="line">        downloadPdfFile(pdfFile, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将图片转换为PDF文件</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> file SpringMVC获取的图片文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> PDF文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException       IO异常</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> DocumentException PDF文档异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> File <span class="title function_">generatePdfFile</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException, DocumentException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">        <span class="type">String</span> <span class="variable">pdfFileName</span> <span class="operator">=</span> fileName.substring(<span class="number">0</span>, fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>)) + <span class="string">&quot;.pdf&quot;</span>;</span><br><span class="line">        <span class="type">Document</span> <span class="variable">doc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Document</span>(PageSize.A4, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">        PdfWriter.getInstance(doc, <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(pdfFileName));</span><br><span class="line">        doc.open();</span><br><span class="line">        doc.newPage();</span><br><span class="line">        <span class="type">Image</span> <span class="variable">image</span> <span class="operator">=</span> Image.getInstance(file.getBytes());</span><br><span class="line">        <span class="type">float</span> <span class="variable">height</span> <span class="operator">=</span> image.getHeight();</span><br><span class="line">        <span class="type">float</span> <span class="variable">width</span> <span class="operator">=</span> image.getWidth();</span><br><span class="line">        <span class="type">int</span> <span class="variable">percent</span> <span class="operator">=</span> getPercent(height, width);</span><br><span class="line">        image.setAlignment(Image.MIDDLE);</span><br><span class="line">        image.scalePercent(percent);</span><br><span class="line">        doc.add(image);</span><br><span class="line">        doc.close();</span><br><span class="line">        <span class="type">File</span> <span class="variable">pdfFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(pdfFileName);</span><br><span class="line">        <span class="keyword">return</span> pdfFile;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * 用于下载PDF文件</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pdfFile  PDF文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response HttpServletResponse</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException IO异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">downloadPdfFile</span><span class="params">(File pdfFile, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(pdfFile);</span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[fis.available()];</span><br><span class="line">        fis.read(bytes);</span><br><span class="line">        fis.close();</span><br><span class="line"></span><br><span class="line">        response.reset();</span><br><span class="line">        response.setHeader(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/pdf&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment; filename=&quot;</span> + URLEncoder.encode(pdfFile.getName(), <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">        out.write(bytes);</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 等比压缩，获取压缩百分比</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> height 图片的高度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> weight 图片的宽度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 压缩百分比</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getPercent</span><span class="params">(<span class="type">float</span> height, <span class="type">float</span> weight)</span> &#123;</span><br><span class="line">        <span class="type">float</span> <span class="variable">percent</span> <span class="operator">=</span> <span class="number">0.0F</span>;</span><br><span class="line">        <span class="keyword">if</span> (height &gt; weight) &#123;</span><br><span class="line">            percent = PageSize.A4.getHeight() / height * <span class="number">100</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            percent = PageSize.A4.getWidth() / weight * <span class="number">100</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Math.round(percent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="页面效果"><a href="#页面效果" class="headerlink" title="页面效果"></a>页面效果</h2><p><img src="/images/2020/08/20200825195615602.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>这就是系统启动之后的页面效果，虽然页面比较简陋，但是功能却没有任何折扣，有兴趣或者有需要的同学可以自己搭建一下，试一试图片转换PDF文件的效果。</p>
</blockquote>
<blockquote>
<p><strong>注意：作者自己测试了一下，普通图片基本是没有问题的，但是遇到一些特殊的图片可能会出现异常，毕竟只是一个比较简单的图片转换PDF系统，难以兼容所有图片。</strong></p>
</blockquote>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>PDF</tag>
      </tags>
  </entry>
  <entry>
    <title>Java异常try{}catch{}中的return机制</title>
    <url>/2020/03/27/java/Java%E5%BC%82%E5%B8%B8try%7B%7Dcatch%7B%7D%E4%B8%AD%E7%9A%84return%E6%9C%BA%E5%88%B6/</url>
    <content><![CDATA[<blockquote>
<p>什么是Java的异常体系？参考博客：<a href="https://blog.csdn.net/qq_45193304/article/details/104146056">Java基础——运行时异常和非运行时异常</a></p>
</blockquote>
<span id="more"></span>
<h1 id="Java异常的处理方式"><a href="#Java异常的处理方式" class="headerlink" title="Java异常的处理方式"></a>Java异常的处理方式</h1><h2 id="throw"><a href="#throw" class="headerlink" title="throw"></a>throw</h2><ul>
<li><code>throw</code>是Java中的一个关键字，可以在方法上声明抛出一个异常，如果方法体中发生了异常，那么方法会通过<code>throw</code>关键字将异常抛出。</li>
<li>Java使用throw关键字抛出异常后，会抛给调用该方法的上一层方法，如果该异常是非运行时异常，那么调用该方法的上一层方法，也需要进行异常处理，<code>throw</code>或者<code>try&#123;&#125;catch&#123;&#125;</code>。</li>
<li>如果该方法声明抛出后，方法中发生了异常，而且该方法是最顶层的方法，没有其他方法调用该方法，那么异常就会被抛给JVM，由JVM进行异常处理。</li>
</ul>
<h2 id="try-catch"><a href="#try-catch" class="headerlink" title="try{}catch{}"></a>try{}catch{}</h2><ul>
<li>在Java的异常体系之中，除了使用<code>throw</code>关键字将异常声明抛出之外，还可以使用<code>try&#123;&#125;catch&#123;&#125;</code>的方式将异常捕获。</li>
<li>Java的异常中，非运行时异常，Java代码编译规定必须进行显式处理的，要么使用<code>throw</code>进行抛出，要么就使用<code>try&#123;&#125;catch&#123;&#125;</code>进行异常的捕获。</li>
</ul>
<h1 id="try-catch-的执行顺序"><a href="#try-catch-的执行顺序" class="headerlink" title="try{}catch{}的执行顺序"></a>try{}catch{}的执行顺序</h1><h2 id="正常情况"><a href="#正常情况" class="headerlink" title="正常情况"></a>正常情况</h2><ul>
<li>如果是正常情况，代码中没有异常发生，那么代码只会执行try{}中的代码，而catch{}中的代码不会执行。<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;代码正常执行......&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;代码发生异常后执行......&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
正常情况下，以上代码的执行结果是：<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">代码正常执行......</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="发生异常"><a href="#发生异常" class="headerlink" title="发生异常"></a>发生异常</h2><ul>
<li>如果try{}中的代码发生了异常，那么发生异常前的代码会正常执行，而try{}中发生异常后的代码将不会再执行（除了<code>return</code>之外），而是执行catch{}中的代码。<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;代码正常执行......&quot;</span>);</span><br><span class="line">	<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">	System.out.println(<span class="string">&quot;代码发生异常了......&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;代码发生异常后执行......&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
发生异常的情况下，以上代码的执行结果是：<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">代码正常执行......</span><br><span class="line">代码发生异常后执行......</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="finally代码块"><a href="#finally代码块" class="headerlink" title="finally代码块"></a>finally代码块</h2></li>
<li><code>finally</code>是<code>try&#123;&#125;catch&#123;&#125;</code>体系中的一部分，全部代码书写为<code>try&#123;&#125;catch&#123;&#125;finally&#123;&#125;</code>。</li>
<li>finally代码块的特点是，无论try{}中是否发生了异常，最后都会执行finally中的代码。</li>
</ul>
<p><strong>正常情况</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;代码正常执行......&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;代码发生异常后执行......&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;finally代码块中的代码一定会执行......&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>正常情况下，以上代码的执行结果是：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">代码正常执行......</span><br><span class="line"><span class="keyword">finally</span>代码块中的代码一定会执行......</span><br></pre></td></tr></table></figure>
<p><strong>发生异常</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;代码正常执行......&quot;</span>);</span><br><span class="line">	<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">	System.out.println(<span class="string">&quot;代码发生异常了......&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;代码发生异常后执行......&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;finally代码块中的代码一定会执行......&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>发生异常的情况下，以上代码的执行结果是：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">代码正常执行......</span><br><span class="line">代码发生异常后执行......</span><br><span class="line"><span class="keyword">finally</span>代码块中的代码一定会执行......</span><br></pre></td></tr></table></figure>

<h1 id="try-catch-finally-中的return"><a href="#try-catch-finally-中的return" class="headerlink" title="try{}catch{}finally{}中的return"></a>try{}catch{}finally{}中的return</h1><blockquote>
<p>以上的情况都是方法是无返回值的情况，如果方法是有返回值的，并且在try{}catch{}finally{}中都有return，那么方法该return那个返回值呢？</p>
</blockquote>
<h2 id="return的位置"><a href="#return的位置" class="headerlink" title="return的位置"></a>return的位置</h2><p>在探索<code>try&#123;&#125;catch&#123;&#125;finally&#123;&#125;</code>中<code>return</code>的时机之前，我们先根据return的位置，定义一下<code>return</code>的类型。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;start&quot;</span>;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		<span class="type">return</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;try ruturn&quot;</span>;			<span class="comment">//这里定义为正常return</span></span><br><span class="line">	&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">		<span class="type">return</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;catch ruturn&quot;</span>;		<span class="comment">//这里定义为异常return</span></span><br><span class="line">	&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">		<span class="type">return</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;finally ruturn&quot;</span>;		<span class="comment">//这里定义为最终return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;method return&quot;</span>;					<span class="comment">//这里定义为方法return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="return的规则"><a href="#return的规则" class="headerlink" title="return的规则"></a>return的规则</h2><ul>
<li><code>最终return</code>和<code>方法return</code>是互斥的，即在一个方法中，<code>最终return</code>和<code>方法return</code>只能写一个，否则编译无法通过（或者IDE会报错）。</li>
<li>当<code>正常return</code>和<code>异常return</code>都有的时候，<code>最终return</code>可有可无，但是<code>方法return</code>一定不能有，否则报错。</li>
<li>当有<code>最终return</code>的时候，<code>正常return</code>和<code>异常return</code>可有可无。</li>
<li>当没有<code>最终return</code>的时候，要么一定要有<code>正常return</code>和<code>异常return</code>，要么一定要有<code>方法return</code>。</li>
</ul>
<h2 id="return的执行顺序"><a href="#return的执行顺序" class="headerlink" title="return的执行顺序"></a>return的执行顺序</h2><p><strong>当方法中return的时候，那么<code>try&#123;&#125;catch&#123;&#125;finally&#123;&#125;</code>中的代码顺序又该怎么执行呢？</strong></p>
<p>首先，我们来看一下代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;main:&quot;</span>+test());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;start&quot;</span>;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;try:&quot;</span> + str);</span><br><span class="line">		System.out.println(<span class="string">&quot;try is running......&quot;</span>);</span><br><span class="line">		<span class="type">return</span> <span class="variable">str</span> <span class="operator">=</span> str + <span class="string">&quot;-&gt;try return&quot;</span>;</span><br><span class="line">	&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;catch:&quot;</span> + str);</span><br><span class="line">		System.out.println(<span class="string">&quot;catch is running......&quot;</span>);</span><br><span class="line">		<span class="type">return</span> <span class="variable">str</span> <span class="operator">=</span> str + <span class="string">&quot;-&gt;catch return&quot;</span>;</span><br><span class="line">	&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;finally:&quot;</span> + str);</span><br><span class="line">		str = <span class="string">&quot;finally:&quot;</span> + str;</span><br><span class="line">		System.out.println(<span class="string">&quot;finally is running......&quot;</span>);</span><br><span class="line">		<span class="type">return</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;-&gt;finally return&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该段代码的执行结果是：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:start</span><br><span class="line"><span class="keyword">try</span> is running......</span><br><span class="line"><span class="keyword">finally</span>:start-&gt;<span class="keyword">try</span> <span class="keyword">return</span>	#这里是System.out.println(<span class="string">&quot;finally:&quot;</span> + str);的输出结果，我们发现str变成了start-&gt;<span class="keyword">try</span> <span class="keyword">return</span></span><br><span class="line"><span class="keyword">finally</span> is running......</span><br><span class="line">main:-&gt;<span class="keyword">finally</span> <span class="keyword">return</span></span><br></pre></td></tr></table></figure>

<p>如果我们去掉finally中的return的话：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;main:&quot;</span>+test());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;start&quot;</span>;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;try:&quot;</span> + str);</span><br><span class="line">		System.out.println(<span class="string">&quot;try is running......&quot;</span>);</span><br><span class="line">		<span class="type">return</span> <span class="variable">str</span> <span class="operator">=</span> str + <span class="string">&quot;-&gt;try return&quot;</span>;</span><br><span class="line">	&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;catch:&quot;</span> + str);</span><br><span class="line">		System.out.println(<span class="string">&quot;catch is running......&quot;</span>);</span><br><span class="line">		<span class="type">return</span> <span class="variable">str</span> <span class="operator">=</span> str + <span class="string">&quot;-&gt;catch return&quot;</span>;</span><br><span class="line">	&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;finally:&quot;</span> + str);</span><br><span class="line">		str = <span class="string">&quot;finally:&quot;</span> + str;</span><br><span class="line">		System.out.println(<span class="string">&quot;finally is running......&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行结果为：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:start</span><br><span class="line"><span class="keyword">try</span> is running......</span><br><span class="line"><span class="keyword">finally</span>:start-&gt;<span class="keyword">try</span> <span class="keyword">return</span> #这里是System.out.println(<span class="string">&quot;finally:&quot;</span> + str);的输出结果，我们发现str变成了start-&gt;<span class="keyword">try</span> <span class="keyword">return</span></span><br><span class="line"><span class="keyword">finally</span> is running......</span><br><span class="line">main:start-&gt;<span class="keyword">try</span> <span class="keyword">return</span>	#这里执行了<span class="keyword">finally</span>的代码，但是<span class="keyword">return</span>的结果依然是<span class="keyword">try</span>中的返回结果。</span><br></pre></td></tr></table></figure>

<h2 id="return的执行顺序分析图"><a href="#return的执行顺序分析图" class="headerlink" title="return的执行顺序分析图"></a>return的执行顺序分析图</h2><p><img src="/images/2020/03/20200327214558729.png" alt="在这里插入图片描述"><br><img src="/images/2020/03/20200327215517426.png" alt="在这里插入图片描述"><br><strong>如果try中发生异常，代码跳转至<code>catch&#123;&#125;</code>中执行，那么<code>return</code>的执行顺序和原理是和<code>try&#123;&#125;</code>中是一致的。</strong></p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven项目pom.xml project标签爆红解决方法</title>
    <url>/2020/08/19/java/Maven%E9%A1%B9%E7%9B%AEpom.xml%20project%E6%A0%87%E7%AD%BE%E7%88%86%E7%BA%A2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<p>今天在打开项目的时候，发现了一个Maven项目的问题，在Maven项目的pom.xml文件中，project标签爆出了一个错误。</p>
<span id="more"></span>

<p><img src="/images/2020/08/20200819081650697.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>‘parent.relativePath’ of POM com.hrp:springboot_jpa:1.0-SNAPSHOT (F:\IdeaCode\java-web\springboot_jpa\pom.xml) points at com.hrp:java-web instead of org.springframework.boot:spring-boot-starter-parent, please verify your project structure</p>
</blockquote>
<blockquote>
<p>POM com.hrp：springboot_jpa：1.0-SNAPSHOT（F：\ IdeaCode \ java-web \ springboot_jpa \ pom.xml）的’parent.relativePath’指向com.hrp：java-web而不是org.springframework.boot：spring -boot-starter-parent，请验证您的项目结构</p>
</blockquote>
<p>总而言之，这个问题是说在project标签下的parent.relativePath标签指向的路径出现了错误，所以导致报错。</p>
<p><strong>要解决这个问题的方法也很简单，在parent标签下添加一个<code>&lt;relativePath/&gt;</code>标签即可。</strong></p>
<p><img src="/images/2020/08/20200819082030419.png" alt="在这里插入图片描述"><br><strong>添加该标签之后，我们重新更新Maven项目，爆错就会消失了</strong></p>
<p><img src="/images/2020/08/20200819082324299.png" alt="在这里插入图片描述"></p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>IDEA</tag>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatisPlus升级3.4.3.1版本报错：MybatisConfiguration$StrictMap$Ambiguity cannot be cast to ResultMap</title>
    <url>/2021/06/29/java/MyBatisPlus%E5%8D%87%E7%BA%A73.4.3.1%E7%89%88%E6%9C%AC%E6%8A%A5%E9%94%99/</url>
    <content><![CDATA[<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><blockquote>
<p>SpringBoot 版本：2.5.2<br>项目原本的 MyBatisPlus 版本为：3.4.0，项目可以正常启动运行，但是在将 MyBatisPlus 的版本升级至 3.4.3.1之后，项目启动 MyBatisPlus 就开始报错了。</p>
</blockquote>
<span id="more"></span>

<p>报错信息较多，在这里截取其中比较重要的几段：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="number">2021</span>-<span class="number">06</span>-<span class="number">29</span> <span class="number">23</span>:<span class="number">25</span>:<span class="number">42.015</span> [main] ERROR org.mybatis.spring.mapper.MapperFactoryBean - Error <span class="keyword">while</span> adding the mapper <span class="string">&#x27;interface com.zero.auth.mapper.UserMapper&#x27;</span> to configuration.</span><br><span class="line">org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. The XML location is <span class="string">&#x27;com/zero/auth/mapper/UserMapper.xml&#x27;</span>. Cause: java.lang.ClassCastException: <span class="keyword">class</span> <span class="title class_">com</span>.baomidou.mybatisplus.core.MybatisConfiguration$StrictMap$Ambiguity cannot be cast to <span class="keyword">class</span> <span class="title class_">org</span>.apache.ibatis.mapping.ResultMap (com.baomidou.mybatisplus.core.MybatisConfiguration$StrictMap$Ambiguity and org.apache.ibatis.mapping.ResultMap are in unnamed <span class="keyword">module</span> of loader <span class="string">&#x27;app&#x27;</span>)</span><br><span class="line">	at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:<span class="number">123</span>)</span><br><span class="line">	at org.apache.ibatis.builder.xml.XMLMapperBuilder.parse(XMLMapperBuilder.java:<span class="number">95</span>)</span><br><span class="line">	at com.baomidou.mybatisplus.core.MybatisMapperAnnotationBuilder.loadXmlResource(MybatisMapperAnnotationBuilder.java:<span class="number">172</span>)</span><br><span class="line">	at com.baomidou.mybatisplus.core.MybatisMapperAnnotationBuilder.parse(MybatisMapperAnnotationBuilder.java:<span class="number">93</span>)</span><br><span class="line">	at com.baomidou.mybatisplus.core.MybatisMapperRegistry.addMapper(MybatisMapperRegistry.java:<span class="number">83</span>)</span><br><span class="line">	at com.baomidou.mybatisplus.core.MybatisConfiguration.addMapper(MybatisConfiguration.java:<span class="number">119</span>)</span><br><span class="line">	at org.mybatis.spring.mapper.MapperFactoryBean.checkDaoConfig(MapperFactoryBean.java:<span class="number">80</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Caused by: java.lang.ClassCastException: <span class="keyword">class</span> <span class="title class_">com</span>.baomidou.mybatisplus.core.MybatisConfiguration$StrictMap$Ambiguity cannot be cast to <span class="keyword">class</span> <span class="title class_">org</span>.apache.ibatis.mapping.ResultMap (com.baomidou.mybatisplus.core.MybatisConfiguration$StrictMap$Ambiguity and org.apache.ibatis.mapping.ResultMap are in unnamed <span class="keyword">module</span> of loader <span class="string">&#x27;app&#x27;</span>)</span><br><span class="line">	at com.baomidou.mybatisplus.core.MybatisConfiguration.checkGloballyForDiscriminatedNestedResultMaps(MybatisConfiguration.java:<span class="number">318</span>)</span><br><span class="line">	at com.baomidou.mybatisplus.core.MybatisConfiguration.addResultMap(MybatisConfiguration.java:<span class="number">222</span>)</span><br><span class="line">	at org.apache.ibatis.builder.MapperBuilderAssistant.addResultMap(MapperBuilderAssistant.java:<span class="number">209</span>)</span><br><span class="line">	at org.apache.ibatis.builder.ResultMapResolver.resolve(ResultMapResolver.java:<span class="number">47</span>)</span><br><span class="line">	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElement(XMLMapperBuilder.java:<span class="number">289</span>)</span><br><span class="line">	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElement(XMLMapperBuilder.java:<span class="number">254</span>)</span><br><span class="line">	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElements(XMLMapperBuilder.java:<span class="number">246</span>)</span><br><span class="line">	at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:<span class="number">119</span>)</span><br><span class="line">	... <span class="number">39</span> common frames omitted</span><br></pre></td></tr></table></figure>

<h2 id="报错信息分析"><a href="#报错信息分析" class="headerlink" title="报错信息分析"></a>报错信息分析</h2><p>在报错信息中，报告了一个 <code>java.lang.ClassCastException</code> 异常，这是 Java 中的类型转换异常。<br>具体的信息为<code>class com.baomidou.mybatisplus.core.MybatisConfiguration$StrictMap$Ambiguity cannot be cast to class org.apache.ibatis.mapping.ResultMap</code>。<br>一个 <code>MybatisConfiguration$StrictMap$Ambiguity</code> 类型的对象无法转换为 <code>ResultMap</code> 对象。</p>
<h2 id="源码分析"><a href="#源码分析" class="headerlink" title="源码分析"></a>源码分析</h2><p>经过一段时间的 Debug，最终还是定位到了原因。具体的原因可以看 MyBatisPlus 中的 <code>com.baomidou.mybatisplus.core.MybatisConfiguration#checkGloballyForDiscriminatedNestedResultMaps</code> 方法。</p>
<p><strong>以下是 MyBatisPlus 中该方法的源代码：</strong></p>
<h3 id="MyBatisPlus-3-4-0"><a href="#MyBatisPlus-3-4-0" class="headerlink" title="MyBatisPlus 3.4.0"></a>MyBatisPlus 3.4.0</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">checkGloballyForDiscriminatedNestedResultMaps</span><span class="params">(ResultMap rm)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (rm.hasNestedResultMaps()) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, ResultMap&gt; entry : resultMaps.entrySet()) &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">            <span class="keyword">if</span> (value <span class="keyword">instanceof</span> ResultMap) &#123;</span><br><span class="line">                <span class="type">ResultMap</span> <span class="variable">entryResultMap</span> <span class="operator">=</span> (ResultMap) value;</span><br><span class="line">                <span class="keyword">if</span> (!entryResultMap.hasNestedResultMaps() &amp;&amp; entryResultMap.getDiscriminator() != <span class="literal">null</span>) &#123;</span><br><span class="line">                    Collection&lt;String&gt; discriminatedResultMapNames = entryResultMap.getDiscriminator().getDiscriminatorMap().values();</span><br><span class="line">                    <span class="keyword">if</span> (discriminatedResultMapNames.contains(rm.getId())) &#123;</span><br><span class="line">                        entryResultMap.forceNestedResultMaps();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="MyBatisPlus-3-4-3-1"><a href="#MyBatisPlus-3-4-3-1" class="headerlink" title="MyBatisPlus 3.4.3.1"></a>MyBatisPlus 3.4.3.1</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">checkGloballyForDiscriminatedNestedResultMaps</span><span class="params">(ResultMap rm)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (rm.hasNestedResultMaps()) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, ResultMap&gt; entry : resultMaps.entrySet()) &#123;</span><br><span class="line">            <span class="type">ResultMap</span> <span class="variable">entryResultMap</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">            <span class="keyword">if</span> (entryResultMap != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!entryResultMap.hasNestedResultMaps() &amp;&amp; entryResultMap.getDiscriminator() != <span class="literal">null</span>) &#123;</span><br><span class="line">                    Collection&lt;String&gt; discriminatedResultMapNames = entryResultMap.getDiscriminator().getDiscriminatorMap().values();</span><br><span class="line">                    <span class="keyword">if</span> (discriminatedResultMapNames.contains(rm.getId())) &#123;</span><br><span class="line">                        entryResultMap.forceNestedResultMaps();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过上面的代码可以看到，在 <code>3.4.0</code> 版本中，Map 循环里面 getValue() 方法获取的是 Object 对象，而后有一层 <code>instanceof</code> 的安全类型检查。<br>而在 <code>3.4.3.1</code> 版本中，Map 循环直接获取的就是 <code>ResultMap</code> 对象，但是在该 Map 中存放的并不全是 <code>ResultMap</code> 对象，最终导致类型转换异常。</p>
<h3 id="泛型检查？"><a href="#泛型检查？" class="headerlink" title="泛型检查？"></a>泛型检查？</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> Map&lt;String, ResultMap&gt; resultMaps = <span class="keyword">new</span> <span class="title class_">StrictMap</span>&lt;&gt;(<span class="string">&quot;Result Maps collection&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>上面的代码中 <code>resultMaps</code>的就是<code>checkGloballyForDiscriminatedNestedResultMaps</code> 方法中循环的 <code>resultMaps</code> 对象，可以看到该 Map 对象声明了泛型，但是最终在存放元素的时候还是绕过了泛型检查。</p>
<p><code>resultMaps</code> 使用的是 MyBatisPlus 自己实现了一个 Map 类型 <code>StrictMap</code>，可以去检查一下这个类型的 <code>put</code> 方法。</p>
<h3 id="StrictMap"><a href="#StrictMap" class="headerlink" title="StrictMap"></a>StrictMap</h3><p><strong>com.baomidou.mybatisplus.core.MybatisConfiguration.StrictMap</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">class</span> <span class="title class_">StrictMap</span>&lt;V&gt; <span class="keyword">extends</span> <span class="title class_">HashMap</span>&lt;String, V&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">4950446264854982944L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line">    <span class="keyword">private</span> BiFunction&lt;V, V, String&gt; conflictMessageProducer;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StrictMap</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> StrictMap&lt;V&gt; <span class="title function_">conflictMessageProducer</span><span class="params">(BiFunction&lt;V, V, String&gt; conflictMessageProducer)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.conflictMessageProducer = conflictMessageProducer;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(String key, V value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (containsKey(key)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(name + <span class="string">&quot; already contains value for &quot;</span> + key</span><br><span class="line">                + (conflictMessageProducer == <span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : conflictMessageProducer.apply(<span class="built_in">super</span>.get(key), value)));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (useGeneratedShortKey) &#123;</span><br><span class="line">            <span class="keyword">if</span> (key.contains(<span class="string">&quot;.&quot;</span>)) &#123;</span><br><span class="line">                <span class="keyword">final</span> <span class="type">String</span> <span class="variable">shortKey</span> <span class="operator">=</span> getShortName(key);</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">super</span>.get(shortKey) == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="built_in">super</span>.put(shortKey, value);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="built_in">super</span>.put(shortKey, (V) <span class="keyword">new</span> <span class="title class_">Ambiguity</span>(shortKey));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.put(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">get</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">        <span class="type">V</span> <span class="variable">value</span> <span class="operator">=</span> <span class="built_in">super</span>.get(key);</span><br><span class="line">        <span class="keyword">if</span> (value == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(name + <span class="string">&quot; does not contain value for &quot;</span> + key);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (useGeneratedShortKey &amp;&amp; value <span class="keyword">instanceof</span> StrictMap.Ambiguity) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(((StrictMap.Ambiguity) value).getSubject() + <span class="string">&quot; is ambiguous in &quot;</span> + name</span><br><span class="line">                + <span class="string">&quot; (try using the full name including the namespace, or rename one of the entries)&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">class</span> <span class="title class_">Ambiguity</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> String subject;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Ambiguity</span><span class="params">(String subject)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.subject = subject;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getSubject</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> subject;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">getShortName</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> String[] keyParts = key.split(<span class="string">&quot;\\.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> keyParts[keyParts.length - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 <code>StrictMap</code> 重写的 <code>put</code> 方法中，有这么一段代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="built_in">super</span>.put(shortKey, (V) <span class="keyword">new</span> <span class="title class_">Ambiguity</span>(shortKey));</span><br></pre></td></tr></table></figure>
<p>将 <code>com.baomidou.mybatisplus.core.MybatisConfiguration.StrictMap.Ambiguity</code> 类型的对象强转为 Value 泛型。<br>于是，一个原本就不是 <code>ResultMap</code> 类型的对象，就这么绕过泛型检查，直接存放进入 Map 集合中。</p>
<p>然后在 MyBatisPlus 3.4.3.1 版本中，不知道哪位同学将 <code>instanceof</code> 类型检查的代码去掉了，最终导致 MyBatisPlus 在升级至 3.4.3.1 版本中之后开始报错。</p>
<h2 id="源码提交日志"><a href="#源码提交日志" class="headerlink" title="源码提交日志"></a>源码提交日志</h2><p>我去 GiHub 上查看了 MyBatisPlus 3.4.0 版本至 3.4.3.1 版本之间的升级日志，没有一条更新日志提到这个问题，我个人觉得这是一个 BUG。</p>
<h3 id="6月3号"><a href="#6月3号" class="headerlink" title="6月3号"></a>6月3号</h3><p>一位 MyBatisPlus 的维护者提交了代码，对 <code>com.baomidou.mybatisplus.core.MybatisConfiguration#checkGloballyForDiscriminatedNestedResultMaps</code> 方法进行了优化，去掉了该方法中的  <code>instanceof</code> 的安全类型检查，具体如下：</p>
<p><img src="/images/2021/06/20210630082030289.png" alt="在这里插入图片描述"></p>
<p>从这位开发者的角度我觉得这段优化完全没有问题，毕竟这个 Map 容器使用了泛型，完全可以直接返回泛型类型对象，不需要多此一举使用   <code>instanceof</code> 进行安全类型检查。<br>但是这位开发者不知道的是，在这个 Map 容器里面，重写的 put 方法完全不讲武德，对非泛型类型的对象进行强转，放入 Map 容器中。</p>
<p>这位开发者完全是遭受了无妄之灾，这应该是当初设置这个 Map 容器的这位大神的问题，既然使用了泛型进行类型编译检查，就不应该在 put 的时候进行类型强制转行。或者说，既然需要存放不一致的类型，当初设计的时候就应该将泛型设置为 <code>Object</code> 类型。</p>
<h3 id="6月15日"><a href="#6月15日" class="headerlink" title="6月15日"></a>6月15日</h3><p>MyBatisPlus 发布了 <code>3.4.3.1</code> 版本，也就是包含这个 BUG 的版本。<br><img src="/images/2021/06/20210630082559561.png" alt="在这里插入图片描述"></p>
<h3 id="6月16日"><a href="#6月16日" class="headerlink" title="6月16日"></a>6月16日</h3><p>另外一位维护者似乎意识到了这个 BUG，提交了代码对该问题进行了修复，也就是将原始代码进行了还原。</p>
<p><img src="/images/2021/06/20210630082700362.png" alt="在这里插入图片描述"></p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>根据 GitHub 上的提交记录，很明显发现，这个问题是一个版本 BUG，虽然在最新的 GiHub 仓库中问题已经被修复了，但是 <code>3.4.3.1</code> 版本中依然存在该 BUG。</p>
<p>如果你在项目中使用 MyBatisPlus 3.4.3.1 版本，出现了我博客中描述的相关问题，那就只能通过修改版本来解决了。</p>
<p>要么降回原来的版本，或者等 MyBatisPlus 发布更新的版本，解决该 BUG。</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>MyBatisPlus</tag>
      </tags>
  </entry>
  <entry>
    <title>ProtoBuf入门</title>
    <url>/2022/02/14/java/ProtoBuf%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<h2 id="什么是-ProtoBuf"><a href="#什么是-ProtoBuf" class="headerlink" title="什么是 ProtoBuf"></a>什么是 ProtoBuf</h2><p><code>protocol buffers</code> 是一种语言无关、平台无关、可扩展的序列化结构数据的方法，它可用于（数据）通信协议、数据存储等。</p>
<p><code>Protocol Buffers</code> 是一种灵活，高效，自动化机制的结构数据序列化方法－可类比 <code>XML</code>，但是比 <code>XML</code>更小（3 ~ 10倍）、更快（20 ~ 100倍）、更为简单。</p>
<p>你可以定义数据的结构，然后使用特殊生成的源代码轻松的在各种数据流中使用各种语言进行编写和读取结构数据。你甚至可以更新数据结构，而不破坏由旧数据结构编译的已部署程序。</p>
<span id="more"></span>

<blockquote>
<p><code>ProtoBuf</code> 是一种结构数据序列化的方法，类似于 <code>XML</code>、<code>Json</code> 等数据序列化格式，具有语言无关、平台无关、可扩展、灵活高效等特点。</p>
</blockquote>
<h2 id="怎么使用-ProtoBuf"><a href="#怎么使用-ProtoBuf" class="headerlink" title="怎么使用 ProtoBuf"></a>怎么使用 ProtoBuf</h2><h3 id="下载-protoc-编译器"><a href="#下载-protoc-编译器" class="headerlink" title="下载 protoc 编译器"></a>下载 protoc 编译器</h3><p>在使用 <code>ProtoBuf</code> 之前，需要先下载 <code>ProtoBuf</code> 编译器</p>
<p><strong>下载地址：</strong><a href="https://github.com/protocolbuffers/protobuf/releases">https://github.com/protocolbuffers/protobuf/releases</a></p>
<p><img src="/images/2023/02/300001.png" alt=""></p>
<p>下载之后将压缩包放置到工作目录下，并解压到当前文件夹，将 <code>bin</code> 目录下的 <code>protoc</code> 可执行文件复制到工作目录下即可。</p>
<h3 id="定义数据结构"><a href="#定义数据结构" class="headerlink" title="定义数据结构"></a>定义数据结构</h3><p><code>ProtoBuf</code> 使用 <code>.proto</code> 文件来进行数据结构的定义。</p>
<p>在 <code>protoc</code> 可执行文件的同级别目录下创建一个 <code>.proto</code> 文件，并在文件中定义数据结构。</p>
<p>例如：编写一个 <code>user.proto</code> 文件</p>
<figure class="highlight protobuf"><table><tr><td class="code"><pre><span class="line">syntax = <span class="string">&quot;proto3&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> user;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编译生成的Java可读写文件是否多文件生成</span></span><br><span class="line"><span class="keyword">option</span> java_multiple_files = <span class="literal">false</span>;</span><br><span class="line"><span class="comment">// 编译生成的Java文件的目录，该目录可以由protoc编译器自动生成</span></span><br><span class="line"><span class="keyword">option</span> java_package = <span class="string">&quot;com.herenpeng.proto&quot;</span>;</span><br><span class="line"><span class="comment">// 编译生成的Java可读写文件名称，最终Java文件路径为 com.herenpeng.proto.UserProto</span></span><br><span class="line"><span class="keyword">option</span> java_outer_classname = <span class="string">&quot;UserProto&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个User数据结构</span></span><br><span class="line"><span class="keyword">message </span><span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="type">int32</span> id = <span class="number">1</span>;     <span class="comment">// 定义一个int32类型的id属性</span></span><br><span class="line">  <span class="type">string</span> name = <span class="number">2</span>;  <span class="comment">// 定义一个string类型的name属性</span></span><br><span class="line">  <span class="type">string</span> email = <span class="number">3</span>; <span class="comment">// 定义一个string类型的email属性</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 定义一个枚举类型</span></span><br><span class="line">  <span class="keyword">enum </span><span class="title class_">PhoneType</span> &#123;</span><br><span class="line">    MOBILE = <span class="number">0</span>;</span><br><span class="line">    HOME = <span class="number">1</span>;</span><br><span class="line">    WORK = <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 定义一个手机号数据结构</span></span><br><span class="line">  <span class="keyword">message </span><span class="title class_">PhoneNumber</span> &#123;</span><br><span class="line">    <span class="type">string</span> number = <span class="number">1</span>;</span><br><span class="line">    PhoneType type = <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 定义一个PhoneNumber集合类型的phones属性</span></span><br><span class="line">  <span class="keyword">repeated</span> PhoneNumber phones = <span class="number">4</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="protoc-编译可以读写的接口文件"><a href="#protoc-编译可以读写的接口文件" class="headerlink" title="protoc 编译可以读写的接口文件"></a>protoc 编译可以读写的接口文件</h3><p>进入当前工作目录下的命令行界面，直接 <code>protoc</code> 编译命令，即可生成 <code>ProtoBuf</code> 可读写的Java接口文件。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">protoc ./user.proto --java_out=./</span><br></pre></td></tr></table></figure>



<ul>
<li>第一个参数：<code>protoc</code> 编译器可编译的 <code>.proto</code> 文件的路径。</li>
<li>第二个参数 <code>--java_out=</code>：为 <code>protoc</code> 编译器编译之后，生成的 <code>Java</code> 可读写文件的路径。（该路径需要手动创建，<code>protoc</code>无法自动创建）</li>
</ul>
<blockquote>
<p>如果在开发中需要频繁进行编译生成工作，可以考虑将命令写成一个 <code>.bat</code> 或<code>.sh</code>脚本，将输出如今直接指向项目中的包路径。如果编译输出的路径不是在项目的包下，则需要自己手动将编译生成的接口文件复制到项目对应的目录下。</p>
</blockquote>
<p>例如：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">protoc ./*.proto --java_out=../src/main/java</span><br></pre></td></tr></table></figure>



<h3 id="引入-ProtoBuf-依赖"><a href="#引入-ProtoBuf-依赖" class="headerlink" title="引入 ProtoBuf 依赖"></a>引入 ProtoBuf 依赖</h3><p>在项目中使用 <code>ProtoBuf</code> ，需要引入 <code>ProtoBuf</code>相关的依赖。</p>
<p>在引入依赖的时候需要注意一点，引入的 <code>ProtoBuf</code> 依赖的版本尽量与 <code>protoc</code> 编译器的版本保持一致，如果版本不同，可能会出现一些不兼容的情况。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.protobuf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>protobuf-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.19.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="调用接口序列化数据"><a href="#调用接口序列化数据" class="headerlink" title="调用接口序列化数据"></a>调用接口序列化数据</h3><p><code>ProtoBuf</code>可以调用 <code>Builder</code> 接口进行属性设置，属性设置完成之后则使用 <code>build()</code> 方法进行数据构造，最后使用 <code>toByteArray()</code> 生成字节数组。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">UserProto.User.<span class="type">Builder</span> <span class="variable">user</span> <span class="operator">=</span> UserProto.User.newBuilder();</span><br><span class="line">user.setId(<span class="number">1</span>);</span><br><span class="line">user.setName(<span class="string">&quot;小明&quot;</span>);</span><br><span class="line">user.setEmail(<span class="string">&quot;xiaoming@qq.com&quot;</span>);</span><br><span class="line"></span><br><span class="line">UserProto.User.PhoneNumber.<span class="type">Builder</span> <span class="variable">phoneNumber</span> <span class="operator">=</span> UserProto.User.PhoneNumber.newBuilder();</span><br><span class="line">phoneNumber.setNumber(<span class="string">&quot;18478524512&quot;</span>);</span><br><span class="line">phoneNumber.setType(UserProto.User.PhoneType.HOME);</span><br><span class="line">user.addPhones(phoneNumber);</span><br><span class="line"></span><br><span class="line">System.out.println(user.build());</span><br><span class="line">System.out.println(Arrays.toString(user.build().toByteArray()));</span><br></pre></td></tr></table></figure>



<h2 id="ProtoBuf-的优缺点"><a href="#ProtoBuf-的优缺点" class="headerlink" title="ProtoBuf 的优缺点"></a>ProtoBuf 的优缺点</h2><p><code>ProtoBuf</code>与 <code>XML</code>、<code>Json</code>都是序列化数据的方式，但是这三者直接还是有一些差异的，所使用的场景也各不相同。</p>
<ul>
<li><p><code>ProtoBuf</code> 更加注重效率，序列化之后是字节数组，数据更小、传输速率更快，但是人类可读性差。</p>
</li>
<li><p><code>XML</code> 和 <code>Json</code> 序列化之后的数据人类可读性强。</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ProtoBuf</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot配置虚拟路径映射访问磁盘中的文件</title>
    <url>/2020/02/24/java/SpringBoot%E9%85%8D%E7%BD%AE%E8%99%9A%E6%8B%9F%E8%B7%AF%E5%BE%84%E6%98%A0%E5%B0%84%E8%AE%BF%E9%97%AE%E7%A3%81%E7%9B%98%E4%B8%AD%E7%9A%84%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<p>在我们使用SpringBoot搭建项目的时候，我们可能会把一些项目的文件放在其他服务器或者硬盘中，这样可以更好的存储和管理系统的文件。<br>但是如果放在其他服务器或者硬盘中，那么我们应该如何通过项目的路径来访问这些文件呢？</p>
<span id="more"></span>
<p>很简单，我们直接在SpringBoot中配置一个虚拟路径，将硬盘的路径映射到项目路径下，这样就可以通过项目路径来访问硬盘中的资源了。</p>
<ul>
<li>项目环境请参考博文<a href="https://blog.csdn.net/qq_45193304/article/details/104443373">SpringBoot+MyBatis+通用Mapper</a>。</li>
</ul>
<p><strong>第一步</strong>：我们在G:\temp\images目录下，放置一个图片资源。<br><img src="/images/2020/02/20200224233637858.png" alt="在这里插入图片描述"></p>
<p><strong>第二步</strong>：我们在application.yml文件中配置虚拟路径的映射。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">	<span class="attr">resources:</span></span><br><span class="line">    	<span class="attr">static-locations:</span> <span class="string">file:G:\temp\images</span>   <span class="comment">#访问系统外部资源，将该目录下的文件映射到系统下</span></span><br><span class="line">    <span class="attr">mvc:</span>			</span><br><span class="line">   		<span class="attr">static-path-pattern:</span> <span class="string">/**</span>		<span class="comment">#如果你没有配置这个属性，也可以选择不配置，因为该属性的默认值就是/**</span></span><br></pre></td></tr></table></figure>
<p><strong>第三步</strong>：我们启动项目，直接通过http请求访问资源。<br><img src="/images/2020/02/202002242343056.png" alt="在这里插入图片描述"></p>
<p>我们可以在浏览器上，通过<a href="http://localhost:8080/79830b68-3936-4953-adcd-3bf39d4cb1941582526908297.jpg请求路径访问G:\temp\images下的图片资源。">http://localhost:8080/79830b68-3936-4953-adcd-3bf39d4cb1941582526908297.jpg请求路径访问G:\temp\images下的图片资源。</a></p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>Swagger报错：Unable to interpret the implicit parameter configuration with dataType</title>
    <url>/2021/01/10/java/Swagger%E6%8A%A5%E9%94%99/</url>
    <content><![CDATA[<p>在项目中使用了Swagger作为项目接口API说明文档，但是在启动项目的时候，启动日志中报了一个警告信息，虽然最终并不影响项目功能的使用，但是却依旧让人看得不舒服。</p>
<span id="more"></span>
<p>项目在启动的时候报错：</p>
<blockquote>
<p>Unable to interpret the implicit parameter configuration with dataType: , dataTypeClass: class java.lang.Void。</p>
</blockquote>
<p>翻译：</p>
<blockquote>
<p>无法使用dataType：，dataTypeClass：class java.lang.Void解释隐式参数配置</p>
</blockquote>
<p>这是因为Swagger中的注解<code>@ApiImplicitParam</code>有一个属性为dataTypeClass，该属性的默认值为Void.class，因为没有指定dataTypeClass属性的值，所以报该警告信息。</p>
<p><strong>解决方法：</strong></p>
<p>在<code>@ApiImplicitParam</code>注解上加上dataTypeClass属性的值，例如：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ApiImplicitParams(&#123;</span></span><br><span class="line"><span class="meta">        @ApiImplicitParam(name = &quot;username&quot;, value = &quot;用户名&quot;, dataTypeClass = String.class, required = true)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Swagger</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2020/03/15/java/hello-world/</url>
    <content><![CDATA[<p>欢迎来到我的博客！</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>一篇博客教会你写序列化工具</title>
    <url>/2023/02/18/java/%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%95%99%E4%BC%9A%E4%BD%A0%E5%86%99%E5%BA%8F%E5%88%97%E5%8C%96%E5%B7%A5%E5%85%B7/</url>
    <content><![CDATA[<h2 id="什么是序列化？"><a href="#什么是序列化？" class="headerlink" title="什么是序列化？"></a>什么是序列化？</h2><p>总所周知，在Java语言中，所有的数据都是以对象的形式存在Java堆中。</p>
<p>但是Java对象如果要存储在别的地方，那么单纯的Java对象就无法满足了，必须要将Java对象转为一种可以存储的格式，这个转换的过程就是序列化。</p>
<p>同理而言，将一种存储的格式转换为Java对象的过程，就是反序列化。</p>
<span id="more"></span>

<h2 id="序列化格式"><a href="#序列化格式" class="headerlink" title="序列化格式"></a>序列化格式</h2><p>序列化是一种通用的称呼，对于序列化之后转成的数据格式并没有硬性的要求，但是一般都会将格式定为字节数组，或者字符串之类通用的数据格式。</p>
<p>例如在Java中存在这样一个类：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">float</span> money;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> id, String username, String password, <span class="type">float</span> money)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">        <span class="built_in">this</span>.money = money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get、set、toString等方法省略……</span></span><br></pre></td></tr></table></figure>

<p>使用JDK自带的序列化工具，可以将这样一个Java对象转为字节数组：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>, <span class="string">&quot;次时代小羊&quot;</span>, <span class="string">&quot;222222&quot;</span>, <span class="number">99.44F</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">ByteArrayOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line"><span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(bos);</span><br><span class="line">oos.writeObject(user);</span><br><span class="line"><span class="type">byte</span>[] bytes = bos.toByteArray();</span><br><span class="line">System.out.println(<span class="string">&quot;length:&quot;</span> + bytes.length);</span><br><span class="line">System.out.println(<span class="string">&quot;bytes:&quot;</span> + Arrays.toString(bytes));</span><br></pre></td></tr></table></figure>

<p>Java对象序列化后得到的字节数组可以写入数据库，或者文件系统中，以后如果需要使用这个Java对象，可以从数据库或者文件中将字节数组读取出来，重新反序列化为Java对象：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">ByteArrayInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayInputStream</span>(bytes);</span><br><span class="line"><span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(bis);</span><br><span class="line"><span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> ois.readObject();</span><br><span class="line">System.out.println(<span class="string">&quot;object:&quot;</span> + object);</span><br></pre></td></tr></table></figure>

<p>但是JDK自带的序列化工具虽然可以将Java对象转换为字节数组，但是这个字节数组是完全按照Java的格式来序列化的，反序列化也需要使用JDK的工具才行。</p>
<p>所以这种序列化方式只能在Java语言中通用。</p>
<p>（虽然理论上别的语言平台也可以按照JDK反序列化的方式实现这个工具，但是别人可不会惯着你！）</p>
<p>即便是在Java平台内部，这种序列化方式也非常笨重，因为在这个序列化得到的字节数组中序列化了非常多的与用户数据无关的对象数据。</p>
<p>例如上述的<code>user</code>对象中，用户真正关心的数据只有四个，分别是<code>id</code>、<code>username</code>、<code>password</code>、<code>money</code>，至于Java对象内部是一些数据，并不是用户真正关心的。</p>
<p>这个时候，我们就追求一种简洁明了，而且跨平台通用的序列化格式。</p>
<h2 id="JSON序列化"><a href="#JSON序列化" class="headerlink" title="JSON序列化"></a>JSON序列化</h2><p>在Java的早起，XML作为一种可扩展标记语言，因为它的平台无关性、可扩展性、数据遵循严格的格式，人类可读等优点，得到了Java开发者的青睐。</p>
<p>早期XML在Java中大行其道，很多Java对象最终都会被序列化为XML文本存储或者转发。</p>
<p>因为其具有平台无关性，很多语言平台或第三方库也纷纷实现了XML的标准。</p>
<p>不过伴随着JSON格式的数据的崛起，JSON很快就取代了XML的地位，XML具有的优点JSON都具有，而且比XML更加简洁，文本更小。</p>
<p>使用第三方类库Jackson，将一个Java对象序列化为字符串或者字节数组：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>, <span class="string">&quot;次时代小羊&quot;</span>, <span class="string">&quot;222222&quot;</span>, <span class="number">99.44F</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"><span class="type">byte</span>[] bytes1 = objectMapper.writeValueAsBytes(user);</span><br><span class="line">System.out.println(<span class="string">&quot;length:&quot;</span> + bytes1.length);</span><br><span class="line">System.out.println(<span class="string">&quot;bytes:&quot;</span> + Arrays.toString(bytes1));</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> objectMapper.writeValueAsString(user);</span><br><span class="line">System.out.println(<span class="string">&quot;length:&quot;</span> + json.length());</span><br><span class="line">System.out.println(<span class="string">&quot;json:&quot;</span> + json);</span><br></pre></td></tr></table></figure>

<p>Jackson序列化得到的字符串或者字节数组，同样可以存储到数据库，或者通过网络转发出去，并被支持JSON格式的语言平台解析。</p>
<blockquote>
<p>Jackson序列化为字符串和字节数组本质上并没有区别，序列化为字节数组，其实就是将序列化得到的字符串转为字节数组。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> objectMapper.readValue(bytes1, User.class);</span><br><span class="line">System.out.println(<span class="string">&quot;user1:&quot;</span> + user1);</span><br><span class="line"><span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> objectMapper.readValue(json, User.class);</span><br><span class="line">System.out.println(<span class="string">&quot;user2:&quot;</span> + user2);</span><br></pre></td></tr></table></figure>

<p>JSON序列化是目前一种比较理想的序列化方式，各种语言平台，甚至是数据库都对JSON格式的数据有支持。</p>
<h2 id="精简序列化数据"><a href="#精简序列化数据" class="headerlink" title="精简序列化数据"></a>精简序列化数据</h2><p>我们先来看一下使用Jackson序列化得到的字符串和字节数组数据：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span><span class="attr">&quot;username&quot;</span><span class="punctuation">:</span><span class="string">&quot;次时代小羊&quot;</span><span class="punctuation">,</span><span class="attr">&quot;password&quot;</span><span class="punctuation">:</span><span class="string">&quot;222222&quot;</span><span class="punctuation">,</span><span class="attr">&quot;money&quot;</span><span class="punctuation">:</span><span class="number">99.44</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<table>
    <tr>
        <td>123</td>
        <td>34</td>
        <td>105</td>
        <td>100</td>
        <td>34</td>
        <td>58</td>
        <td>49</td>
        <td>44</td>
        <td>34</td>
        <td>117</td>
    </tr>
    <tr>
        <td>{</td>
        <td>"</td>
        <td>i</td>
        <td>d</td>
        <td>"</td>
        <td>:</td>
        <td>1</td>
        <td>,</td>
        <td>"</td>
        <td>u</td>
    </tr>
    <tr>
        <td>115</td>
        <td>101</td>
        <td>114</td>
        <td>110</td>
        <td>97</td>
        <td>109</td>
        <td>101</td>
        <td>34</td>
        <td>58</td>
        <td>34</td>
    </tr>
    <tr>
        <td>s</td>
        <td>e</td>
        <td>r</td>
        <td>n</td>
        <td>a</td>
        <td>m</td>
        <td>e</td>
        <td>"</td>
        <td>:</td>
        <td>"</td>
    </tr>
    <tr>
        <td>-26</td>
        <td>-84</td>
        <td>-95</td>
        <td>-26</td>
        <td>-105</td>
        <td>-74</td>
        <td>-28</td>
        <td>-69</td>
        <td>-93</td>
        <td>-27</td>
    </tr>
    <tr>
        <td colspan="3">次</td>
        <td colspan="3">时</td>
        <td colspan="3">代</td>
        <td></td>
    </tr>
    <tr>
        <td>-113</td>
        <td>-84</td>
        <td>-25</td>
        <td>-66</td>
        <td>-118</td>
        <td>34</td>
        <td>44</td>
        <td>34</td>
        <td>112</td>
        <td>97</td>
    </tr>
    <tr>
        <td colspan="2">小</td>
        <td colspan="3">羊</td>
        <td>"</td>
        <td>,</td>
        <td>"</td>
        <td>p</td>
        <td>a</td>
    </tr>
    <tr>
        <td>115</td>
        <td>115</td>
        <td>119</td>
        <td>111</td>
        <td>114</td>
        <td>100</td>
        <td>34</td>
        <td>58</td>
        <td>34</td>
        <td>50</td>
    </tr>
    <tr>
        <td>s</td>
        <td>s</td>
        <td>w</td>
        <td>o</td>
        <td>r</td>
        <td>d</td>
        <td>"</td>
        <td>:</td>
        <td>"</td>
        <td>2</td>
    </tr>
    <tr>
        <td>50</td>
        <td>50</td>
        <td>50</td>
        <td>50</td>
        <td>50</td>
        <td>34</td>
        <td>44</td>
        <td>34</td>
        <td>109</td>
        <td>111</td>
    </tr>
    <tr>
        <td>2</td>
        <td>2</td>
        <td>2</td>
        <td>2</td>
        <td>2</td>
        <td>"</td>
        <td>,</td>
        <td>"</td>
        <td>m</td>
        <td>o</td>
    </tr>
    <tr>
        <td>110</td>
        <td>101</td>
        <td>121</td>
        <td>34</td>
        <td>58</td>
        <td>57</td>
        <td>57</td>
        <td>46</td>
        <td>52</td>
        <td>52</td>
    </tr>
    <tr>
        <td>n</td>
        <td>e</td>
        <td>y</td>
        <td>"</td>
        <td>:</td>
        <td>9</td>
        <td>9</td>
        <td>.</td>
        <td>4</td>
        <td>4</td>
    </tr>
    <tr>
        <td>125</td>
    </tr>
    <tr>
        <td>}</td>
    </tr>
</table>


<p>以上就是使用Jackson序列化得到的字符串，以及字节数组和字符串字符的对应表，其中中文字符使用三个字节表示。</p>
<p>按照上面的对照表，我们可以知道序列化为字节数组的时候，JSON格式的字符串都序列化了哪些内容。</p>
<p>而我们前面也说过，用户真正关心的数据只有四个，分别是<code>id</code>、<code>username</code>、<code>password</code>、<code>money</code>，而这四个数据的名称（字段名）对于数据本身而言，只是做一个定位的作用。</p>
<p>如果我们可以预先确定序列化数据的字段顺序，而后反序列化的时候也已同样的顺序进行解析，是否就能够抛弃JSON格式中的字段名称，只将数据本身进行序列化？</p>
<p>比如将JSON格式的字符串缩减成下面的形式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>次时代小羊<span class="number">22222299.44</span></span><br></pre></td></tr></table></figure>

<p>但是这也有一个问题，那就是我们无法确定每个数据的长度，比如<code>username</code>这个字段，它对应的值到底是<code>次时代小羊</code>，还是<code>次时代小羊222222</code>，甚至可能还是<code>次时代小羊22222299.44</code>？</p>
<p>所以为了确定数据的长度，我们还必须加入数据的长度作为表示，因为数据的长度都可以使用整形类型的数据进行表示。</p>
<p>比如我们可以约定，字符开始的第一个小于等于9的数字为数据长度，我们这样就可以很清晰的定位并分隔数据。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="number">115</span>次时代小羊<span class="number">6222222599.44</span></span><br></pre></td></tr></table></figure>

<p>当然，这只是字符串可以这样表示，如果使用字节数组，那么我们可以根据单个数据的最大字节数，约定<code>byte</code>或者<code>int</code>类型的数据来表示长度。</p>
<blockquote>
<p><code>byte</code>支持单个数据的字节数组长度为255（2 ^ 8-1），<code>int</code>支持单个数据的字节数组长度为4294967295（2 ^ 32-1），因为数据长度只可能为正整数，所以使用无符号数可以最大程度支持。</p>
</blockquote>
<p>而且一些特定类型的数据长度我们可以不需要确定，一些语言平台已经规定了这些数据类型的字节长度，比如在Java语言中，<code>int</code>、<code>float</code>类型的数据长度为4，那么我们只需要规定一些不确定的数据的字节长度即可，比如字符串类型，字节数组类型等等。</p>
<p>我们可以重新设计简化格式：</p>
<table>
<thead>
<tr>
<th>长度</th>
<th>数据</th>
<th>类型</th>
<th>是否需要确定数据长度</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>4</td>
<td>1</td>
<td>int</td>
<td>语言平台规定，不需要</td>
<td>int类型的数据字节长度为4</td>
</tr>
<tr>
<td>15</td>
<td>次时代小羊</td>
<td>字符串</td>
<td>需要</td>
<td>UTF-8编码下一个中文字节长度为3（或者4）</td>
</tr>
<tr>
<td>6</td>
<td>222222</td>
<td>字符串</td>
<td>需要</td>
<td>UTF-8编码兼容ASCII编码，所以长度为6</td>
</tr>
<tr>
<td>4</td>
<td>99.44</td>
<td>float</td>
<td>语言平台规定，不需要</td>
<td>float类型的数据字节长度为4</td>
</tr>
</tbody></table>
<p>数据总长度为29，加上一共四个数据，每个数据对应的字节数组长度各占一个<code>int</code>类型数据的字节长度，所以最终长度为37（29+4+4）。</p>
<p>最终得到序列化后的字节数组：</p>
<table>
    <tr>
        <td>1</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>15</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
    </tr>
    <tr>
        <td colspan="4">1</td>
        <td colspan="4">15</td>
    </tr>
    <tr>
        <td>-26</td>
        <td>-84</td>
        <td>-95</td>
        <td>-26</td>
        <td>-105</td>
        <td>-74</td>
        <td>-28</td>
        <td>-69</td>
    </tr>
    <tr>
        <td colspan="3">次</td>
        <td colspan="3">时</td>
        <td colspan="2">代</td>
    </tr>
    <tr>
        <td>-93</td>
        <td>-27</td>
        <td>-80</td>
        <td>-113</td>
        <td>-25</td>
        <td>-66</td>
        <td>-118</td>
        <td>6</td>
    </tr>
    <tr>
        <td></td>
        <td colspan="3">小</td>
        <td colspan="3">羊</td>
        <td>6</td>
    </tr>
    <tr>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>50</td>
        <td>50</td>
        <td>50</td>
        <td>50</td>
        <td>50</td>
    </tr>
    <tr>
        <td colspan="3"></td>
        <td>2</td>
        <td>2</td>
        <td>2</td>
        <td>2</td>
        <td>2</td>
    </tr>
    <tr>
        <td>50</td>
        <td>72</td>
        <td>-31</td>
        <td>-58</td>
        <td>66</td>
    </tr>
    <tr>
        <td>2</td>
        <td colspan="4">99.44</td>
    </tr>
</table>

<p>得到序列化后的字节数组之后，反序列化只需要按照原定的顺序，即可正确读取数据。</p>
<p>比如：</p>
<ul>
<li><p>1、读取int类型的字段<code>id</code>数据，得到数据值：1</p>
</li>
<li><p>2、读取字符串类型的字段<code>username</code>数据对应的字节数组长度，得到数据值：15</p>
<ul>
<li>2.1、向后读取长度为15的字节数组，得到数据值：次时代小羊</li>
</ul>
</li>
<li><p>3、读取字符串类型的字段<code>password</code>数据对应的字节数组长度，得到数据值：6</p>
<ul>
<li>3.1、向后读取长度为6的字节数组，得到数据值：222222</li>
</ul>
</li>
<li><p>4、读取float类型的字段<code>money</code>数据，得到数据值：99.44</p>
</li>
</ul>
<p>至此，精简序列化数据的方式都可以正确序列化和反序列化，而且序列化得到的字节数组长度更小。</p>
<p>Google的<code>ProtoBuf</code>和开源的<code>MessagePack</code>其实都是使用了类似的精简序列化的方式，不过这些开源的序列化框架更加成熟可靠，内部的实现细节也更加全面。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>以上三种序列化方式，各有优点，也各有缺点，我们在这里总结一下：</p>
<table>
<thead>
<tr>
<th>序列化方式</th>
<th>JDK序列化</th>
<th>JSON序列化</th>
<th>精简序列化</th>
</tr>
</thead>
<tbody><tr>
<td>序列化结果</td>
<td>字节数组</td>
<td>字符串或者字节数组</td>
<td>字节数组</td>
</tr>
<tr>
<td>是否支持跨平台</td>
<td>不支持</td>
<td>支持</td>
<td>支持</td>
</tr>
<tr>
<td>是否需要额外约定</td>
<td>不需要</td>
<td>不需要</td>
<td>需要</td>
</tr>
<tr>
<td>人类可读性</td>
<td>差</td>
<td>优秀</td>
<td>差</td>
</tr>
<tr>
<td>优点</td>
<td>JDK自带，无需第三方依赖，对Java语言开发者友好</td>
<td>全平台通用，序列化结果简洁工整，人类可读性强</td>
<td>全平台通用，序列化结果精简</td>
</tr>
<tr>
<td>缺点</td>
<td>只支持JDK平台，序列化结果笨重</td>
<td>一些语言平台不支持JSON格式，需要第三方库</td>
<td>扩展性较差，在需要改动序列化对象的时候，序列化和反序列化方式也需要同时改动</td>
</tr>
</tbody></table>
<p>以上三种序列化方式的优缺点已经一一列名，我们可以根据自身需要进行选择。</p>
<p>如果你进行的是一些通信软件、游戏等等对网络性能要求高，且通信格式并不会发生重大改变的开发工作，那么可以考虑选择第三种精简序列化的方式，开源平台上也有很多这种类型的序列化框架的实现，比如前面提到过的<code>ProtoBuf</code>和<code>MessagePack</code>等等。</p>
<p>如果你进行是一些Web网站等一些扩展性要求较高的开发工作，那么建议选择JSON序列化的方式，即便是一些不支持<code>JSON</code>格式的语言平台，同样有很多优秀的第三方库对其进行了支持，比如<code>Jackson</code>等等。</p>
<p>至于JDK序列化的方式，如果你有兴趣，或者开发的项目本身不支持其他序列化方式，那么也是一个不错的选择<del>~</del></p>
<h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><p>在文章的最后，我在这里附上一个本人使用<code>Java</code>写的简单的序列化工具，有兴趣的同学可以参考一下。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bytes</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">ONE_LENGTH</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">TWO_LENGTH</span> <span class="operator">=</span> ONE_LENGTH &lt;&lt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">FOUR_LENGTH</span> <span class="operator">=</span> ONE_LENGTH &lt;&lt; <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">EIGHT_LENGTH</span> <span class="operator">=</span> ONE_LENGTH &lt;&lt; <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">byte</span> <span class="variable">BOOLEAN_TRUE</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">byte</span> <span class="variable">BOOLEAN_FALSE</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">byte</span>[] data;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> readIndex;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> writeIndex;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Bytes</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.readIndex = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">this</span>.writeIndex = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Bytes</span><span class="params">(<span class="type">byte</span>[] bytes)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = bytes;</span><br><span class="line">        <span class="built_in">this</span>.readIndex = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">this</span>.writeIndex = bytes.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] getData() &#123;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span> <span class="title function_">readByte</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">byte</span> <span class="variable">value</span> <span class="operator">=</span> data[readIndex];</span><br><span class="line">        readIndex += ONE_LENGTH;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">short</span> <span class="title function_">readShort</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">short</span> <span class="variable">value</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; TWO_LENGTH; i++) &#123;</span><br><span class="line">            value = (<span class="type">short</span>) (value | (data[i + readIndex] &amp; <span class="number">0xFF</span>) &lt;&lt; i * <span class="number">8</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        readIndex += TWO_LENGTH;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">readInt</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; FOUR_LENGTH; i++) &#123;</span><br><span class="line">            value = value | (data[i + readIndex] &amp; <span class="number">0xFF</span>) &lt;&lt; i * <span class="number">8</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        readIndex += FOUR_LENGTH;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">readLong</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">value</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; EIGHT_LENGTH; i++) &#123;</span><br><span class="line">            value = value | (data[i + readIndex] &amp; <span class="number">0xFFL</span>) &lt;&lt; i * <span class="number">8</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        readIndex += EIGHT_LENGTH;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">readBoolean</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">byte</span> <span class="variable">value</span> <span class="operator">=</span> data[readIndex];</span><br><span class="line">        readIndex += ONE_LENGTH;</span><br><span class="line">        <span class="keyword">return</span> value == BOOLEAN_TRUE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">char</span> <span class="title function_">readChar</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">char</span> <span class="variable">value</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; TWO_LENGTH; i++) &#123;</span><br><span class="line">            value += data[i + readIndex] &lt;&lt; i * <span class="number">8</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        readIndex += TWO_LENGTH;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">float</span> <span class="title function_">readFloat</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">intValue</span> <span class="operator">=</span> readInt();</span><br><span class="line">        <span class="keyword">return</span> Float.intBitsToFloat(intValue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">readDouble</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">longValue</span> <span class="operator">=</span> readLong();</span><br><span class="line">        <span class="keyword">return</span> Double.longBitsToDouble(longValue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] readBytes(<span class="type">int</span> length) &#123;</span><br><span class="line">        <span class="type">byte</span>[] tempBytes = <span class="keyword">new</span> <span class="title class_">byte</span>[length];</span><br><span class="line">        System.arraycopy(data, readIndex, tempBytes, <span class="number">0</span>, length);</span><br><span class="line">        readIndex += length;</span><br><span class="line">        <span class="keyword">return</span> tempBytes;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeByte</span><span class="params">(<span class="type">byte</span> value)</span> &#123;</span><br><span class="line">        expansion(ONE_LENGTH);</span><br><span class="line">        data[writeIndex] = value;</span><br><span class="line">        writeIndex += ONE_LENGTH;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeShort</span><span class="params">(<span class="type">short</span> value)</span> &#123;</span><br><span class="line">        expansion(TWO_LENGTH);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; TWO_LENGTH; i++) &#123;</span><br><span class="line">            data[i + writeIndex] = (<span class="type">byte</span>) (value &gt;&gt; i * <span class="number">8</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        writeIndex += TWO_LENGTH;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeInt</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        expansion(FOUR_LENGTH);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; FOUR_LENGTH; i++) &#123;</span><br><span class="line">            data[i + writeIndex] = (<span class="type">byte</span>) (value &gt;&gt; i * <span class="number">8</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        writeIndex += FOUR_LENGTH;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeLong</span><span class="params">(<span class="type">long</span> value)</span> &#123;</span><br><span class="line">        expansion(EIGHT_LENGTH);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; EIGHT_LENGTH; i++) &#123;</span><br><span class="line">            data[i + writeIndex] = (<span class="type">byte</span>) (value &gt;&gt; i * <span class="number">8</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        writeIndex += EIGHT_LENGTH;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeBoolean</span><span class="params">(<span class="type">boolean</span> value)</span> &#123;</span><br><span class="line">        expansion(ONE_LENGTH);</span><br><span class="line">        data[writeIndex] = value ? BOOLEAN_TRUE : BOOLEAN_FALSE;</span><br><span class="line">        writeIndex += ONE_LENGTH;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeChar</span><span class="params">(<span class="type">char</span> value)</span> &#123;</span><br><span class="line">        expansion(TWO_LENGTH);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; TWO_LENGTH; i++) &#123;</span><br><span class="line">            data[i + writeIndex] = (<span class="type">byte</span>) (value &gt;&gt; i * <span class="number">8</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        writeIndex += TWO_LENGTH;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeFloat</span><span class="params">(<span class="type">float</span> value)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">intValue</span> <span class="operator">=</span> Float.floatToIntBits(value);</span><br><span class="line">        writeInt(intValue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeDouble</span><span class="params">(<span class="type">double</span> value)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">longValue</span> <span class="operator">=</span> Double.doubleToLongBits(value);</span><br><span class="line">        writeLong(longValue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeBytes</span><span class="params">(<span class="type">byte</span>[] bytes)</span> &#123;</span><br><span class="line">        expansion(bytes.length);</span><br><span class="line">        System.arraycopy(bytes, <span class="number">0</span>, data, writeIndex, bytes.length);</span><br><span class="line">        writeIndex += bytes.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">expansion</span><span class="params">(<span class="type">int</span> length)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.data == <span class="literal">null</span>) &#123;</span><br><span class="line">            data = <span class="keyword">new</span> <span class="title class_">byte</span>[length];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">byte</span>[] tempBytes = <span class="keyword">new</span> <span class="title class_">byte</span>[data.length + length];</span><br><span class="line">            System.arraycopy(data, <span class="number">0</span>, tempBytes, <span class="number">0</span>, data.length);</span><br><span class="line">            data = tempBytes;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再附带上一份序列化的代码。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1</span>, <span class="string">&quot;次时代小羊&quot;</span>, <span class="string">&quot;222222&quot;</span>, <span class="number">99.44F</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Bytes</span> <span class="variable">bytes3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bytes</span>();</span><br><span class="line">bytes3.writeInt(user.getId());</span><br><span class="line"><span class="type">byte</span>[] usernameByte = user.getUsername().getBytes(StandardCharsets.UTF_8);</span><br><span class="line">bytes3.writeInt(usernameByte.length);</span><br><span class="line">bytes3.writeBytes(usernameByte);</span><br><span class="line"><span class="type">byte</span>[] passwordByte = user.getPassword().getBytes(StandardCharsets.UTF_8);</span><br><span class="line">bytes3.writeInt(passwordByte.length);</span><br><span class="line">bytes3.writeBytes(passwordByte);</span><br><span class="line">bytes3.writeFloat(user.getMoney());</span><br><span class="line">System.out.println(<span class="string">&quot;length:&quot;</span> + bytes3.getData().length);</span><br><span class="line">System.out.println(<span class="string">&quot;bytes:&quot;</span> + Arrays.toString(bytes3.getData()));</span><br><span class="line"></span><br><span class="line"><span class="type">User</span> <span class="variable">user3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">user3.setId(bytes3.readInt());</span><br><span class="line"><span class="type">int</span> <span class="variable">usernameBytesLength</span> <span class="operator">=</span> bytes3.readInt();</span><br><span class="line">user3.setUsername(<span class="keyword">new</span> <span class="title class_">String</span>(bytes3.readBytes(usernameBytesLength)));</span><br><span class="line"><span class="type">int</span> <span class="variable">passwordBytesLength</span> <span class="operator">=</span> bytes3.readInt();</span><br><span class="line">user3.setPassword(<span class="keyword">new</span> <span class="title class_">String</span>(bytes3.readBytes(passwordBytesLength)));</span><br><span class="line">user3.setMoney(bytes3.readFloat());</span><br><span class="line">System.out.println(<span class="string">&quot;user3:&quot;</span> + user3);</span><br></pre></td></tr></table></figure>

<p>最后的最后，瑞思拜<del>~</del></p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>上班聊天，摸鱼神器，手写一款即时通讯工具（附源码！！！）</title>
    <url>/2021/08/07/java/%E4%B8%8A%E7%8F%AD%E8%81%8A%E5%A4%A9%EF%BC%8C%E6%91%B8%E9%B1%BC%E7%A5%9E%E5%99%A8%EF%BC%8C%E6%89%8B%E5%86%99%E4%B8%80%E6%AC%BE%E5%8D%B3%E6%97%B6%E9%80%9A%E8%AE%AF%E5%B7%A5%E5%85%B7%EF%BC%88%E9%99%84%E6%BA%90%E7%A0%81%EF%BC%81%EF%BC%81%EF%BC%81%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>认真工作不叫做赚钱，那叫做用劳动换取报酬，上班摸鱼才是真的赚钱。</p>
</blockquote>
<span id="more"></span>

<p><img src="/images/2023/02/100002.gif" alt="img"></p>
<h1 id="即时通讯工具"><a href="#即时通讯工具" class="headerlink" title="即时通讯工具"></a>即时通讯工具</h1><p>如果上班有空闲时间，最喜欢做的事情自然是和熟悉的朋友一起聊聊天，互相吐槽工作中遇到的人和事，缓解工作的压力。</p>
<p>如果直接在桌面上打开 QQ 或者微信，那目标无疑是巨大的，QQ 和微信的桌面客户端明晃晃地占据整个电脑桌面，只要有同事或者领导从你身边经过，或是在你后面看一眼，就立刻能够知道你在上班摸鱼，那场面不亚于公开处刑…… (＠_＠)</p>
<blockquote>
<p>领导：看来工作还是不饱和啊 ┑(￣Д ￣)┍</p>
</blockquote>
<p>针对这种情况，技术人自然不甘落后，总是可以想出各种方法躲避同事和领导发现你在上班摸鱼 ≡ω≡</p>
<p>思量再三，最终还是放弃了 IDEA 的各种插件，转而决定还是自己手写一款简易的即时通信工具。</p>
<p>既然要自己动手，那自然也要先对这款即时通讯工具做个简单的规划。</p>
<ul>
<li>这款即时通讯工具分为客户端和服务端的，每个用户可以使用客户端进行即时通讯。</li>
<li>通讯工具尽可能简单，只依赖于 JDK，即完全使用 Java 网络编程功能实现，不依赖其他的第三方库。</li>
<li>通讯工具不需要桌面，使用 Java 自带的 Scanner 控制台输入即可。</li>
</ul>
<p>这样一款基于 Java 网络编程的即时通讯工具，只要在 IDEA 运行客户端代码，即可在控制台与其他朋友快乐地聊天。只要不是同事或者领导贴着你的电脑屏幕观看，他绝对想不到你是在使用 IDEA 上班摸鱼聊天。</p>
<p><img src="/images/2023/02/100001.jpg" alt="img"></p>
<h1 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h1><p>客户端是给使用这款即时通讯工具的用户使用的，从安全和用户体验的角度上来说，客户端应该尽可能精简，只负责发送和接受数据即可。</p>
<p>因为这是一款即时通讯工具，客户端需要做的有两件事：</p>
<ul>
<li>监听客户端的输入和发送。</li>
<li>监听服务端发送过来的消息。</li>
</ul>
<p>因为我们使用 JDK 自带的 Scanner 类来进行客户端的输入，而这个输入是一个阻塞的操作，所以我们需要创建一条额外的线程来进行服务端的监听工作。</p>
<p>客户端需要两条用户线程：</p>
<ul>
<li>main 线程用来监听客户端的输入和发送。</li>
<li>另外创建一条线程用来监听服务端的消息发送。</li>
</ul>
<p>思路已经设计好了，可以使用代码来实现了：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 聊天室客户端</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> herenpeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2021-07-09 12:00:00</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChatClient</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> (<span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">12345</span>)) &#123;</span><br><span class="line">            <span class="comment">// 读取服务端发的消息</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; readMsg(socket)).start();</span><br><span class="line">            <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">            <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">            System.out.println(<span class="string">&quot;请输入您的聊天室昵称：&quot;</span>);</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">chat</span> <span class="operator">=</span> scanner.next();</span><br><span class="line">                System.out.println(<span class="string">&quot;---------------------------&quot;</span>);</span><br><span class="line">                os.write(chat.getBytes());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;【系统消息】聊天室炸了，BUG之神降临了&quot;</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.exit(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">readMsg</span><span class="params">(Socket socket)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">                <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">                <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> is.read(bytes);</span><br><span class="line">                System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(bytes, <span class="number">0</span>, len));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;【系统消息】你已退出聊天室，开始认真工作吧&quot;</span>);</span><br><span class="line">            System.exit(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h1><p>服务端的设计比客户端要困难很多，为了便于开发和理解，我直接使用了 Java 阻塞式的网络 IO 来进行实现，即每一个客户端连接都创建一个线程来进行处理。</p>
<p>这种阻塞式的网络 IO 的<strong>好处</strong>在于便于理解和开发，而<strong>缺点</strong>也非常明显，因为这是一个通讯工具，即每一个链接都是长链接。</p>
<p>即每个客户端用户链接服务端后，都会在服务端专门有一个线程处理这个客户端相关的网络 IO 操作。如果用户量少的情况下还比较好，但是用户一旦多了起来，服务端将会创建 N 多个线程，而且在客户端不主动断开的情况下，服务器这些线程会一直占用服务器资源，服务器将会消费非常大的资源，而且很容易崩溃。</p>
<blockquote>
<p>基于这种情况，我后面也实现了一个 Java NIO 版本的客户端和服务端，在文章末尾也会一起附上源码。</p>
</blockquote>
<p><img src="/images/2023/02/100003.jpg" alt="img"></p>
<p>我将服务端的操作分为两个步骤：</p>
<h2 id="1、链接"><a href="#1、链接" class="headerlink" title="1、链接"></a>1、链接</h2><p>服务端阻塞地等待客户端的链接请求。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 聊天室服务端</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> herenpeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2021-07-09 12:00:00</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChatServer</span> &#123;</span><br><span class="line">    </span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 启动类</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args 启动参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException 抛出IO异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">12345</span>);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; start(server)).start();</span><br><span class="line">        <span class="comment">// 加载配置</span></span><br><span class="line">        CHAT_CFG_RELOAD_PASSWORD = UUID.randomUUID().toString();</span><br><span class="line">        logInfo(<span class="string">&quot;【系统消息】聊天室配置加载密钥：&quot;</span> + CHAT_CFG_RELOAD_PASSWORD);</span><br><span class="line">        reloadChatCfg(args.length == <span class="number">1</span> ? args[<span class="number">0</span>] : <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        logInfo(<span class="string">&quot;【系统消息】聊天室启动成功了！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 服务开始方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> server 服务对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">(ServerSocket server)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="comment">// 链接操作</span></span><br><span class="line">                <span class="type">ChatSocket</span> <span class="variable">chatSocket</span> <span class="operator">=</span> connection(server);</span><br><span class="line">                <span class="comment">// 登录操作</span></span><br><span class="line">                login(chatSocket);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            logInfo(<span class="string">&quot;【系统消息】聊天室发生了异常……&quot;</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            logInfo(<span class="string">&quot;【系统消息】正在关闭聊天室资源……&quot;</span>);</span><br><span class="line">            close(server);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 链接客户端</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> server 服务对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ChatSocket 对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException 抛出异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ChatSocket <span class="title function_">connection</span><span class="params">(ServerSocket server)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> server.accept();</span><br><span class="line">        <span class="type">ChatSocket</span> <span class="variable">chatSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ChatSocket</span>(socket);</span><br><span class="line">        userDB.add(chatSocket);</span><br><span class="line">        sendMsgToUser(socket, <span class="string">&quot;============================\n&quot;</span> +</span><br><span class="line">                      <span class="string">&quot;1、本聊天室仅为娱乐，请勿在该聊天室内谈论敏感内容，比如涉政，涉黄，账号密码等等！\n&quot;</span> +</span><br><span class="line">                      <span class="string">&quot;2、聊天室内容明文传输，聊天信息泄露本聊天室概不负责！\n&quot;</span> +</span><br><span class="line">                      <span class="string">&quot;3、本聊天室内容后台不做任何存储，聊天信息如果需要请自行保留！\n&quot;</span> +</span><br><span class="line">                      <span class="string">&quot;4、最终解释权归本聊天室所有！\n&quot;</span> +</span><br><span class="line">                      <span class="string">&quot;============================&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> chatSocket;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存所有用户socket的集合</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> List&lt;ChatSocket&gt; userDB = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="2、登录"><a href="#2、登录" class="headerlink" title="2、登录"></a>2、登录</h2><p>服务端获取到客户端请求后，将 <code>Socket</code> 包装为我们自定义的 <code>ChatSocket</code>，便于我们进行登录操作。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用户登录方法</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> chatSocket ChatSocket 对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">login</span><span class="params">(ChatSocket chatSocket)</span> &#123;</span><br><span class="line">    <span class="comment">// 给每个用户一个线程处理</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> chatSocket.getSocket();</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">            <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> readMsg(is, bytes);</span><br><span class="line">            <span class="keyword">if</span> (len == -<span class="number">1</span>) &#123;</span><br><span class="line">                logout(chatSocket);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            username = <span class="keyword">new</span> <span class="title class_">String</span>(bytes, <span class="number">0</span>, len);</span><br><span class="line">            chatSocket.setUsername(username);</span><br><span class="line">            <span class="comment">// 刷新配置</span></span><br><span class="line">            <span class="keyword">if</span> (CHAT_CFG_RELOAD_PASSWORD.equals(username)) &#123;</span><br><span class="line">                reloadChatCfg(is, bytes, socket);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            loginTip(username, socket);</span><br><span class="line">            <span class="comment">// 机器人欢迎</span></span><br><span class="line">            robotWelcome(username);</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                len = readMsg(is, bytes);</span><br><span class="line">                <span class="keyword">if</span> (len == -<span class="number">1</span>) &#123;</span><br><span class="line">                    logout(chatSocket);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(bytes, <span class="number">0</span>, len);</span><br><span class="line">                sendMsgToOtherUser(username, socket, msg);</span><br><span class="line">                <span class="comment">// 机器人回复消息</span></span><br><span class="line">                randomRobotReply(msg);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                logout(chatSocket);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">                remove(socket);</span><br><span class="line">                ex.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="3、其他方法"><a href="#3、其他方法" class="headerlink" title="3、其他方法"></a>3、其他方法</h2><h3 id="3-1、读取客户端的消息"><a href="#3-1、读取客户端的消息" class="headerlink" title="3.1、读取客户端的消息"></a>3.1、读取客户端的消息</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 读取消息的方法</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> is    输入流</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> bytes 字节数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 读取的长度</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">readMsg</span><span class="params">(InputStream is, <span class="type">byte</span>[] bytes)</span> &#123;</span><br><span class="line">    <span class="type">int</span> len;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        len = is.read(bytes);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> len;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3-2、给客户端发送消息"><a href="#3-2、给客户端发送消息" class="headerlink" title="3.2、给客户端发送消息"></a>3.2、给客户端发送消息</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 给所有的用户发送系统消息</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> msg 系统消息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException 抛出异常</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sendSysMsg</span><span class="params">(String msg)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="keyword">for</span> (ChatSocket chatSocket : userDB) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sysMsg</span> <span class="operator">=</span> getCurrentTime() + <span class="string">&quot;\n&quot;</span> + msg + <span class="string">&quot;\n&quot;</span> + chatSeparate;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> chatSocket.getSocket();</span><br><span class="line">        sendMsgToUser(socket, sysMsg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 发送消息给其他用户</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> username 消息发送用户名称</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> self     消息发送的用户socket</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> msg      消息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException 抛出异常</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sendMsgToOtherUser</span><span class="params">(String username, Socket self, String msg)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="keyword">for</span> (ChatSocket chatSocket : userDB) &#123;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> chatSocket.getSocket();</span><br><span class="line">        <span class="keyword">if</span> (socket.equals(self)) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sendMsg</span> <span class="operator">=</span> <span class="string">&quot;（&quot;</span> + username + <span class="string">&quot;） &quot;</span> + getCurrentTime() + <span class="string">&quot;\n&quot;</span> + msg + <span class="string">&quot;\n&quot;</span> + chatSeparate;</span><br><span class="line">        sendMsgToUser(socket, sendMsg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 给指定的用户发送消息，文本消息</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> socket  消息发送的用户socket</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sendMsg 消息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException 抛出异常</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sendMsgToUser</span><span class="params">(Socket socket, String sendMsg)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">    os.write(sendMsg.getBytes());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="3-3、日志记录"><a href="#3-3、日志记录" class="headerlink" title="3.3、日志记录"></a>3.3、日志记录</h3><p>虽然服务端不需要记录用户的聊天信息，但是还是需要记录一些服务器的日志信息。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 打印日志</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> message 日志信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">logInfo</span><span class="params">(String message)</span> &#123;</span><br><span class="line">    System.out.println(getCurrentDateTime() + <span class="string">&quot; &quot;</span> + message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3-4、工具集合"><a href="#3-4、工具集合" class="headerlink" title="3.4、工具集合"></a>3.4、工具集合</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取当前在线的所有玩家名称</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 当前在线的所有玩家名称</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">getLoginUsernames</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> userDB.stream().map(ChatSocket::getUsername).filter(Objects::nonNull).collect(Collectors.toList());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断时间是否是 11:00 - 04:59 晚上</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 是返回true，否则返回false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isNight</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Calendar</span> <span class="variable">calendar</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">    <span class="type">int</span> <span class="variable">hour</span> <span class="operator">=</span> calendar.get(Calendar.HOUR_OF_DAY);</span><br><span class="line">    <span class="keyword">return</span> hour &gt;= <span class="number">23</span> || hour &lt;= <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 时间格式化对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">SimpleDateFormat</span> <span class="variable">timeSdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;HH:mm:ss&quot;</span>);</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">SimpleDateFormat</span> <span class="variable">DateTimeSdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取当前的时间的格式化字符串</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 当前的时间的格式化字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> String <span class="title function_">getCurrentTime</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> timeSdf.format(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取当前的日期时间的格式化字符串</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 当前的日期时间的格式化字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> String <span class="title function_">getCurrentDateTime</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> DateTimeSdf.format(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断一个字符串是否为空</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string 字符串</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 为空返回true，否则返回false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">(String string)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> string == <span class="literal">null</span> || string.length() == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断一个字符串是否不为空</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string 字符串</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 不为空返回true，否则返回false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isNotEmpty</span><span class="params">(String string)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> !isEmpty(string);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3-5、ChatSocket"><a href="#3-5、ChatSocket" class="headerlink" title="3.5、ChatSocket"></a>3.5、ChatSocket</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 封装的 ChatSocket</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ChatSocket</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Socket socket;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ChatSocket</span><span class="params">(Socket socket)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.socket = socket;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Socket <span class="title function_">getSocket</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> socket;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="服务端部署"><a href="#服务端部署" class="headerlink" title="服务端部署"></a>服务端部署</h1><p>为了方便在服务器上运行服务端代码，我还特意写了一个 <code>Shell</code> 脚本用来处理服务端代码的运行、停止、重启、查找等操作。</p>
<p><img src="/images/2023/02/100005.gif" alt="img"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CHAT_SERVER_DIR=/usr/app/chat</span><br><span class="line">CHAT_SERVER=ChatServer</span><br><span class="line">CHAT_LOG_FILE=$&#123;CHAT_SERVER_DIR&#125;/chat.log</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">聊天室启动参数</span></span><br><span class="line">CHAT_CFG=$&#123;2&#125;</span><br><span class="line"></span><br><span class="line">help() &#123;</span><br><span class="line">	echo &quot;==================&quot;</span><br><span class="line">	echo &quot;start 启动服务&quot;</span><br><span class="line">	echo &quot;stop 停止服务&quot;</span><br><span class="line">	echo &quot;restart 重启服务&quot;</span><br><span class="line">	echo &quot;find 查找服务&quot;</span><br><span class="line">	echo &quot;help 帮助&quot;</span><br><span class="line">	echo &quot;==================&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">start() &#123;</span><br><span class="line">	javac -encoding UTF-8 $&#123;CHAT_SERVER&#125;\.java</span><br><span class="line">	nohup java -Dfile.encoding=UTF-8 $&#123;CHAT_SERVER&#125; $&#123;CHAT_CFG&#125; &gt;&gt;$&#123;CHAT_LOG_FILE&#125; 2&gt;&amp;1 &amp;</span><br><span class="line">	echo &quot;服务$&#123;CHAT_SERVER&#125;已启动&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stop() &#123;</span><br><span class="line">	PID=$(ps -ef | grep java | grep ChatServer | awk &#x27;&#123;print $2&#125;&#x27;)</span><br><span class="line">	if [ &quot;$&#123;PID&#125;&quot; == &quot;&quot; ]</span><br><span class="line">	then</span><br><span class="line">		echo &quot;服务$&#123;CHAT_SERVER&#125;已停止&quot;</span><br><span class="line">	else</span><br><span class="line">		kill $&#123;PID&#125;</span><br><span class="line">		echo &quot;服务$&#123;CHAT_SERVER&#125;已停止&quot;</span><br><span class="line">	fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">restart() &#123;</span><br><span class="line">  stop</span><br><span class="line">	sleep 3</span><br><span class="line">	start</span><br><span class="line">	echo &quot;服务$&#123;CHAT_SERVER&#125;已重启&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">find() &#123;</span><br><span class="line">  PID=$(ps -ef | grep java | grep ChatServer | awk &#x27;&#123;print $2&#125;&#x27;)</span><br><span class="line">  if [ &quot;$&#123;PID&#125;&quot; == &quot;&quot; ]</span><br><span class="line">	then</span><br><span class="line">		echo &quot;服务$&#123;CHAT_SERVER&#125;已停止&quot;</span><br><span class="line">	else</span><br><span class="line">		echo &quot;服务$&#123;CHAT_SERVER&#125;正在运行：PID=$&#123;PID&#125;&quot;</span><br><span class="line">	fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">case $&#123;1&#125; in</span><br><span class="line">	&quot;&quot;)</span><br><span class="line">		echo &quot;=== 参数错误 ===&quot;</span><br><span class="line">		;;</span><br><span class="line">	start)</span><br><span class="line">		start</span><br><span class="line">		;;</span><br><span class="line">	stop)</span><br><span class="line">		stop</span><br><span class="line">		;;</span><br><span class="line">	restart)</span><br><span class="line">		restart</span><br><span class="line">		;;</span><br><span class="line">	find)</span><br><span class="line">		find</span><br><span class="line">		;;</span><br><span class="line">	*)</span><br><span class="line">		help</span><br><span class="line">		;;</span><br><span class="line">esac</span><br><span class="line"></span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>



<h1 id="优点与缺点"><a href="#优点与缺点" class="headerlink" title="优点与缺点"></a>优点与缺点</h1><p><strong>优点</strong></p>
<ul>
<li>简单便捷，无论是客户端还是服务端，都只依赖了 JDK 的环境，没有任何第三方依赖，客户端的代码只在复制到有 JDK 环境的电脑上即可运行，方便快捷。</li>
<li>足够隐蔽，客户端在 CMD 或者 IDEA 环境下都可以运行，这样你身边的同事只要不仔细观察你的电脑屏幕，绝对想不到你是在和朋友聊天，只以为你是在认真工作。</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>服务端基于阻塞式网络 IO 开发，服务端只能够承受有限个的客户端链接。（Java NIO 版本可以解决这个缺点）</li>
<li>太过简陋，因为只是单纯地进行网络 IO 的写入和读取，所以对于一些复杂的网络环境问题都没有进行处理，比如网络黏包的问题，在客户端连接较多的情况下，可能会发生网络黏包的问题，导致一些消息粘黏在一起，发送给客户端。</li>
<li>需要一个服务器，因为这款即使通讯工具是 CS 模式，需要一个服务器运行服务端代码。</li>
</ul>
<h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>虽然这款即时通讯工具确实还不够完善，但是如果只是用于几个朋友之间简单地进行聊天，这款即时通讯工具还是非常给力的。</p>
<p>这款即时通讯工具的源代码已经被托管到了 GitHub 上，同时还附带了这款即时通讯工具的 Java NIO 版本，有兴趣的同学的可以访问我的 GitHub 下载源码。</p>
<blockquote>
<p>GitHub：<a href="https://github.com/herenpeng/chat.git">https://github.com/herenpeng/chat.git</a></p>
</blockquote>
<p>同时，我还在 Gitee 上提供了仓库镜像。</p>
<blockquote>
<p>Gitee：<a href="https://gitee.com/herenpeng/chat.git">https://gitee.com/herenpeng/chat.git</a></p>
</blockquote>
<p>如果你喜欢这款即时通讯工具，希望各位同学可以给我的 GitHub 或者 Gitee 仓库点一个 <code>Star</code>，非常感谢！</p>
<p><img src="/images/2023/02/100004.gif" alt="img"></p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Netty</tag>
      </tags>
  </entry>
  <entry>
    <title>低代码开发，手写一款代码生成工具</title>
    <url>/2021/08/11/java/%E4%BD%8E%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%EF%BC%8C%E6%89%8B%E5%86%99%E4%B8%80%E6%AC%BE%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7/</url>
    <content><![CDATA[<blockquote>
<p>低代码平台的一个核心就是，使用可视化的操作，生成项目系统中的非核心代码，从而大大降低了重复代码的编写工作，使开发者们可以更加专注于核心代码和业务功能的设计和开发工作。</p>
</blockquote>
<span id="more"></span>

<h1 id="低代码平台"><a href="#低代码平台" class="headerlink" title="低代码平台"></a>低代码平台</h1><p>低代码平台有很多，强大的低代码平台基本上可以通过可视化操作来编写简单的业务逻辑，而一些简单的低代码平台主要是用来生成一些通用的 CRUD 操作，我们今天要写的就是一款比较简单的低代码平台，主要生成一些通用的后端 CRUD 操作，当然，也可以生成一些简单的前端数据管理页面等等。</p>
<p>低代码平台的主要思路是，以数据库表结构为基础，获取数据库表的结构信息，从而生成后端对应的领域模型以及 CRUD 操作。</p>
<p>本篇博客中，所有的功能都是基于 SpringBoot 的，所以在最开始，我们需要引入 SpringBoot 相关的依赖，数据库使用 MySQL，数据库操作使用 MyBatisPlus，所以在阅读本篇博客之前，我希望阅读的朋友对于这些相关的知识已经有所了解。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--SpringMVC的启动器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--lombok的依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--MySQL数据库驱动--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--MyBatis-Plus的依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>其实低代码平台的本质就是一个模板操作，将数据库表的结构信息填入对应的模板中，即可根据模板内容生成对应的模板页面。</p>
<p>说到模板生成，其实 JSP 技术本质上就是一种模板，JavaEE 服务器将数据信息填入 JSP 模板中，从而生成对应的 HTML 静态页面，然后响应给前端。</p>
<p>当然，目前的 Java 技术生态圈中，JSP 是一种比较老旧的技术了，学习和使用价值都不算太高，所以今天的低代码平台并不使用 JSP 技术来作为通用模板，而是使用 FreeMarker 模板引擎作为模板工具。</p>
<h2 id="FreeMarker模板"><a href="#FreeMarker模板" class="headerlink" title="FreeMarker模板"></a>FreeMarker模板</h2><p>既然要使用 FreeMarker 模板引擎作为模板工具，自然需要对 FreeMarker 技术有所了解。</p>
<p>我们来看一下 FreeMarker 中文官方参考手册的描述：</p>
<blockquote>
<p>FreeMarker 是一款 <em>模板引擎</em>： 即一种基于模板和要改变的数据， 并用来生成输出文本(HTML网页，电子邮件，配置文件，源代码等)的通用工具。 它不是面向最终用户的，而是一个Java类库，是一款程序员可以嵌入他们所开发产品的组件。</p>
</blockquote>
<p>简而言之，FreeMarker 就是一款类似于 JSP 的模板工具，但是比起 JSP 来，FreeMarker 效率更高，使用更加方便简单。</p>
<p>如果需要使用 FreeMarker 技术，SpringBoot 中已经为我们集成了 FreeMarker 模板引擎，我们在已经引入 SpringBoot 的前提下，只需要再引入 FreeMarker 的依赖即可。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>可以先简单封装一下 FreeMarker 模板引擎的模板生成功能，使得我们可以在后面更加简便地使用 FreeMarker 模板引擎。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FreeMarkerUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 模板渲染并返回内容</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> object             模板参数对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> templateLoaderPath FreeMarker模板文件加载路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ftlFileName        FreeMarker模板文件名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> FreeMarker模板内容内容字符串</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getTemplateContent</span><span class="params">(<span class="keyword">final</span> Object object, <span class="keyword">final</span> String templateLoaderPath, <span class="keyword">final</span> String ftlFileName)</span> &#123;</span><br><span class="line">        <span class="type">StringWriter</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Configuration</span> <span class="variable">cfg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>(Configuration.DEFAULT_INCOMPATIBLE_IMPROVEMENTS);</span><br><span class="line">            cfg.setClassForTemplateLoading(FreeMarkerUtils.class, templateLoaderPath);</span><br><span class="line">            cfg.setDefaultEncoding(EncodingEnums.UTF_8.getValue());</span><br><span class="line">            <span class="type">Template</span> <span class="variable">template</span> <span class="operator">=</span> cfg.getTemplate(ftlFileName);</span><br><span class="line">            out = <span class="keyword">new</span> <span class="title class_">StringWriter</span>();</span><br><span class="line">            template.process(object, out);</span><br><span class="line">            <span class="keyword">return</span> out.toString();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            log.error(<span class="string">&quot;[freemarker工具类]FreeMarker读取模板文件异常&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (out != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    out.flush();</span><br><span class="line">                    out.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    log.error(<span class="string">&quot;[freemarker工具类]FreeMarker读取模板文件输出流关闭异常&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="数据库表结构信息"><a href="#数据库表结构信息" class="headerlink" title="数据库表结构信息"></a>数据库表结构信息</h2><p>表结构信息是低代码平台的基础信息，其他的信息都是从表结构信息延伸出来的。</p>
<p>在获取表结构信息上，需要解决几个问题。</p>
<ul>
<li>怎么获取数据库源对应的表信息。</li>
<li>怎么获取数据库表对应的字段信息。</li>
</ul>
<p>其实数据库的表结构信息，也是存储在数据库表中的。这些信息存储在 MySQL 数据库默认的数据库 <code>information_schema</code> 中，我们可以使用 SQL 语句查询出当前使用的数据库的所有表信息。</p>
<p><img src="/images/2023/02/200001.png" alt="img"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> table_name <span class="keyword">as</span> name,table_comment <span class="keyword">as</span> comment</span><br><span class="line"><span class="keyword">from</span> information_schema.tables</span><br><span class="line"><span class="keyword">where</span> table_schema <span class="operator">=</span> (<span class="keyword">select</span> database())</span><br></pre></td></tr></table></figure>

<ul>
<li>查询结果</li>
</ul>
<table>
<thead>
<tr>
<th>name</th>
<th>comment</th>
</tr>
</thead>
<tbody><tr>
<td>数据库表名称</td>
<td>数据库表注释信息</td>
</tr>
</tbody></table>
<p>同理，我们也可以用同样的方式获取数据库表字段的具体信息。</p>
<p><img src="/images/2023/02/200002.png" alt="img"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> column_name <span class="keyword">as</span> name, ordinal_position <span class="keyword">as</span> sort,</span><br><span class="line">column_comment <span class="keyword">as</span> comment, data_type <span class="keyword">as</span> database_type</span><br><span class="line"><span class="keyword">from</span> information_schema.columns</span><br><span class="line"><span class="keyword">where</span> table_schema <span class="operator">=</span> (<span class="keyword">select</span> database())</span><br><span class="line"><span class="keyword">AND</span> table_name <span class="operator">=</span> <span class="string">&#x27;auth_role&#x27;</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> ordinal_position;</span><br></pre></td></tr></table></figure>

<ul>
<li>查询结果</li>
</ul>
<table>
<thead>
<tr>
<th>name</th>
<th>sort</th>
<th>comment</th>
<th>database_type</th>
</tr>
</thead>
<tbody><tr>
<td>表字段名称</td>
<td>表字段排序</td>
<td>表字段注释信息</td>
<td>表字段数据库类型</td>
</tr>
</tbody></table>
<h2 id="命名风格转换"><a href="#命名风格转换" class="headerlink" title="命名风格转换"></a>命名风格转换</h2><p>在 Java 代码中，我们一般会使用遵循 Java 代码规范的驼峰命名法，而在数据库中，则使用下划线命名法，即各个词语之间使用下划线隔开。驼峰命名法和下划线命名法都是遵循一定规范的命名方式，两者之间的命名风格可以相互转换。</p>
<p>如果数据库的命名和 Java 代码的命名都遵循一定的规范，那么可以使用命名风格转换工具，将数据库的名称信息自动转换为 Java 代码风格的名称。</p>
<p>当然，如果命名确实不具备相同的规范，无法自动转换，也可以考虑使用在可视化编程界面，由低代码平台的使用者自己对命名名称进行手动修正。</p>
<ul>
<li>命名风格转换工具</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 命名风格转换工具类</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> herenpeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2020-11-15 15:58</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CamelCaseUtils</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 下划线分隔符 Underscore</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">char</span> <span class="variable">UNDERSCORE_SEPARATOR</span> <span class="operator">=</span> <span class="string">&#x27;_&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 下划线命名，转换为小驼峰命名</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string 下划线命名名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 小驼峰命名名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toCamelCase</span><span class="params">(String string)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isBlank(string)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        string = string.toLowerCase();</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(string.length());</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">upperCase</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; string.length(); i++) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">ch</span> <span class="operator">=</span> string.charAt(i);</span><br><span class="line">            <span class="keyword">if</span> (ch == UNDERSCORE_SEPARATOR) &#123;</span><br><span class="line">                upperCase = <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (upperCase) &#123;</span><br><span class="line">                sb.append(Character.toUpperCase(ch));</span><br><span class="line">                upperCase = <span class="literal">false</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                sb.append(ch);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h2><p>从数据库中只能获取数据库表字段的数据类型，而在 Java 代码中，我们使用的是 Java 数据类型，在 MyBatisPlus 中，我们一般还会使用 jdbcType，为了能够把数据库类型转换为 Java 类型和 jdbcType，需要我们在后台对这三者直接的关系进行映射，从而实现数据库类型转换为 Java 类型和 jdbcType 类型。</p>
<ul>
<li>数据库类型映射</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数据类型常量，能够通过数据库类型映射为JDBC类型和JAVA类型</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> herenpeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2020-11-12 23:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataBaseTypeConst</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; jdbcTypeMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">16</span>);</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; javaTypeMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">16</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        initJdbcTypeMap();</span><br><span class="line">        initJavaTypeMap();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化数据库类型和Jdbc类型的映射关系</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initJdbcTypeMap</span><span class="params">()</span> &#123;</span><br><span class="line">        jdbcTypeMap.put(<span class="string">&quot;int&quot;</span>, <span class="string">&quot;INTEGER&quot;</span>);</span><br><span class="line">        jdbcTypeMap.put(<span class="string">&quot;bigint&quot;</span>, <span class="string">&quot;BIGINT&quot;</span>);</span><br><span class="line">        jdbcTypeMap.put(<span class="string">&quot;char&quot;</span>, <span class="string">&quot;CHAR&quot;</span>);</span><br><span class="line">        jdbcTypeMap.put(<span class="string">&quot;varchar&quot;</span>, <span class="string">&quot;VARCHAR&quot;</span>);</span><br><span class="line">        jdbcTypeMap.put(<span class="string">&quot;datetime&quot;</span>, <span class="string">&quot;TIMESTAMP&quot;</span>);</span><br><span class="line">        jdbcTypeMap.put(<span class="string">&quot;timestamp&quot;</span>, <span class="string">&quot;TIMESTAMP&quot;</span>);</span><br><span class="line">        jdbcTypeMap.put(<span class="string">&quot;date&quot;</span>, <span class="string">&quot;DATE&quot;</span>);</span><br><span class="line">        jdbcTypeMap.put(<span class="string">&quot;time&quot;</span>, <span class="string">&quot;TIME&quot;</span>);</span><br><span class="line">        jdbcTypeMap.put(<span class="string">&quot;tinyint&quot;</span>, <span class="string">&quot;BOOLEAN&quot;</span>);</span><br><span class="line">        jdbcTypeMap.put(<span class="string">&quot;decimal&quot;</span>, <span class="string">&quot;DECIMAL&quot;</span>);</span><br><span class="line">        jdbcTypeMap.put(<span class="string">&quot;numeric&quot;</span>, <span class="string">&quot;NUMERIC&quot;</span>);</span><br><span class="line">        jdbcTypeMap.put(<span class="string">&quot;float&quot;</span>, <span class="string">&quot;FLOAT&quot;</span>);</span><br><span class="line">        jdbcTypeMap.put(<span class="string">&quot;double&quot;</span>, <span class="string">&quot;DOUBLE&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化数据库类型和Java类型的映射关系</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initJavaTypeMap</span><span class="params">()</span> &#123;</span><br><span class="line">        javaTypeMap.put(<span class="string">&quot;int&quot;</span>, <span class="string">&quot;Integer&quot;</span>);</span><br><span class="line">        javaTypeMap.put(<span class="string">&quot;bigint&quot;</span>, <span class="string">&quot;Long&quot;</span>);</span><br><span class="line">        javaTypeMap.put(<span class="string">&quot;char&quot;</span>, <span class="string">&quot;String&quot;</span>);</span><br><span class="line">        javaTypeMap.put(<span class="string">&quot;varchar&quot;</span>, <span class="string">&quot;String&quot;</span>);</span><br><span class="line">        javaTypeMap.put(<span class="string">&quot;datetime&quot;</span>, <span class="string">&quot;Date&quot;</span>);</span><br><span class="line">        javaTypeMap.put(<span class="string">&quot;timestamp&quot;</span>, <span class="string">&quot;Date&quot;</span>);</span><br><span class="line">        javaTypeMap.put(<span class="string">&quot;date&quot;</span>, <span class="string">&quot;Date&quot;</span>);</span><br><span class="line">        javaTypeMap.put(<span class="string">&quot;time&quot;</span>, <span class="string">&quot;Date&quot;</span>);</span><br><span class="line">        javaTypeMap.put(<span class="string">&quot;tinyint&quot;</span>, <span class="string">&quot;Boolean&quot;</span>);</span><br><span class="line">        javaTypeMap.put(<span class="string">&quot;decimal&quot;</span>, <span class="string">&quot;BigDecimal&quot;</span>);</span><br><span class="line">        javaTypeMap.put(<span class="string">&quot;numeric&quot;</span>, <span class="string">&quot;BigDecimal&quot;</span>);</span><br><span class="line">        javaTypeMap.put(<span class="string">&quot;float&quot;</span>, <span class="string">&quot;Double&quot;</span>);</span><br><span class="line">        javaTypeMap.put(<span class="string">&quot;double&quot;</span>, <span class="string">&quot;Double&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取数据库类型对应的JDBC类型</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> databaseType 数据库类型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> JDBC类型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getJdbcType</span><span class="params">(String databaseType)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> jdbcTypeMap.get(databaseType);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取数据库类型对应的Java类型</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> databaseType 数据库类型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Java类型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getJavaType</span><span class="params">(String databaseType)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> javaTypeMap.get(databaseType);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="代码生成"><a href="#代码生成" class="headerlink" title="代码生成"></a>代码生成</h2><p>代码生成需要两部分数据：</p>
<ul>
<li>第一部分是代码模板，代码模板是固定的代码，在后台以 FreeMarker 的形式存在后台中。</li>
<li>第二部分是代码模板参数，代码模板参数是可变的，在代码生成中，代码模板参数就是数据库表信息和数据库字段信息，以及由数据库延伸出来的 Java 名称信息。</li>
</ul>
<h3 id="代码模板"><a href="#代码模板" class="headerlink" title="代码模板"></a>代码模板</h3><p>代码模板由 FreeMarker 技术开发，例如实体类的代码模板，名称是 <code>entity.ftlh</code>，模板内容如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> $&#123;javaPackageName&#125;.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.afterturn.easypoi.excel.annotation.Excel;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.SqlCondition;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> com.zero.common.base.entity.BaseEntity;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.EqualsAndHashCode;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line">&lt;#<span class="type">assign</span> <span class="variable">HasBigDecimal</span> <span class="operator">=</span> <span class="literal">true</span>&gt;</span><br><span class="line">&lt;#<span class="type">assign</span> <span class="variable">HasDate</span> <span class="operator">=</span> <span class="literal">true</span>&gt;</span><br><span class="line">&lt;#list tableColumnList as column&gt;</span><br><span class="line">    &lt;#<span class="keyword">if</span> column.javaType == <span class="string">&quot;BigDecimal&quot;</span> &amp;&amp; HasBigDecimal&gt;</span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line">    &lt;#<span class="type">assign</span> <span class="variable">HasBigDecimal</span> <span class="operator">=</span> <span class="literal">false</span>&gt;</span><br><span class="line">    &lt;/#<span class="keyword">if</span>&gt;</span><br><span class="line">    &lt;#<span class="keyword">if</span> column.javaType == <span class="string">&quot;Date&quot;</span> &amp;&amp; HasDate &amp;&amp; column.name != <span class="string">&quot;create_time&quot;</span> &amp;&amp; column.name != <span class="string">&quot;update_time&quot;</span>&gt;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line">    &lt;#<span class="type">assign</span> <span class="variable">HasDate</span> <span class="operator">=</span> <span class="literal">false</span>&gt;</span><br><span class="line">    &lt;/#<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;/#list&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * $&#123;comment&#125;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> $&#123;codeAuthor&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> $&#123;.now?string(&quot;yyyy-MM-dd HH:mm&quot;)&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ApiModel(value = &quot;$&#123;comment&#125;&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode(callSuper = false)</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@TableName(&quot;$&#123;name&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;entityName&#125; <span class="keyword">extends</span> <span class="title class_">BaseEntity</span> &#123;</span><br><span class="line"></span><br><span class="line">&lt;#list tableColumnList as column&gt;</span><br><span class="line">&lt;#<span class="keyword">if</span> column.name != <span class="string">&quot;id&quot;</span> &amp;&amp; column.name != <span class="string">&quot;create_time&quot;</span> &amp;&amp; column.name != <span class="string">&quot;create_user_id&quot;</span> &amp;&amp; column.name != <span class="string">&quot;update_time&quot;</span> &amp;&amp; column.name != <span class="string">&quot;update_user_id&quot;</span> &amp;&amp; column.name != <span class="string">&quot;deleted&quot;</span>&gt;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * $&#123;column.comment&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;$&#123;column.comment&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@Excel(name = &quot;$&#123;column.comment&#125;&quot;, width = 15, needMerge = true)</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;$&#123;column.name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> $&#123;column.javaType&#125; $&#123;column.javaName&#125;;</span><br><span class="line">&lt;/#<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;/#list&gt;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="代码模板参数"><a href="#代码模板参数" class="headerlink" title="代码模板参数"></a>代码模板参数</h3><p>代码模板参数都是由数据库相关的信息延伸出来的，主要分为数据库表信息和数据库表字段信息。</p>
<ul>
<li>TableInfo</li>
</ul>
<blockquote>
<p>这里的 TableInfo 有一部分信息是和前端 vue 相关的，如果有不需要可以根据自己的需求进行代码改造。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 系统数据库表信息实体类</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> herenpeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2020-11-08 10:55</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode(callSuper = false)</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@TableName(&quot;dev_table_info&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TableInfo</span> <span class="keyword">extends</span> <span class="title class_">BaseEntity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 表名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;name&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 表注释</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;comment&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String comment;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 表名对应的实体类名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;entity_name&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String entityName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 表名对应的实体类Controller请求路径</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;request_mapping&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String requestMapping;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Java包前缀名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;java_package_name&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String javaPackageName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Java代码生成路径</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;java_code_path&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String javaCodePath;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Vue代码生成路径</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;vue_code_path&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String vueCodePath;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Vue包路径</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;vue_package&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String vuePackage;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 代码作者</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;code_author&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String codeAuthor;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据库表的字段信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;TableColumn&gt; tableColumnList;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>TableColumn</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 系统数据库表字段信息实体类</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> herenpeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2020-11-11 23:11</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode(callSuper = false)</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@TableName(&quot;dev_table_column&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TableColumn</span> <span class="keyword">extends</span> <span class="title class_">BaseEntity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据库表字段名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;name&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Java属性名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;java_name&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String javaName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据库表字段注释</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;comment&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String comment;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据库表字段类型</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;database_type&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String databaseType;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据库表字段对应的JDBC类型</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;jdbc_type&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String jdbcType;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据库表字段对应的JAVA类型</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;java_type&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String javaType;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 是否为查询字段</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;query&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Boolean query;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据库表字段排序顺序，数据库默认升序排序</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;sort&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer sort;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 表信息主键，关联dev_table_info表的主键</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;table_info_id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer tableInfoId;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="模板类型枚举"><a href="#模板类型枚举" class="headerlink" title="模板类型枚举"></a>模板类型枚举</h3><p>为了能够区分不同的模板，以及不同模板之前的一些固定参数，我们可以写一些枚举类型，对这些不同模板的固定参数进行定义。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 代码类型，后续可以添加一些其他类型的代码，比如 VUE</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> herenpeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2021-03-29 20:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">CodeTypeEnum</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Java代码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    JAVA;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * FreeMarker模板文件相关枚举</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> herenpeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2020-11-15 13:07</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">TemplateEnum</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 实体类相关信息枚举</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ENTITY(CodeTypeEnum.JAVA,</span><br><span class="line">            <span class="string">&quot;/templates/java&quot;</span>,</span><br><span class="line">            <span class="string">&quot;entity.ftlh&quot;</span>,</span><br><span class="line">            <span class="string">&quot;/src/main/java&quot;</span>,</span><br><span class="line">            <span class="string">&quot;.entity&quot;</span>,</span><br><span class="line">            <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;.java&quot;</span>),</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Mapper层接口相关信息枚举</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    MAPPER(CodeTypeEnum.JAVA,</span><br><span class="line">            <span class="string">&quot;/templates/java&quot;</span>,</span><br><span class="line">            <span class="string">&quot;mapper.ftlh&quot;</span>,</span><br><span class="line">            <span class="string">&quot;/src/main/java&quot;</span>,</span><br><span class="line">            <span class="string">&quot;.mapper&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Mapper&quot;</span>,</span><br><span class="line">            <span class="string">&quot;.java&quot;</span>),</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Mapper层XML文件相关信息枚举</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    MAPPER_XML(CodeTypeEnum.JAVA,</span><br><span class="line">            <span class="string">&quot;/templates/resources&quot;</span>,</span><br><span class="line">            <span class="string">&quot;mapperXml.ftlh&quot;</span>,</span><br><span class="line">            <span class="string">&quot;/src/main/resources&quot;</span>,</span><br><span class="line">            <span class="string">&quot;.mapper&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Mapper&quot;</span>,</span><br><span class="line">            <span class="string">&quot;.xml&quot;</span>),</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Service层接口相关信息枚举</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    SERVICE(CodeTypeEnum.JAVA,</span><br><span class="line">            <span class="string">&quot;/templates/java&quot;</span>,</span><br><span class="line">            <span class="string">&quot;service.ftlh&quot;</span>,</span><br><span class="line">            <span class="string">&quot;/src/main/java&quot;</span>,</span><br><span class="line">            <span class="string">&quot;.service&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Service&quot;</span>,</span><br><span class="line">            <span class="string">&quot;.java&quot;</span>),</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Service层接口实现类相关信息枚举</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    SERVICE_IMPL(CodeTypeEnum.JAVA,</span><br><span class="line">            <span class="string">&quot;/templates/java&quot;</span>,</span><br><span class="line">            <span class="string">&quot;serviceImpl.ftlh&quot;</span>,</span><br><span class="line">            <span class="string">&quot;/src/main/java&quot;</span>,</span><br><span class="line">            <span class="string">&quot;.service.impl&quot;</span>,</span><br><span class="line">            <span class="string">&quot;ServiceImpl&quot;</span>,</span><br><span class="line">            <span class="string">&quot;.java&quot;</span>),</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Controller层相关信息枚举</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    CONTROLLER(CodeTypeEnum.JAVA,</span><br><span class="line">            <span class="string">&quot;/templates/java&quot;</span>,</span><br><span class="line">            <span class="string">&quot;controller.ftlh&quot;</span>,</span><br><span class="line">            <span class="string">&quot;/src/main/java&quot;</span>,</span><br><span class="line">            <span class="string">&quot;.controller&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Controller&quot;</span>,</span><br><span class="line">            <span class="string">&quot;.java&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 代码类型</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> CodeTypeEnum codeTypeEnum;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 模板文件加载路径</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String templateLoaderPath;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * FreeMarker模板文件名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String ftlTemplateFile;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文件基本生成路径</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String fileBasePath;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 包名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String packageName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 名称后缀</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String suffix;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文件后缀名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String fileSuffix;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="生成代码"><a href="#生成代码" class="headerlink" title="生成代码"></a>生成代码</h3><p>拥有代码模板和代码模板参数之后，就可以使用之前写的 FreeMarkerUtils 直接生成代码，不过为了方便使用，我们可以再一次包装一个 CodeGenerationUtils 工具类。后续我们只需要调用 CodeGenerationUtils  工具类的 <code>generation</code> 方法即可。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 代码生成工具类</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> herenpeng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2020-11-11 22:53</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CodeGenerationUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> TableInfoMapper tableInfoMapper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> TableColumnMapper tableColumnMapper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> FreeMarkerUtils freeMarkerUtils;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 代码生成方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 表信息主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">generation</span><span class="params">(Integer id)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">TableInfo</span> <span class="variable">tableInfo</span> <span class="operator">=</span> tableInfoMapper.selectById(id);</span><br><span class="line">        List&lt;TableColumn&gt; tableColumnList = tableColumnMapper.getByTableInfoId(tableInfo.getId());</span><br><span class="line">        tableInfo.setTableColumnList(tableColumnList);</span><br><span class="line">        generationFile(tableInfo, TemplateEnum.ENTITY);</span><br><span class="line">        generationFile(tableInfo, TemplateEnum.MAPPER);</span><br><span class="line">        generationFile(tableInfo, TemplateEnum.SERVICE);</span><br><span class="line">        generationFile(tableInfo, TemplateEnum.SERVICE_IMPL);</span><br><span class="line">        generationFile(tableInfo, TemplateEnum.CONTROLLER);</span><br><span class="line">        generationFile(tableInfo, TemplateEnum.MAPPER_XML);</span><br><span class="line">        <span class="comment">// 生成前端代码</span></span><br><span class="line">        generationFile(tableInfo, TemplateEnum.VUE);</span><br><span class="line">        generationFile(tableInfo, TemplateEnum.API);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过模板文件生成对应的文件</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> tableInfo    表信息，需要在模板文件中渲染的内容信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> templateEnum 需要生成的文件类型枚举，其中含有对应的生成信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException IO异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">generationFile</span><span class="params">(TableInfo tableInfo, TemplateEnum templateEnum)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 拼接文件的全路径</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">generationFilePath</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="type">CodeTypeEnum</span> <span class="variable">codeTypeEnum</span> <span class="operator">=</span> templateEnum.getCodeTypeEnum();</span><br><span class="line">        <span class="keyword">switch</span> (codeTypeEnum) &#123;</span><br><span class="line">            <span class="keyword">case</span> JAVA:</span><br><span class="line">                <span class="comment">// 拼接文件的全路径</span></span><br><span class="line">                generationFilePath.append(tableInfo.getJavaCodePath()).append(templateEnum.getFileBasePath())</span><br><span class="line">                        .append(packageNameToPath(tableInfo.getJavaPackageName() + templateEnum.getPackageName()))</span><br><span class="line">                        .append(File.separator).append(tableInfo.getEntityName()).append(templateEnum.getSuffix())</span><br><span class="line">                        .append(templateEnum.getFileSuffix());</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                log.error(<span class="string">&quot;[代码生成工具]系统当前不支持&#123;&#125;类型的代码生成功能&quot;</span>, codeTypeEnum);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> freeMarkerUtils.getTemplateContent(tableInfo, templateEnum.getTemplateLoaderPath(), templateEnum.getFtlTemplateFile());</span><br><span class="line">        <span class="type">File</span> <span class="variable">generationFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(generationFilePath.toString());</span><br><span class="line">        generationFile.getParentFile().mkdirs();</span><br><span class="line">        <span class="type">OutputStreamWriter</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(generationFile), EncodingEnums.UTF_8.getValue());</span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(out);</span><br><span class="line">        writer.write(content);</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将包名转换为文件路径名，并在包文件路径的前后拼接上文件路径分隔符号</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> packageName 包名转</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 文件路径名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">packageNameToPath</span><span class="params">(String packageName)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> File.separator + packageName.replace(StringConst.POINT, File.separator);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="可视化效果"><a href="#可视化效果" class="headerlink" title="可视化效果"></a>可视化效果</h2><ul>
<li>代码生成</li>
</ul>
<p><img src="/images/2023/02/200003.png" alt="img"></p>
<ul>
<li>表信息配置</li>
</ul>
<p><img src="/images/2023/02/200004.png" alt="img"></p>
<ul>
<li>表字段配置</li>
</ul>
<p><img src="/images/2023/02/200005.png" alt="img"></p>
<h1 id="优点和缺点"><a href="#优点和缺点" class="headerlink" title="优点和缺点"></a>优点和缺点</h1><p><strong>优点</strong></p>
<ul>
<li>使用便捷，开发者可以使用这款低代码工具生成简单重复的代码。</li>
<li>代码简单，开发者可以根据自己的需求，对这款低代码工具进行定制化的修改。</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>功能单一，相比较其他成熟的低代码平台，这款低代码工具的功能还是比较单一的，无法承担比较复杂的业务场景。</li>
<li>不支持多表关联，这款低代码工具目前只支持单表代码生成。</li>
</ul>
<blockquote>
<p>有兴趣的小伙伴可以基于这个的基础上，对这款低代码工具进行扩展和升级，增加更多复杂，更加强大的功能。</p>
</blockquote>
<h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>这款低代码平台能够生成简单的 Java 和前端代码，对于基础的增删改查可以直接生成，开发者只需要在这个基础上进行一些简单的修改，这些代码就可以立即生效，从而大大节省开发者的时间，让开发者从无意义的重复代码中解放出来。</p>
<p>这款低代码工具其实是我的开源项目 <code>zero-admin</code> 下的一个子模块 <code>zero-dev</code> ，这款低代码工具的所有的源码都在该模块中，有兴趣的可以前往我的 GitHub 进行相关的了解。</p>
<blockquote>
<p>GitHub：<a href="https://github.com/herenpeng/zero-admin.git">https://github.com/herenpeng/zero-admin.git</a></p>
</blockquote>
<p>同时，我还在 Gitee 上提供了仓库镜像。</p>
<blockquote>
<p>Gitee：<a href="https://gitee.com/herenpeng/zero-admin.git">https://gitee.com/herenpeng/zero-admin.git</a></p>
</blockquote>
<p>如果你喜欢这款低代码工具，希望各位同学可以给我的 GitHub 或者 Gitee 仓库点一个 <code>Star</code>，非常感谢！</p>
<p><img src="/images/2023/02/200004.gif" alt="img"></p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>WebStrom 开发 Vue 项目，安装 ESLint 代码风格检查工具</title>
    <url>/2021/08/30/javascript/WebStrom%20%E5%BC%80%E5%8F%91%20Vue%20%E9%A1%B9%E7%9B%AE%EF%BC%8C%E5%AE%89%E8%A3%85%20ESLint%20%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC%E6%A3%80%E6%9F%A5%E5%B7%A5%E5%85%B7/</url>
    <content><![CDATA[<p>WebStrom 开发 Vue 项目，安装 ESLint 代码风格检查工具</p>
<span id="more"></span>

<h1 id="ESLint"><a href="#ESLint" class="headerlink" title="ESLint"></a>ESLint</h1><blockquote>
<p>ESLint最初是由<a href="http://nczonline.net">Nicholas C. Zakas</a> 于2013年6月创建的开源项目。它的目标是提供一个插件化的javascript代码检测工具。</p>
</blockquote>
<p>在一个 Vue 项目中要使用 ESLint 工具，首先需要安装 Vue，并创建一个简单的 Vue 项目，而后在 Vue 项目的基础上安装 ESLint 依赖，最后进行 ESLint 的相关配置。</p>
<h2 id="创建-Vue-项目"><a href="#创建-Vue-项目" class="headerlink" title="创建 Vue 项目"></a>创建 Vue 项目</h2><p>1、使用 npm 安装 Vue3 的最新版本。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install vue@next</span><br></pre></td></tr></table></figure>



<p>2、安装最新版本的 Vue-cli 脚手架模板。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install -g @vue/cli@next</span><br></pre></td></tr></table></figure>



<p>3、使用 Vite 构建项目。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm init vite-app &lt;project-name&gt;</span><br><span class="line">cd &lt;project-name&gt;</span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>



<h2 id="安装-ESLint"><a href="#安装-ESLint" class="headerlink" title="安装 ESLint"></a>安装 ESLint</h2><p>我们可以使用 npm 命令安装 ESLint，一共需要安装三个 ESLint 项目的依赖，本地安装和全局安装任选一个即可。</p>
<ul>
<li>本地安装</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install eslint --save-dev</span><br><span class="line">npm install eslint-plugin-vue --save-dev</span><br><span class="line">npm install babel-eslint --save-dev</span><br></pre></td></tr></table></figure>

<ul>
<li>全局安装</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install -g eslint</span><br><span class="line">npm install -g eslint-plugin-vue</span><br><span class="line">npm install -g babel-eslint</span><br></pre></td></tr></table></figure>



<h2 id="配置-WebStrom"><a href="#配置-WebStrom" class="headerlink" title="配置 WebStrom"></a>配置 WebStrom</h2><p>在 Vue 项目中安装完 ESLint 依赖，还需要对 WebStrom 进行配置。</p>
<p>打开 File -&gt; Settings -&gt; Languages &amp; Frameworks -&gt; JavaScript -&gt; Code Quality Tools -&gt; ESLint</p>
<p>界面如下：</p>
<p><img src="/images/2023/02/01.png" alt="img"></p>
<p>最后，点击界面右下角的 <code>Apply</code> 按钮，应用该配置即可。</p>
<h2 id="添加-ESLint-配置文件"><a href="#添加-ESLint-配置文件" class="headerlink" title="添加 ESLint 配置文件"></a>添加 ESLint 配置文件</h2><p>在没有 ESLint 配置文件的情况下，会使用默认的代码风格配置进行检查，我们可以给项目增加 ESLint 的配置文件来对项目进行代码风格配置，变成自己适应的代码风格。</p>
<ul>
<li>在项目的顶级目录下新增 <code>.eslintrc.js</code> 和 <code>.eslintignore</code> 文件，其中 <code>.eslintrc.js</code> 文件是 ESLint 的代码风格配置文件，而 <code>.eslintignore</code> 文件，则是忽略 ESLint 代码风格检查的文件的名称或路径的配置文件。</li>
</ul>
<h3 id="eslintignore"><a href="#eslintignore" class="headerlink" title=".eslintignore"></a>.eslintignore</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">build<span class="comment">/*.js</span></span><br><span class="line"><span class="comment">src/assets</span></span><br><span class="line"><span class="comment">public</span></span><br><span class="line"><span class="comment">dist</span></span><br></pre></td></tr></table></figure>



<h3 id="eslintrc-js"><a href="#eslintrc-js" class="headerlink" title=".eslintrc.js"></a>.eslintrc.js</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">parser</span>: <span class="string">&#x27;babel-eslint&#x27;</span>,</span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&#x27;module&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">es6</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&#x27;plugin:vue/recommended&#x27;</span>, <span class="string">&#x27;eslint:recommended&#x27;</span>],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// add your custom rules here</span></span><br><span class="line">  <span class="comment">// it is base on https://github.com/vuejs/eslint-config-vue</span></span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;vue/max-attributes-per-line&#x27;</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;singleline&#x27;</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="string">&#x27;multiline&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;max&#x27;</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="string">&#x27;allowFirstLine&#x27;</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;vue/singleline-html-element-content-newline&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;vue/multiline-html-element-content-newline&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;vue/name-property-casing&#x27;</span>: [<span class="string">&#x27;error&#x27;</span>, <span class="string">&#x27;PascalCase&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;vue/no-v-html&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;accessor-pairs&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;arrow-spacing&#x27;</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;before&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&#x27;after&#x27;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;block-spacing&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;always&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;brace-style&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;1tbs&#x27;</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;allowSingleLine&#x27;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;camelcase&#x27;</span>: [<span class="number">0</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;properties&#x27;</span>: <span class="string">&#x27;always&#x27;</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;comma-dangle&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;comma-spacing&#x27;</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;before&#x27;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">&#x27;after&#x27;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;comma-style&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;last&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;constructor-super&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;curly&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;multi-line&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;dot-location&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;property&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;eol-last&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;eqeqeq&#x27;</span>: [<span class="string">&#x27;error&#x27;</span>, <span class="string">&#x27;always&#x27;</span>, &#123; <span class="string">&#x27;null&#x27;</span>: <span class="string">&#x27;ignore&#x27;</span> &#125;],</span><br><span class="line">    <span class="string">&#x27;generator-star-spacing&#x27;</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;before&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&#x27;after&#x27;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;handle-callback-err&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;^(err|error)$&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;indent&#x27;</span>: [<span class="number">2</span>, <span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;SwitchCase&#x27;</span>: <span class="number">1</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;jsx-quotes&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;prefer-single&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;key-spacing&#x27;</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;beforeColon&#x27;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">&#x27;afterColon&#x27;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;keyword-spacing&#x27;</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;before&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&#x27;after&#x27;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;new-cap&#x27;</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;newIsCap&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&#x27;capIsNew&#x27;</span>: <span class="literal">false</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;new-parens&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-array-constructor&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-caller&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;no-class-assign&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-cond-assign&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-const-assign&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-control-regex&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&#x27;no-delete-var&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-dupe-args&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-dupe-class-members&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-dupe-keys&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-duplicate-case&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-empty-character-class&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-empty-pattern&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-eval&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-ex-assign&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-extend-native&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-extra-bind&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-extra-boolean-cast&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-extra-parens&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;functions&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;no-fallthrough&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-floating-decimal&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-func-assign&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-implied-eval&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-inner-declarations&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;functions&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;no-invalid-regexp&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-irregular-whitespace&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-iterator&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-label-var&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-labels&#x27;</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;allowLoop&#x27;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">&#x27;allowSwitch&#x27;</span>: <span class="literal">false</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;no-lone-blocks&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-mixed-spaces-and-tabs&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-multi-spaces&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-multi-str&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-multiple-empty-lines&#x27;</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;max&#x27;</span>: <span class="number">1</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;no-native-reassign&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-negated-in-lhs&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-new-object&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-new-require&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-new-symbol&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-new-wrappers&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-obj-calls&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-octal&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-octal-escape&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-path-concat&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-proto&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-redeclare&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-regex-spaces&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-return-assign&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;except-parens&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;no-self-assign&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-self-compare&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-sequences&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-shadow-restricted-names&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-spaced-func&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-sparse-arrays&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-this-before-super&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-throw-literal&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-trailing-spaces&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-undef&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-undef-init&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-unexpected-multiline&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-unmodified-loop-condition&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-unneeded-ternary&#x27;</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;defaultAssignment&#x27;</span>: <span class="literal">false</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;no-unreachable&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-unsafe-finally&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-unused-vars&#x27;</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;vars&#x27;</span>: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;args&#x27;</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;no-useless-call&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-useless-computed-key&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-useless-constructor&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-useless-escape&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&#x27;no-whitespace-before-property&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-with&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;one-var&#x27;</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;initialized&#x27;</span>: <span class="string">&#x27;never&#x27;</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;operator-linebreak&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;after&#x27;</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;overrides&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;?&#x27;</span>: <span class="string">&#x27;before&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;:&#x27;</span>: <span class="string">&#x27;before&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;padded-blocks&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;quotes&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;single&#x27;</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;avoidEscape&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&#x27;allowTemplateLiterals&#x27;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;semi&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;semi-spacing&#x27;</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;before&#x27;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">&#x27;after&#x27;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;space-before-blocks&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;always&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;space-before-function-paren&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;space-in-parens&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;space-infix-ops&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;space-unary-ops&#x27;</span>: [<span class="number">2</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;words&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">&#x27;nonwords&#x27;</span>: <span class="literal">false</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;spaced-comment&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;always&#x27;</span>, &#123;</span><br><span class="line">      <span class="string">&#x27;markers&#x27;</span>: [<span class="string">&#x27;global&#x27;</span>, <span class="string">&#x27;globals&#x27;</span>, <span class="string">&#x27;eslint&#x27;</span>, <span class="string">&#x27;eslint-disable&#x27;</span>, <span class="string">&#x27;*package&#x27;</span>, <span class="string">&#x27;!&#x27;</span>, <span class="string">&#x27;,&#x27;</span>]</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;template-curly-spacing&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;use-isnan&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;valid-typeof&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;wrap-iife&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;any&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;yield-star-spacing&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;both&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;yoda&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;prefer-const&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;no-debugger&#x27;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="number">2</span> : <span class="number">0</span>,</span><br><span class="line">    <span class="string">&#x27;object-curly-spacing&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;always&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">objectsInObjects</span>: <span class="literal">false</span></span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">&#x27;array-bracket-spacing&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="格式化代码快捷键"><a href="#格式化代码快捷键" class="headerlink" title="格式化代码快捷键"></a>格式化代码快捷键</h2><p>在配置完 ESLint 代码风格检查工具之后，我们可以直接格式化代码，使得我们的前端代码自动格式化为 ESLint 的所配置的代码风格。</p>
<h3 id="右键格式化"><a href="#右键格式化" class="headerlink" title="右键格式化"></a>右键格式化</h3><p>在需要格式化的文件中点击鼠标右键，可以看到右键菜单中有一个 <code>Fix ESLint Problems</code> 的选项，点击该选项，即可格式化该文件的全部代码。</p>
<p><img src="/images/2023/02/02.png" alt="img"></p>
<h3 id="快捷键格式化"><a href="#快捷键格式化" class="headerlink" title="快捷键格式化"></a>快捷键格式化</h3><p>右键菜单的方法毕竟还是比较繁琐的，我们还可以通过配置快捷键的方式，直接使用快捷键对文件代码进行格式化操作。</p>
<p>打开 File -&gt; Settings -&gt; Keymap</p>
<p><img src="/images/2023/02/03.png" alt="img"></p>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>WebStrom</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux环境邮件服务报错：Couldn‘t connect to host, port: smtp.qq.com, 25； timeout -1；</title>
    <url>/2021/01/19/linux/Linux%E7%8E%AF%E5%A2%83%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E6%8A%A5%E9%94%99/</url>
    <content><![CDATA[<p>在Windows环境下邮件服务能够正常使用，但是在Linux环境下，邮件服务报错，无法发送邮件。</p>
<span id="more"></span>
<p>具体报错信息如下：</p>
<blockquote>
<p>com.sun.mail.util.MailConnectException: Couldn’t connect to host, port: smtp.qq.com, 25; timeout -1;</p>
</blockquote>
<p>这个报错的原因是因为阿里云服务器出于安全策略的考虑，主动屏蔽了服务器25端口，导致邮件服务无法正常使用。</p>
<p>解决该报错的方法有两种：</p>
<p><strong>第一：开放25端口。</strong></p>
<blockquote>
<p>阿里云服务25端口的屏蔽策略和普通的安全策略不同，无法通过配置安全组规则的方式来进行开放，如果需要开放25端口，需要向阿里云进行申诉，这是一种比较麻烦的处理方法。</p>
<p>具体的阿里云25端口申诉方法，可以参考：<a href="https://help.aliyun.com/knowledge_detail/56130.html">https://help.aliyun.com/knowledge_detail/56130.html</a></p>
</blockquote>
<p><strong>第二：邮件服务不使用25端口，而是使用465端口。</strong></p>
<blockquote>
<p>具体方法为：进行SpringBoot配置文件配置。</p>
</blockquote>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment"># SpringMail发送邮件相关配置</span></span><br><span class="line">  <span class="attr">mail:</span></span><br><span class="line">    <span class="comment"># 发送邮件的账号名</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">xxxxxxxxxxxx@qq.com</span></span><br><span class="line">    <span class="comment"># 授权码</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">xxxxxxxxxxxx</span></span><br><span class="line">    <span class="comment"># smtp服务主机  qq邮箱的服务主机为smtp.qq.com</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">smtp.qq.com</span></span><br><span class="line">    <span class="comment"># 服务协议</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">smtp</span></span><br><span class="line">    <span class="comment"># 编码集</span></span><br><span class="line">    <span class="attr">default-encoding:</span> <span class="string">UTF-8</span></span><br><span class="line">    <span class="comment"># 服务端口</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">465</span></span><br><span class="line">    <span class="attr">properties:</span></span><br><span class="line">      <span class="attr">mail:</span></span><br><span class="line">        <span class="attr">smtp:</span></span><br><span class="line">          <span class="attr">auth:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">socketFactory:</span></span><br><span class="line">            <span class="attr">port:</span> <span class="number">465</span></span><br><span class="line">            <span class="attr">class:</span> <span class="string">javax.net.ssl.SSLSocketFactory</span></span><br><span class="line">            <span class="attr">fallback:</span> <span class="literal">false</span></span><br><span class="line">          <span class="attr">starttls:</span></span><br><span class="line">            <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">required:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux常用命令</title>
    <url>/2020/03/10/linux/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<p>我们可以通过这篇博客来学习 Linux 的常用命令。</p>
<span id="more"></span>

<h2 id="显示文件"><a href="#显示文件" class="headerlink" title="显示文件"></a>显示文件</h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>ls</td>
<td>显示当前目录下的文件</td>
</tr>
<tr>
<td>ls –a</td>
<td>显示所有文件或目录（包括隐藏文件）</td>
</tr>
<tr>
<td>ls –l</td>
<td>缩写为ll，显示当前目录下文件的详细内容</td>
</tr>
</tbody></table>
<h2 id="切换目录"><a href="#切换目录" class="headerlink" title="切换目录"></a>切换目录</h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>cd [路径]</td>
<td>进入或返回到该目录，可以使用tab键来补全目录的路径</td>
</tr>
<tr>
<td>cd . .</td>
<td>退回上一级目录</td>
</tr>
<tr>
<td>cd /</td>
<td>返回到根目录</td>
</tr>
<tr>
<td>cd ~</td>
<td>返回到root目录</td>
</tr>
<tr>
<td>cd -</td>
<td>返回到上一次所在的目录</td>
</tr>
<tr>
<td>pwd</td>
<td>显示当前所在目录的路径</td>
</tr>
</tbody></table>
<h2 id="文件夹"><a href="#文件夹" class="headerlink" title="文件夹"></a>文件夹</h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>mkdir [文件夹名]</td>
<td>在当前目录下创建指定文件夹（只能创建一级目录，即空文件夹）</td>
</tr>
<tr>
<td>rmdir [文件夹名]</td>
<td>在当前目录下删除指定文件夹（只能删除空文件夹）</td>
</tr>
<tr>
<td>mkdir –help</td>
<td>查看mkdir命令的帮助</td>
</tr>
<tr>
<td>mkdir –p [文件夹/子文件夹]</td>
<td>可以创建多级目录，如果没有父目录，会帮你创建父目录，有父目录，也不会报错</td>
</tr>
</tbody></table>
<h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h2><p><strong>文件的权限表示：</strong> - — — —</p>
<p>第一个位置表示文件类型。 </p>
<ul>
<li>-代表文件</li>
<li>d代表目录</li>
<li>l表示连接</li>
</ul>
<p>第二个位置表示当前用户所具有的文件的权限。<br>第三个位置表示组内其他用户具有的该文件的权限。<br>第四个位置表示其他组的用户具有该文件的权限。</p>
<ul>
<li>r：read读</li>
<li>w：write写</li>
<li>x：excute执行</li>
</ul>
<p><strong>变更文件或目录的权限</strong></p>
<ul>
<li>chmod u=rwx,g=rwx,o=rwx [文件或文件夹名]</li>
<li>chmod 777 [文件或文件夹名]（r=4,w=2,x=1）</li>
</ul>
<p><strong>创建文件</strong></p>
<ul>
<li>touch [文件名]：创建一个空文件</li>
</ul>
<h2 id="浏览文件"><a href="#浏览文件" class="headerlink" title="浏览文件"></a>浏览文件</h2><p>cat [文件名]：浏览文件的所有内容</p>
<p>more [文件名]：一屏幕一屏幕浏览文件内容</p>
<ul>
<li>按回车键一行一行浏览</li>
<li>按空格键一屏幕一屏幕浏览</li>
<li>按q退出浏览</li>
<li>ctrl+c也可以退出</li>
</ul>
<p>Less [文件名]：和more命令类似</p>
<ul>
<li>按回车键一行一行浏览</li>
<li>按空格键一屏幕一屏幕浏览</li>
<li>可以使用上下键进行滚动浏览</li>
<li>按q退出浏览</li>
<li>ctrl+c也可以退出</li>
</ul>
<p>tail -10 [文件名]：直接浏览文件最后10行</p>
<p>tail –f [文件名]：可以动态查看内容</p>
<h2 id="编辑文件"><a href="#编辑文件" class="headerlink" title="编辑文件"></a>编辑文件</h2><p><strong>vim命令</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>vim [文件名]</td>
<td>进入指定文件的编辑界面</td>
</tr>
</tbody></table>
<ul>
<li>vim 不仅可以编辑已存在的文件，不存在的文件只要正常编辑并保存退出，会自动创建</li>
</ul>
<p><strong>Linux文件的三种模式</strong></p>
<p>命令模式：切换到命令行模式：按Esc键</p>
<p>插入模式：切换到插入模式：按i、o、a键</p>
<ul>
<li>i在当前位置前插入</li>
<li>a在当前位置后插入</li>
<li>A在当前行尾插入</li>
<li>o在当前行之后插入一行</li>
<li>O在当前行之前插入一行</li>
</ul>
<p>底行模式：切换到底行模式：shitf+:</p>
<ul>
<li>底行模式下的wq（:wq）保存并退出</li>
<li>底行模式下的q!（:q!）退出不保存</li>
<li>底行模式下的/[字符串]（: /[字符串]）查找文件中的指定字符串</li>
</ul>
<p><strong>cat命令</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>cat [文件1] &gt; [文件2]</td>
<td>将文件1的内容映射到文件2中去,如果文件2中已有内容，会覆盖文件2中的内容</td>
</tr>
<tr>
<td>cat [文件1] &gt;&gt; [文件2]</td>
<td>内容不会覆盖，直接追加</td>
</tr>
</tbody></table>
<h2 id="文件的拷贝和剪切"><a href="#文件的拷贝和剪切" class="headerlink" title="文件的拷贝和剪切"></a>文件的拷贝和剪切</h2><p><strong>拷贝</strong><br>| 命令 | 描述 |<br>|–|–|<br>|cp [文件名] [目录] | 将文件拷贝到目录下 |<br>|cp [文件名] [目录/文件名]  |  将文件拷贝到目录下，并修改文件名 |</p>
<p><strong>剪切</strong><br>| 命令 | 描述 |<br>|–|–|<br>|  mv [文件名] [目录]  |  将文件剪切到目录下|<br>|  mv [文件名] [目录/文件名]  |  将文件剪切到目录下，并修改文件名 |</p>
<h2 id="删除文件或文件夹"><a href="#删除文件或文件夹" class="headerlink" title="删除文件或文件夹"></a>删除文件或文件夹</h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>rm [文件名]</td>
<td>删除当前目录下的文件，并发出询问，输入y(yes)确认删除，输入n(no)不删除。不加参数的rm只能删除文件，不能删除文件夹</td>
</tr>
<tr>
<td>rm –r [文件夹]</td>
<td>递归删除文件夹，会发出询问</td>
</tr>
<tr>
<td>rm –f [文件名]</td>
<td>删除文件，不询问（慎用）</td>
</tr>
<tr>
<td>rm –rf [文件夹]</td>
<td>递归删除文件夹，不询问（慎用）</td>
</tr>
<tr>
<td>rm –rf *</td>
<td>删除所有文件（慎用！！！）</td>
</tr>
<tr>
<td>rm –rf /*</td>
<td><strong>如果在生产环境使用了该命令，尽早跑路吧！</strong></td>
</tr>
</tbody></table>
<p><strong>参数</strong></p>
<ul>
<li>-r：参数r，增强命令，递归删除文件夹</li>
<li>-f：参数f，增强命令，强制删除，不询问</li>
</ul>
<h2 id="查找文件"><a href="#查找文件" class="headerlink" title="查找文件"></a>查找文件</h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>find [目录] -name [文件名]</td>
<td>通过名字查找目录下的指定文件</td>
</tr>
<tr>
<td>grep [字符串] [文件]</td>
<td>在指定文件中显示指定字符串</td>
</tr>
<tr>
<td>grep [字符串] [文件] –color</td>
<td>在指定文件中显示指定字符串，并高亮显示</td>
</tr>
<tr>
<td>grep [字符串] [文件] –color –A4 –B2</td>
<td>在指定文件中显示指定字符串，并高亮显示，显示后4行，前2行</td>
</tr>
</tbody></table>
<h2 id="解压缩"><a href="#解压缩" class="headerlink" title="解压缩"></a>解压缩</h2><p><strong>Linux压缩文件</strong></p>
<ul>
<li>Linux的压缩文件后缀名为tar.gz，相关命令使用tar，使用参数增强命令，实现解压缩功能。</li>
</ul>
<p><strong>参数</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>-c</td>
<td>创建一个新的tar文件</td>
</tr>
<tr>
<td>-v</td>
<td>显示运行过程的信息</td>
</tr>
<tr>
<td>-f</td>
<td>指定文件名</td>
</tr>
<tr>
<td>-z</td>
<td>调用gzip压缩命令进行压缩</td>
</tr>
<tr>
<td>-x</td>
<td>解开tar文件</td>
</tr>
</tbody></table>
<p><strong>打包压缩</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>tar –cvf [文件名.tar] [文件夹或文件]</td>
<td>将文件或文件打包为tar文件</td>
</tr>
<tr>
<td>tar –zcvf [文件名.tar.gz] [文件夹或文件]</td>
<td>将文件夹或文件打包并压缩为tar.gz文件</td>
</tr>
</tbody></table>
<p><strong>解压缩</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>tar –xvf [文件名.tar]</td>
<td>将tar文件解开</td>
</tr>
<tr>
<td>tar –zxvf [文件名tar.gz]</td>
<td>将tar.gz文件解压缩到当前目录</td>
</tr>
<tr>
<td>tar –zxvf [文件名tar.gz] –C [文件目录]</td>
<td>将tar.gz文件解压缩到指定目录下</td>
</tr>
</tbody></table>
<h2 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h2><ul>
<li>ps -a：查看所有</li>
<li>ps -u：以用户的格式显示</li>
<li>ps -x：显示后台进程运行参数</li>
<li>ps -ef：以全格式显示进程所有信息，包括父进程Pid，创建人，创建时间，进程号等等</li>
<li>ps –ef | grep [进程名]：搜索包含指定进程名的进程</li>
<li>kill -9 [进程名称]：强制杀死指定进程名称的进程</li>
</ul>
<h2 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h2><ul>
<li>命令1 | 命令2：将命令1的输出（结果）作为命令2的输入（参数）</li>
</ul>
<h2 id="sftp传输"><a href="#sftp传输" class="headerlink" title="sftp传输"></a>sftp传输</h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>alt+p快捷键</td>
<td>进入sftp传输</td>
</tr>
<tr>
<td>put [文件路径名]</td>
<td>上传至root目录</td>
</tr>
<tr>
<td>get [文件名]</td>
<td>从root目录下载</td>
</tr>
</tbody></table>
<h2 id="主机配置"><a href="#主机配置" class="headerlink" title="主机配置"></a>主机配置</h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>hostname</td>
<td>查看主机名配置</td>
</tr>
<tr>
<td>hostname [临时主机名]</td>
<td>将主机名临时修改临时主机名</td>
</tr>
</tbody></table>
<ul>
<li>持久化修改主机名，需要修改/etc/sysconfig/network文件</li>
</ul>
<h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>ifconfig</td>
<td>显示当前网络ip</td>
</tr>
<tr>
<td>service network restart</td>
<td>重启网络服务</td>
</tr>
<tr>
<td>ifconfig eth0 192.168.12.22</td>
<td>临时修改ip地址为192.168.12.22</td>
</tr>
</tbody></table>
<ul>
<li>持久化修改ip地址，需要修改/etc/sysconfig/network-scripts/ifcfg-eth0文件</li>
</ul>
<h2 id="系统服务"><a href="#系统服务" class="headerlink" title="系统服务"></a>系统服务</h2><p><strong>网络</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>service network status</td>
<td>查看网络服务的状态</td>
</tr>
<tr>
<td>service network stop</td>
<td>停止网络服务</td>
</tr>
<tr>
<td>service network start</td>
<td>启动网络服务</td>
</tr>
<tr>
<td>service network restart</td>
<td>重启网络服务</td>
</tr>
</tbody></table>
<p><strong>防火墙</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>service iptables status</td>
<td>查看防火墙状态</td>
</tr>
<tr>
<td>service iptables stop</td>
<td>关闭防火墙</td>
</tr>
<tr>
<td>service iptables start</td>
<td>启动防火墙</td>
</tr>
<tr>
<td>cservice iptables off</td>
<td>禁止防火墙开机自启</td>
</tr>
</tbody></table>
<p><strong>其他</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>service –-status-all</td>
<td>查看系统中所有后台服务</td>
</tr>
<tr>
<td>service –nltp</td>
<td>查看系统中网络进程的端口监听情况</td>
</tr>
</tbody></table>
<h2 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>clear</td>
<td>清屏（ctrl+l键也可以显示清屏）</td>
</tr>
</tbody></table>
<h2 id="思维导图"><a href="#思维导图" class="headerlink" title="思维导图"></a>思维导图</h2><p><img src="/images/2020/03/20200310224122937.png" alt="在这里插入图片描述"></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux系统安装JDK环境</title>
    <url>/2020/03/15/linux/Linux%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85JDK%E7%8E%AF%E5%A2%83/</url>
    <content><![CDATA[<p>我们可以通过这篇博客来学习 Linux 的常用命令。</p>
<span id="more"></span>

<h2 id="Linux版本的JDK下载"><a href="#Linux版本的JDK下载" class="headerlink" title="Linux版本的JDK下载"></a>Linux版本的JDK下载</h2><p>JDK下载官网：<a href="https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html">https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html</a></p>
<p><img src="/images/2020/03/20200315230304868.png" alt="在这里插入图片描述"></p>
<p>我们可以直接访问JDK的官方网站，去下载Linux版本对应的JDK安装包。<br>Linux系统直接下载tar.gz的压缩包即可。</p>
<h2 id="Linux环境安装JDK"><a href="#Linux环境安装JDK" class="headerlink" title="Linux环境安装JDK"></a>Linux环境安装JDK</h2><p>alt+p快捷键进入sftp传输方式，使用put命令将JDK上传至Linux的root目录下。</p>
<ul>
<li>Liunx环境下的sftp传输命令可以参考上一篇博客：<a href="/2020/03/10/linux/Linux常用命令/">Linux常用命令</a>的sftp传输。</li>
</ul>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mv</span> jdk<span class="literal">-8u241-linux-x64</span>.tar.gz /usr/local/</span><br></pre></td></tr></table></figure>
<p>使用mv剪切命令，将root目录下的JDK安装包剪切到<code>/usr/local/</code>目录下。</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">tar –zxvf jdk<span class="literal">-8u241-linux-x64</span>.tar.gz</span><br></pre></td></tr></table></figure>
<p>使用tar命令，将tar.gz压缩包解压缩在<code>/usr/local/</code>目录下。</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">rpm <span class="literal">-qa</span> | grep java</span><br></pre></td></tr></table></figure>
<p>查询安装的jdk的信息。</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> <span class="literal">-rf</span> jdk<span class="literal">-8u241-linux-x64</span>.tar.gz</span><br></pre></td></tr></table></figure>
<p>删除JDK的压缩包。</p>
<h2 id="配置JDK"><a href="#配置JDK" class="headerlink" title="配置JDK"></a>配置JDK</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">vi /etc/profile</span><br></pre></td></tr></table></figure>
<p>编辑/etc/下的profile文件。</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment">#set java environment</span></span><br><span class="line">JAVA_HOME=/usr/local/jdk1.<span class="number">8.0</span>_241</span><br><span class="line">CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span><br><span class="line">PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line">export JAVA_HOME CLASSPATH PATH</span><br></pre></td></tr></table></figure>
<p>在profile文件中添加上面的配置，保存并退出。</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>
<p>加载文件，使配置生效。</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">java –version</span><br></pre></td></tr></table></figure>
<p>查看JDK版本。</p>
<h2 id="卸载JDK"><a href="#卸载JDK" class="headerlink" title="卸载JDK"></a>卸载JDK</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">rpm <span class="literal">-e</span> <span class="literal">--nodeps</span> jdk1.<span class="number">8.0</span>_241</span><br></pre></td></tr></table></figure>
<p>卸载JDK。</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>JDK</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Liunx系统安装JDK环境（yum安装）</title>
    <url>/2020/12/10/linux/Liunx%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85JDK%E7%8E%AF%E5%A2%83%EF%BC%88yum%E5%AE%89%E8%A3%85%EF%BC%89/</url>
    <content><![CDATA[<blockquote>
<p>在之前我曾经写过一篇<a href="/2020/03/15/linux/Linux系统安装JDK环境/">Linux系统安装JDK环境</a>，这篇博客是使用JDK安装包的方式，由自己手动安装并配置JDK的环境变量。<br>而今天使用的是yum来进行JDK自动化安装，卸载。这种方式比起手动安装更加方便，快捷。</p>
</blockquote>
<span id="more"></span>

<h1 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h1><h2 id="1、检查Linux系统是否已经拥有JDK环境。"><a href="#1、检查Linux系统是否已经拥有JDK环境。" class="headerlink" title="1、检查Linux系统是否已经拥有JDK环境。"></a>1、检查Linux系统是否已经拥有JDK环境。</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">rpm <span class="literal">-qa</span> | grep java</span><br><span class="line">yum list installed | grep java</span><br><span class="line">以上两个命令都可以检测Linux系统是否安装有JDK环境，选择其一即可</span><br></pre></td></tr></table></figure>
<h2 id="2、检索JDK"><a href="#2、检索JDK" class="headerlink" title="2、检索JDK"></a>2、检索JDK</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum search java | grep -i --color jdk</span><br></pre></td></tr></table></figure>
<h2 id="3、安装JDK"><a href="#3、安装JDK" class="headerlink" title="3、安装JDK"></a>3、安装JDK</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">yum install <span class="literal">-y</span> java<span class="literal">-1</span>.<span class="number">8.0</span><span class="literal">-openjdk</span>*</span><br></pre></td></tr></table></figure>

<p>只需要极其简单的三步，JDK环境就已经安装完毕了。<br>我们可以通过<code>java -version</code>命令来查看JDK版本，如果显示JDK版本信息，则说明JDK安装成功。</p>
<p><strong>如图所示：</strong><br><img src="/images/2020/12/20201210214030991.png" alt="在这里插入图片描述"></p>
<h1 id="卸载JDK"><a href="#卸载JDK" class="headerlink" title="卸载JDK"></a>卸载JDK</h1><h2 id="1、卸载JDK"><a href="#1、卸载JDK" class="headerlink" title="1、卸载JDK"></a>1、卸载JDK</h2><p> 如果在安装之前，Linux系统已经有了JDK的环境，但是想要重新安装，则可以使用卸载命令卸载JDK环境。</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">yum <span class="literal">-y</span> remove java<span class="literal">-1</span>.<span class="number">8.0</span><span class="literal">-openjdk</span>*</span><br></pre></td></tr></table></figure>

<h1 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h1><h2 id="1、yum安装JDK的路径"><a href="#1、yum安装JDK的路径" class="headerlink" title="1、yum安装JDK的路径"></a>1、yum安装JDK的路径</h2><p>使用yum安装JDK，默认的JDK安装路径在<code>/usr/lib/jvm</code>目录下。</p>
<p><img src="/images/2020/12/20201210215253623.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1MTkzMzA0,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>JDK</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Shell报错syntax error: unexpected end of file</title>
    <url>/2021/01/01/linux/Shell%E6%8A%A5%E9%94%99/</url>
    <content><![CDATA[<p>执行shell脚本文件，报错<code>syntax error: unexpected end of file</code>。</p>
<p>使用vim工具打开脚本文件，却并没有发现有什么问题。</p>
<span id="more"></span>

<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">vim hello.sh</span><br></pre></td></tr></table></figure>
<p><img src="/images/2021/01/20210101190743117.png" alt="在这里插入图片描述"></p>
<p>但是只需要使用vim+参数的方式打开该文件，就会发现一些端倪。</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">vim <span class="literal">-b</span> hello.sh</span><br></pre></td></tr></table></figure>
<p><img src="/images/2021/01/20210101190806488.png" alt="在这里插入图片描述"></p>
<p>在每一个<code>shell</code>语句的末尾，都多了一个<code>^M</code>的标志，这其实是因为该文件是在<code>windows</code>环境下编写，然后传输到<code>Linux</code>环境来的，但是因为<code>windows</code>环境的文本有<code>\r</code>的回车标识，在<code>Linux</code>环境下就会出现不兼容的问题。</p>
<p><strong>解决方法：</strong></p>
<p>1、只需要把<code>^M</code>的标志符删除，该脚本文件即可正常执行。不过这种方法只适用于少量文本，如果是大量的脚本代码，这显然是不适用的。</p>
<p>2、通过命令的方式，将shell文件的格式改为unix。</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">vim hello.sh</span><br><span class="line">:<span class="built_in">set</span> fileformat=unix</span><br><span class="line">:x</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用<code>vim</code>编辑文本的时候，不要使用<code>-b</code>参数，否则是无法将<code>shell</code>文件的文件格式修改为<code>unix</code>的。</p>
</blockquote>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Shell</tag>
      </tags>
  </entry>
  <entry>
    <title>一篇博客教会你怎么安装VMware虚拟机</title>
    <url>/2020/04/19/linux/%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%95%99%E4%BC%9A%E4%BD%A0%E6%80%8E%E4%B9%88%E5%AE%89%E8%A3%85VMware%E8%99%9A%E6%8B%9F%E6%9C%BA/</url>
    <content><![CDATA[<blockquote>
<p>这篇博客我们来学习VMware虚拟机的安装</p>
</blockquote>
<span id="more"></span>

<h1 id="1、下载VMware虚拟机"><a href="#1、下载VMware虚拟机" class="headerlink" title="1、下载VMware虚拟机"></a>1、下载VMware虚拟机</h1><p>获取VMware虚拟机安装包的方法有两个：</p>
<p><strong>1、VMware官网：</strong><a href="https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html">https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html</a></p>
<p><img src="/images/2020/04/20200415174651464.png" alt="在这里插入图片描述">当然，VMware是一款商业软件，是收费的。</p>
<p><strong>2、除了官网下载之外，我还在自己的百度网盘中上传了VMware安装软件。</strong><br>链接：<a href="https://pan.baidu.com/s/1QON5-U4joSboW4Xb3N0Bgg">https://pan.baidu.com/s/1QON5-U4joSboW4Xb3N0Bgg</a><br>提取码：92xr</p>
<h1 id="2、安装VMware虚拟机"><a href="#2、安装VMware虚拟机" class="headerlink" title="2、安装VMware虚拟机"></a>2、安装VMware虚拟机</h1><p>我们直接运行VMware虚拟机安装包的exe文件，开始安装。</p>
<p><strong>1、释放文件</strong><br><img src="/images/2020/04/2020041517511543.png" alt="在这里插入图片描述"></p>
<p><strong>2、VMware安装开始界面</strong><br><img src="/images/2020/04/2020041517525792.png" alt="在这里插入图片描述"></p>
<p><strong>3、接受许可协议</strong><br><img src="/images/2020/04/20200415175421150.png" alt="在这里插入图片描述"></p>
<p><strong>4、选择安装磁盘位置</strong><br><img src="/images/2020/04/20200415180809522.png" alt="在这里插入图片描述"></p>
<p><img src="/images/2020/04/20200415180916743.png" alt="在这里插入图片描述"></p>
<p><strong>5、自定义安装</strong><br><img src="/images/2020/04/2020041518102297.png" alt="在这里插入图片描述"></p>
<p><strong>6、快捷方式</strong><br><img src="/images/2020/04/20200415175746169.png" alt="在这里插入图片描述"></p>
<p><strong>7、安装</strong><br><img src="/images/2020/04/20200415175810600.png" alt="在这里插入图片描述"></p>
<p><strong>8、安装过程</strong><br><img src="/images/2020/04/20200415175846361.png" alt="在这里插入图片描述"></p>
<blockquote>
<p><strong>备注：如果是使用我百度网盘中的安装包，安装完了之后会跳出一个破解界面，点击许可证——输入——完成即可。</strong></p>
</blockquote>
<h1 id="3、开启VMware虚拟机"><a href="#3、开启VMware虚拟机" class="headerlink" title="3、开启VMware虚拟机"></a>3、开启VMware虚拟机</h1><p><strong>当安装完成之后，电脑桌面会出现一个VMware虚拟机的图标：</strong><br><img src="/images/2020/04/20200415181445981.png" alt="在这里插入图片描述"></p>
<p><strong>双击开启VMware虚拟机，虚拟机界面如下：</strong><br><img src="/images/2020/04/20200415181640707.png" alt="在这里插入图片描述"></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>CentOS</tag>
        <tag>VMware</tag>
      </tags>
  </entry>
  <entry>
    <title>一篇博客教会你怎么安装CentOS系统</title>
    <url>/2020/04/19/linux/%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%95%99%E4%BC%9A%E4%BD%A0%E6%80%8E%E4%B9%88%E5%AE%89%E8%A3%85CentOS%E7%B3%BB%E7%BB%9F/</url>
    <content><![CDATA[<blockquote>
<p>这篇博客我们来学习怎样通过VMware虚拟机软件来安装CentOS系统。<br>这篇博客是在VMware虚拟机的基础上安装CentOS系统，所以如果不知道怎么安装VMware虚拟机的同学，可以参考我之前的博客：<a href="/2020/04/19/一篇博客教会你怎么安装VMware虚拟机">一篇博客教会你怎么安装VMware虚拟机</a></p>
</blockquote>
<span id="more"></span>

<h1 id="一、下载CentOS系统镜像文件"><a href="#一、下载CentOS系统镜像文件" class="headerlink" title="一、下载CentOS系统镜像文件"></a>一、下载CentOS系统镜像文件</h1><p>CentOS系统的Linux系统比较流行的一个发行版本，CentOS系统是免费，所有人都可以从CentOS系统的官方网站中获取CentOS系统的镜像文件。<br>CentOS下载官网：<a href="http://isoredirect.centos.org/centos/8/isos/x86_64/CentOS-8.1.1911-x86_64-dvd1.iso">http://isoredirect.centos.org/centos/8/isos/x86_64/CentOS-8.1.1911-x86_64-dvd1.iso</a><br>在CentOS的官网中，我们可以看到很多个镜像网站下载地址，我们可以选择国内的镜像来进行下载，这样的话下载速度会非常可观。<br>国内的镜像推荐<code>华为</code>或者<code>阿里云</code>的镜像。<br><img src="/images/2020/04/20200415185900442.png" alt="在这里插入图片描述"></p>
<h1 id="二、在VMware中创建虚拟机"><a href="#二、在VMware中创建虚拟机" class="headerlink" title="二、在VMware中创建虚拟机"></a>二、在VMware中创建虚拟机</h1><p><strong>1、我们<code>以管理员身份运行VMware</code>，打开VMware虚拟机，点击创建新的虚拟机</strong><br><img src="/images/2020/04/20200415190905720.png" alt="在这里插入图片描述"><br><strong>2、开始创建虚拟机</strong><br><img src="/images/2020/04/20200415191542142.png" alt="在这里插入图片描述"><br><strong>3、安装客户机操作系统</strong><br><img src="/images/2020/04/20200415191722271.png" alt="在这里插入图片描述"><br><strong>4、选择客户机操作系统</strong><br><img src="/images/2020/04/20200415191925827.png" alt="在这里插入图片描述"><br><strong>5、命名虚拟机</strong><br><img src="/images/2020/04/20200415193411410.png" alt="在这里插入图片描述"><br><strong>6、指定磁盘容量</strong><br><img src="/images/2020/04/20200415192700707.png" alt="在这里插入图片描述"><br><strong>7、自定义配置</strong><br><img src="/images/2020/04/20200415193812791.png" alt="在这里插入图片描述"><br><strong>8、指定虚拟机内存</strong><br><img src="/images/2020/04/20200415194153507.png" alt="在这里插入图片描述"><br><strong>9、指定ISO映像文件路径</strong><br><img src="/images/2020/04/20200415194547766.png" alt="在这里插入图片描述"><br><strong>10、移除打印机</strong><br><img src="/images/2020/04/20200415194757891.png" alt="在这里插入图片描述"><br><strong>11、点击完成</strong><br><img src="/images/2020/04/20200415194908763.png" alt="在这里插入图片描述"><br><strong>12、虚拟机创建完成</strong><br><img src="/images/2020/04/20200415201407502.png" alt="在这里插入图片描述"></p>
<h1 id="三、安装CentOS系统"><a href="#三、安装CentOS系统" class="headerlink" title="三、安装CentOS系统"></a>三、安装CentOS系统</h1><p><strong>1、我们创建好虚拟机之后，就可以开始安装操作系统了，我们首先开启之前创建的虚拟机</strong><br><img src="/images/2020/04/2020041520181421.png" alt="在这里插入图片描述"><br><strong>2、选择检测安装</strong><br><img src="/images/2020/04/2020041520243732.png" alt="在这里插入图片描述"><br><img src="/images/2020/04/20200415202447999.png" alt="在这里插入图片描述"><br>选择检测安装之后，虚拟机会自动帮我们开始检测，这个过程大概<code>30-60秒</code>左右，等待即可。<br>完成之后出现如下界面：<br><img src="/images/2020/04/20200415202856283.png" alt="在这里插入图片描述"><br><strong>3、选择简体中文</strong><br><img src="/images/2020/04/20200415202958121.png" alt="在这里插入图片描述"><br><strong>4、调整系统时间</strong><br><img src="/images/2020/04/20200415203707220.png" alt="在这里插入图片描述"><br><img src="/images/2020/04/20200415203901353.png" alt="在这里插入图片描述"><br><strong>5、选择服务器类型</strong><br><img src="/images/2020/04/20200415204209197.png" alt="在这里插入图片描述"><br><strong>6、选择系统的安装目的地</strong><br><img src="/images/2020/04/20200415204351669.png" alt="在这里插入图片描述"><br><img src="/images/2020/04/20200415204930116.png" alt="在这里插入图片描述"><br><strong>7、开启虚拟机网络和指定主机名</strong><br><img src="/images/2020/04/20200415204953923.png" alt="在这里插入图片描述"><br><img src="/images/2020/04/20200415205835878.png" alt="在这里插入图片描述"><br><strong>8、开始安装</strong><br><img src="/images/2020/04/20200415210151647.png" alt="在这里插入图片描述"><br><strong>9、设置Root用户密码</strong><br><img src="/images/2020/04/20200415210335244.png" alt="在这里插入图片描述"><br><img src="/images/2020/04/20200415210844650.png" alt="在这里插入图片描述"><br><strong>10、等待安装</strong><br><img src="/images/2020/04/20200415211013781.png" alt="在这里插入图片描述"><br>等待安装需要一小段时间，耐心等待即可。</p>
<p><strong>11、重启系统</strong><br><img src="/images/2020/04/20200415211949410.png" alt="在这里插入图片描述"><br><strong>12、初始设置</strong><br><img src="/images/2020/04/20200415212211287.png" alt="在这里插入图片描述"><br><img src="/images/2020/04/20200415212327812.png" alt="在这里插入图片描述"><br><strong>13、结束配置</strong><br><img src="/images/2020/04/20200415212511711.png" alt="在这里插入图片描述"><br><strong>14、安装成功，欢迎界面</strong><br><img src="/images/2020/04/20200415212923944.png" alt="在这里插入图片描述"><br><img src="/images/2020/04/20200415213112150.png" alt="在这里插入图片描述"><br><img src="/images/2020/04/20200415213157314.png" alt="在这里插入图片描述"><br><strong>15、设置全名和用户名</strong><br><img src="/images/2020/04/20200415213425330.png" alt="在这里插入图片描述"><br><strong>16、设置密码</strong><br><img src="/images/2020/04/20200415213638959.png" alt="在这里插入图片描述"><br><strong>17、一切就绪，开始用吧</strong><br><img src="/images/2020/04/20200415213739774.png" alt="在这里插入图片描述"><br><strong>18、登录系统</strong><br><img src="/images/2020/04/20200415213942326.png" alt="在这里插入图片描述"><br><img src="/images/2020/04/20200415214001655.png" alt="在这里插入图片描述"><br><img src="/images/2020/04/20200415214020269.png" alt="在这里插入图片描述"><br><strong>19、开始使用</strong><br><img src="/images/2020/04/20200415214440688.png" alt="在这里插入图片描述"></p>
<p><strong>历经千难万险，终于把CentOS系统安装成功了，可以开始来上手试试CentOS系统了。</strong></p>
<blockquote>
<p><strong>最后提醒一下，如果不需要使用虚拟机了，不要直接关闭虚拟机，如果直接关闭虚拟机，下一次开机的时候会出现很多的问题，所以我们不要使用虚拟机之后，直接将虚拟机<code>挂起</code>，这样下次需要使用的时候，直接继续运行即可！</strong></p>
</blockquote>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>CentOS</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL警告信息：不建议在没有服务器身份验证的情况下建立SSL连接</title>
    <url>/2020/06/26/mysql/MySQL%E8%AD%A6%E5%91%8A%E4%BF%A1%E6%81%AF%EF%BC%9A%E4%B8%8D%E5%BB%BA%E8%AE%AE%E5%9C%A8%E6%B2%A1%E6%9C%89%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%BB%BA%E7%AB%8BSSL%E8%BF%9E%E6%8E%A5/</url>
    <content><![CDATA[<p>前段时间重装了MySQL数据库，将原本的MySQL5.5版本换成了5.7版本，今天在运行以前的项目的时候，突然爆出了如下的错误信息：</p>
<span id="more"></span>

<p><font color="#FF0000">Establishing SSL connection without server’s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn’t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to ‘false’. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.</font ></p>
<p>不建议在没有服务器身份验证的情况下建立SSL连接。 根据MySQL 5.5.45 +，5.6.26 +和5.7.6+的要求，如果未设置显式选项，则默认情况下必须建立SSL连接。 为了与不使用SSL的现有应用程序兼容，将verifyServerCertificate属性设置为’false’。 您需要通过设置useSSL = false显式禁用SSL，或者设置useSSL = true并提供信任库以进行服务器证书验证。</p>
<p><strong>这个报错信息比较容易理解，我们直接在MySQL的url连接中添加一个参数<code>useSSL=false</code>，即可解决该报错问题。</strong></p>
<p>例如：<code>jdbc:mysql://localhost:3306/myshop?useSSL=false</code></p>
]]></content>
      <categories>
        <category>MySql</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Python基本数据类型</title>
    <url>/2021/11/21/python/Python%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
    <content><![CDATA[<blockquote>
<p>Python 有多种基本数据类型，用来存储内存中的数据。Python 一共提供了三种基本数据类型，其中分为是：数值型、字符型、布尔型。</p>
</blockquote>
<span id="more"></span>

<h2 id="数值型"><a href="#数值型" class="headerlink" title="数值型"></a>数值型</h2><blockquote>
<p>数值型就是用来存储数字的类型，例如一个人的年龄，身高，体重，一家公司的年度营收，员工总数等等。</p>
</blockquote>
<p>在 Python 中，提供了数字类型来保存这些数据，并且这些数值类型是不可改变的数据类型。如果需要修改数字类型变量的值，那么会先把该值放入内存中，然后修改变量让其指向新的内存地址。</p>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">10</span></span><br><span class="line">b = <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(b))</span><br><span class="line">a = <span class="number">12</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(b))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">140718916818880</span></span><br><span class="line"><span class="number">140718916818880</span></span><br><span class="line"><span class="number">140718916818944</span></span><br><span class="line"><span class="number">140718916818880</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>说明：在 Python 语言中，可以使用内置的函数 <code>id()</code> 来获取变量所指向的内存地址。</p>
</blockquote>
<p>a 与 b 虽然是不同的变量，但是他们的值都是相同的，所以它们在内存中的地址也是相同的，而当改变变量 a 的值的时候，并不是直接改变变量 a 的值，而是改变了变量 a 所指向的内存地址。</p>
<p>在 Python 语言中，数值类型主要包括整数、浮点数和复数。</p>
<h3 id="整数"><a href="#整数" class="headerlink" title="整数"></a>整数</h3><blockquote>
<p>整数就是整数数值，是没有小数部分的数值，例如：0、3、10、-1 等等。整数包括正整数、负数和0。Python 中的整数会自动转换高精度计算，所以 Python 中的整数类型的位数是任意的。</p>
</blockquote>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">123456</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">b = <span class="number">0</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line">c = -<span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line">d = <span class="number">25465486413516513542315452153423134654134531</span></span><br><span class="line"><span class="built_in">print</span>(d)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">123456</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line">-<span class="number">1</span></span><br><span class="line"><span class="number">25465486413516513542315452153423134654134531</span></span><br></pre></td></tr></table></figure>



<p>值得一提的是，Python 中的整数类型，如果是十进制整数，除了0之外，其他数值不能以0作为开头。</p>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">e = <span class="number">000000000</span></span><br><span class="line"><span class="built_in">print</span>(e)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f = 000023</span><br><span class="line"><span class="built_in">print</span>(f)</span><br></pre></td></tr></table></figure>

<p>运行结果：报错</p>
<p>Python 中的整数除了十进制类型外，还有八进制、十六进制、二进制等等，在这里不过多讲解。</p>
<h3 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h3><blockquote>
<p>浮点数主要由整数部分和小数部分组成，主要用于处理包括小数的数值。例如：3.1415926、-152.01、0.0001 等。</p>
</blockquote>
<p>在使用浮点数计算的时候，可能会出现小数位数不确定的情况。</p>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">0.1</span> + <span class="number">0.1</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">b = <span class="number">0.1</span> + <span class="number">0.2</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">0.2</span></span><br><span class="line"><span class="number">0.30000000000000004</span></span><br></pre></td></tr></table></figure>

<p>这是因为浮点数值在内存中保存方法导致的，基本上所有的计算机语言都存在这个问题，我们这里直接忽略多余的小数位即可。</p>
<h3 id="复数"><a href="#复数" class="headerlink" title="复数"></a>复数</h3><blockquote>
<p>Python 中的复数与数学中的复数的表现形式完全一致，都是有实数和虚数构成，并且使用 <code>j</code> 或 <code>J</code> 表示虚部。</p>
</blockquote>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">6.54</span> + <span class="number">32.01j</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">(<span class="number">6.54</span>+<span class="number">32.01j</span>)</span><br></pre></td></tr></table></figure>



<h2 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h2><blockquote>
<p>字符串就是连续的字符组成的，通常使用 单引号<code>&#39;&#39;</code>、双引号<code>&quot;&quot;</code>、三引号<code>&#39;&#39;&#39;&#39;&#39;&#39;</code>或者 <code>&quot;&quot;&quot;&quot;&quot;&quot;</code>包裹起来。</p>
</blockquote>
<p>这三种类在 Python 中，字符串和整数一样，也属于不可变序列。</p>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&quot;字符串类型&quot;</span></span><br><span class="line">b = <span class="string">&quot;字符串类型&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(b))</span><br><span class="line">a = <span class="string">&quot;字符串类型2&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(b))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1357027606320</span></span><br><span class="line"><span class="number">1357027606320</span></span><br><span class="line"><span class="number">1357027224800</span></span><br><span class="line"><span class="number">1357027606320</span></span><br></pre></td></tr></table></figure>



<p>在 Python 中，单引号和双引号的字符串都只能在同一行，而三引号的字符串可以多行书写。</p>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&#x27;单引号字符串&#x27;</span></span><br><span class="line">b = <span class="string">&quot;双引号字符串&quot;</span></span><br><span class="line">c = <span class="string">&#x27;&#x27;&#x27;三引号字符串</span></span><br><span class="line"><span class="string">    可以多行展示</span></span><br><span class="line"><span class="string">    |————————|</span></span><br><span class="line"><span class="string">    |        |</span></span><br><span class="line"><span class="string">    |--------|</span></span><br><span class="line"><span class="string">    结束&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="built_in">print</span>(c)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">单引号字符串</span><br><span class="line">双引号字符串</span><br><span class="line">三引号字符串</span><br><span class="line">    可以多行展示</span><br><span class="line">    |————————|</span><br><span class="line">    |        |</span><br><span class="line">    |--------|</span><br><span class="line">    结束</span><br></pre></td></tr></table></figure>



<p>在 Python 中，存在转义字符，所谓转义字符，是指使用反斜杠 <code>\</code> 对一些特殊字符进行转义。</p>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># \n 换行符</span></span><br><span class="line">a = <span class="string">&quot;Python\n字符串a&quot;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># \0 空</span></span><br><span class="line">b = <span class="string">&quot;Python\0字符串b&quot;</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="comment"># \t 水平制表符</span></span><br><span class="line">c = <span class="string">&quot;Python\t字符串c&quot;</span></span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line"><span class="comment"># \&quot; 双引号</span></span><br><span class="line">d = <span class="string">&quot;Python\&quot;字符串d&quot;</span></span><br><span class="line"><span class="built_in">print</span>(d)</span><br><span class="line"><span class="comment"># \&#x27; 单引号</span></span><br><span class="line">e = <span class="string">&#x27;Python\&#x27;字符串e&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(e)</span><br><span class="line"><span class="comment"># \\ 反斜杠</span></span><br><span class="line">f = <span class="string">&quot;Python\\字符串f&quot;</span></span><br><span class="line"><span class="built_in">print</span>(f)</span><br><span class="line"><span class="comment"># \f 换页</span></span><br><span class="line">j = <span class="string">&quot;Python\f字符串j&quot;</span></span><br><span class="line"><span class="built_in">print</span>(j)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Python</span><br><span class="line">字符串a</span><br><span class="line">Python 字符串b</span><br><span class="line">Python	字符串c</span><br><span class="line">Python<span class="string">&quot;字符串d</span></span><br><span class="line"><span class="string">Python&#x27;字符串e</span></span><br><span class="line"><span class="string">Python\字符串f</span></span><br><span class="line"><span class="string">Python字符串j</span></span><br></pre></td></tr></table></figure>



<p>除了这些转义字符外，还有其他一些不常用的转义字符，在这里不过多讲述。</p>
<p>值得一提的是，在 Python 中，在字符串定界符引前加上字母<code>r</code>（或者R），即可原样输出字符串。</p>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">r&quot;Python\n字符串a&quot;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Python\n字符串a</span><br></pre></td></tr></table></figure>





<h2 id="布尔类型"><a href="#布尔类型" class="headerlink" title="布尔类型"></a>布尔类型</h2><blockquote>
<p>布尔类型主要表示为真值或者假值，在 Python 中，<code>Treu</code> 和 <code>False</code> 都解释为布尔类型。</p>
</blockquote>
<p>Python 中的布尔类型可以解释为数值类型进行计算，<code>True</code> 解释为 1，<code>False</code> 解释为 0。</p>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="literal">True</span> +  <span class="number">1</span></span><br><span class="line">b = <span class="literal">False</span> + <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(b)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>



<p>在 Python 中，所有的对象都可以真值测试，其中，以下几种情况可以被判定为 <code>False</code>，其他情况则为 <code>True</code>。</p>
<ul>
<li><code>False</code> 或 <code>None</code>。</li>
<li>数值中的0，包括0、0.0、虚数0。</li>
<li>空序列，包括空字符串、空元组、空列表、空字典。</li>
<li>自定义的对象，该对象的<code>__bool__</code>  方法返回 <code>False</code>，或者 <code>__len__</code> 方法返回0。</li>
</ul>
<h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><p>在 Python 中，可以使用 Python 的内置函数，将一些类型的数据转换为另外一种类型。</p>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(a))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="built_in">str</span>(a)))</span><br><span class="line"></span><br><span class="line">b = <span class="string">&quot;100&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(b))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="built_in">int</span>(b)))</span><br></pre></td></tr></table></figure>



<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;int&#x27;</span>&gt;</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;str&#x27;</span>&gt;</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;str&#x27;</span>&gt;</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;int&#x27;</span>&gt;</span><br></pre></td></tr></table></figure>



<p>常用的类型转换函数有：</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>int(x)</td>
<td>将x转换为整数类型</td>
</tr>
<tr>
<td>float(x)</td>
<td>将x转换为浮点数类型</td>
</tr>
<tr>
<td>complex(real [,imag])</td>
<td>创建一个复数</td>
</tr>
<tr>
<td>str(x)</td>
<td>将x转换为字符串类型</td>
</tr>
<tr>
<td>repr(x)</td>
<td>将x转换为表达式字符串</td>
</tr>
<tr>
<td>eval(x)</td>
<td>计算在字符串中的有效 Python 表达式，并返回一个对象</td>
</tr>
<tr>
<td>chr(x)</td>
<td>将整数x转换为一个字符</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Python序列</title>
    <url>/2021/11/29/python/Python%E5%BA%8F%E5%88%97/</url>
    <content><![CDATA[<blockquote>
<p>序列是一块用于存放多个值的连续的内存空间，并按照一定的顺序排列，每一个值（称为元素）都分配一个数字（称为索引或者位置）。通过索引可以取出对应位置的值。</p>
</blockquote>
<span id="more"></span>

<h1 id="序列的通用操作"><a href="#序列的通用操作" class="headerlink" title="序列的通用操作"></a>序列的通用操作</h1><p>在 Python 中，序列的主要结构有列表、元组、集合、字典和字符串。对于这些序列有一些通用操作，例如索引，切片，相加，相乘，序列长度，是否包含某个元素，序列最大值，序列最小值等等，其中集合和字典不支持索引、切片、相加、相乘操作。</p>
<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><p> 序列中的每一个元素都有一个编号，也称之为索引。序列从左往右开始数，第一个元素的索引是0，第二个元素的索引是1，以此类推。</p>
<p>值得一提的是，Python 的索引可以是负数，从右往左数，第一个元素的索引是-1，第二个元素的索引是-2，以此类推。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = [<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(arr[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(arr[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(arr[-<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(arr[-<span class="number">2</span>])</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">第一个元素</span><br><span class="line">第二个元素</span><br><span class="line">第四个元素</span><br><span class="line">第三个元素</span><br></pre></td></tr></table></figure>



<h2 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h2><p>切片操作是访问序列中元素的一种方法，可以用于访问序列中指定范围的元素，通过切片操作生成一个新的序列。</p>
<p>切片操作的语法为：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">name[start : end : step]</span><br></pre></td></tr></table></figure>



<ul>
<li>name 为序列名称</li>
<li>start 为切片开始的索引，如果不指定，默认为0</li>
<li>end 为切片结束的索引 + 1，如果不指定，默认为序列的长度</li>
<li>step 为切片的步长，如果不指定，默认为1</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">arr = <span class="selector-attr">[<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>]</span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(arr[<span class="number">1</span>:<span class="number">4</span>])</span></span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(arr[<span class="number">0</span>:<span class="number">2</span>])</span></span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(arr[<span class="number">1</span>:<span class="number">4</span>:<span class="number">2</span>])</span></span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(arr[:])</span></span></span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="string">&#x27;第二个元素&#x27;</span>, <span class="string">&#x27;第三个元素&#x27;</span>, <span class="string">&#x27;第四个元素&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;第一个元素&#x27;</span>, <span class="string">&#x27;第二个元素&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;第二个元素&#x27;</span>, <span class="string">&#x27;第四个元素&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;第一个元素&#x27;</span>, <span class="string">&#x27;第二个元素&#x27;</span>, <span class="string">&#x27;第三个元素&#x27;</span>, <span class="string">&#x27;第四个元素&#x27;</span>]</span><br></pre></td></tr></table></figure>





<h2 id="序列相加"><a href="#序列相加" class="headerlink" title="序列相加"></a>序列相加</h2><p>在 Python 中，同类型的序列支持相加操作，相加之后的序列元素是原来两个序列的元素组合在一起，重复的元素不会去重，可以直接使用 + 运算符实现。</p>
<p>Python相加只支持同类型的序列，比如列表+列表，不支持列表+元组的操作。</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">arr1 = <span class="selector-attr">[<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>]</span></span><br><span class="line">arr2 = <span class="selector-attr">[<span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>]</span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(arr1 + arr2)</span></span></span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="string">&#x27;第一个元素&#x27;</span>, <span class="string">&#x27;第二个元素&#x27;</span>, <span class="string">&#x27;第三个元素&#x27;</span>, <span class="string">&#x27;第四个元素&#x27;</span>]</span><br></pre></td></tr></table></figure>





<h2 id="序列相乘"><a href="#序列相乘" class="headerlink" title="序列相乘"></a>序列相乘</h2><p>序列相乘的操作和序列相加的操作结果类似，相乘是将原来的序列元素乘以倍数，相当于倍数个序列相加。</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">arr = <span class="selector-attr">[<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>]</span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(arr * <span class="number">3</span>)</span></span></span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="string">&#x27;第一个元素&#x27;</span>, <span class="string">&#x27;第二个元素&#x27;</span>, <span class="string">&#x27;第一个元素&#x27;</span>, <span class="string">&#x27;第二个元素&#x27;</span>, <span class="string">&#x27;第一个元素&#x27;</span>, <span class="string">&#x27;第二个元素&#x27;</span>]</span><br></pre></td></tr></table></figure>



<h2 id="序列长度"><a href="#序列长度" class="headerlink" title="序列长度"></a>序列长度</h2><p>Python 提供了内置的函数计算序列的长度。</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">arr = <span class="selector-attr">[<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>]</span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">&quot;序列长度：&quot;</span>, len(arr)</span></span>)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">序列长度： <span class="number">4</span></span><br></pre></td></tr></table></figure>



<h2 id="是否包含某个元素"><a href="#是否包含某个元素" class="headerlink" title="是否包含某个元素"></a>是否包含某个元素</h2><p>在 Python 中，可以使用 in 关键字，判断某个元素是否是序列的成员。</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">arr = <span class="selector-attr">[<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>]</span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">&quot;第二个元素&quot;</span> in arr)</span></span></span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>



<h2 id="序列最大最小值"><a href="#序列最大最小值" class="headerlink" title="序列最大最小值"></a>序列最大最小值</h2><p>Python 同样提供了内置函数来计算序列中的最大元素和最小元素。</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">arr = <span class="selector-attr">[23, 234, 324, 1, 34, 23, 6, 34]</span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(min(arr)</span></span>)</span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(max(arr)</span></span>)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">324</span></span><br></pre></td></tr></table></figure>



<h2 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h2><p>Python 提供了大量的内置函数，用于操作序列。</p>
<table>
<thead>
<tr>
<th>内置函数</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>list()</td>
<td>将序列转换为列表</td>
</tr>
<tr>
<td>str()</td>
<td>将序列转换为字符串</td>
</tr>
<tr>
<td>sum()</td>
<td>计算元素和（元素为数字类型）</td>
</tr>
<tr>
<td>sorted()</td>
<td>对元素进行排序</td>
</tr>
<tr>
<td>reversed()</td>
<td>反向序列中的元素</td>
</tr>
<tr>
<td>enumerate()</td>
<td>将序列组合为一个索引序列，多用在for循环中</td>
</tr>
</tbody></table>
<h1 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h1><ul>
<li>可变序列。</li>
<li>所有元素放在一对中括号 <code>[]</code> 中，每个元素之间使用英文逗号 <code>,</code> 分割开来。</li>
<li>元素可以是任意类型。</li>
<li>同一列表的元素类型可以不同。</li>
<li>元素可重复。</li>
</ul>
<h2 id="创建空列表"><a href="#创建空列表" class="headerlink" title="创建空列表"></a>创建空列表</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">emptylist = []</span><br></pre></td></tr></table></figure>



<h2 id="创建列表"><a href="#创建列表" class="headerlink" title="创建列表"></a>创建列表</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>]</span><br></pre></td></tr></table></figure>



<h2 id="list-函数"><a href="#list-函数" class="headerlink" title="list() 函数"></a>list() 函数</h2><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">arr = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">10</span>, <span class="number">20</span>, <span class="number">2</span>))</span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(arr)</span></span></span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">10</span>, <span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">18</span>]</span><br></pre></td></tr></table></figure>



<h2 id="删除列表"><a href="#删除列表" class="headerlink" title="删除列表"></a>删除列表</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>]</span><br><span class="line"><span class="keyword">del</span> <span class="built_in">list</span></span><br></pre></td></tr></table></figure>

<h2 id="遍历列表"><a href="#遍历列表" class="headerlink" title="遍历列表"></a>遍历列表</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> <span class="built_in">list</span>:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 内置函数 enumerate()</span></span><br><span class="line"><span class="keyword">for</span> index, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">list</span>):</span><br><span class="line">    <span class="built_in">print</span>(index, item)</span><br></pre></td></tr></table></figure>



<h2 id="访问元素"><a href="#访问元素" class="headerlink" title="访问元素"></a>访问元素</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>[<span class="number">1</span>])</span><br></pre></td></tr></table></figure>



<h2 id="添加元素"><a href="#添加元素" class="headerlink" title="添加元素"></a>添加元素</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>)</span><br><span class="line"><span class="built_in">list</span>.append(<span class="string">&quot;第五元素&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="string">&#x27;第一个元素&#x27;</span>, <span class="string">&#x27;第二个元素&#x27;</span>, <span class="string">&#x27;第三个元素&#x27;</span>, <span class="string">&#x27;第四个元素&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;第一个元素&#x27;</span>, <span class="string">&#x27;第二个元素&#x27;</span>, <span class="string">&#x27;第三个元素&#x27;</span>, <span class="string">&#x27;第四个元素&#x27;</span>, <span class="string">&#x27;第五元素&#x27;</span>]</span><br></pre></td></tr></table></figure>



<h2 id="修改元素"><a href="#修改元素" class="headerlink" title="修改元素"></a>修改元素</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>]</span><br><span class="line"><span class="built_in">list</span>[<span class="number">0</span>] = <span class="string">&quot;修改后的第一个元素&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="string">&#x27;修改后的第一个元素&#x27;</span>, <span class="string">&#x27;第二个元素&#x27;</span>, <span class="string">&#x27;第三个元素&#x27;</span>, <span class="string">&#x27;第四个元素&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h2 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a>删除元素</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>]</span><br><span class="line"><span class="keyword">del</span> <span class="built_in">list</span>[<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="string">&#x27;第一个元素&#x27;</span>, <span class="string">&#x27;第三个元素&#x27;</span>, <span class="string">&#x27;第四个元素&#x27;</span>]</span><br></pre></td></tr></table></figure>



<h2 id="列表计算"><a href="#列表计算" class="headerlink" title="列表计算"></a>列表计算</h2><p>使用列表对象的 <code>count()</code> 方法，可以统计列表中包含的某个元素出现的次数，<code>index()</code> 方法，可以获取该对象在列表中首次出现的索引位置。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>.count(<span class="string">&quot;第二个元素&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>.index(<span class="string">&quot;第二个元素&quot;</span>))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>



<p>Python 的内置函数 <code>sum()</code> 可以对列表的元素进行统计。（列表的元素必须是数字类型）</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">list = <span class="selector-attr">[1, 3, 34, 451, 3]</span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(sum(list)</span></span>)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">492</span></span><br></pre></td></tr></table></figure>



<p>可以使用列表对象的方法 <code>sort()</code> 或者 Python 的内置函数对列表进行排序。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">34</span>, <span class="number">451</span>, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">list</span>.sort()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>)</span><br><span class="line"><span class="built_in">list</span>.sort(reverse=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>(<span class="built_in">list</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>(<span class="built_in">list</span>, reverse=<span class="literal">True</span>))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">34</span>, <span class="number">451</span>]</span><br><span class="line">[<span class="number">451</span>, <span class="number">34</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>]</span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">34</span>, <span class="number">451</span>]</span><br><span class="line">[<span class="number">451</span>, <span class="number">34</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure>



<p>值得一提的是，列表对象的 <code>sort()</code> 方法，是在原列表的基础上对列表元素进行排序，而内置函数 <code>sorted()</code>是建立了一个副本，对该副本的元素进行排序。</p>
<h2 id="列表推导式"><a href="#列表推导式" class="headerlink" title="列表推导式"></a>列表推导式</h2><p>使用列表推导式，可以快速生成一个列表。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">list1 = [random.randint(<span class="number">10</span>, <span class="number">100</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"><span class="built_in">print</span>(list1)</span><br><span class="line"></span><br><span class="line">list2 = [x * <span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> list1]</span><br><span class="line"><span class="built_in">print</span>(list2)</span><br><span class="line"></span><br><span class="line">list3 = [x <span class="keyword">for</span> x <span class="keyword">in</span> list1 <span class="keyword">if</span> x &gt; <span class="number">50</span>]</span><br><span class="line"><span class="built_in">print</span>(list3)</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">25</span>, <span class="number">98</span>, <span class="number">73</span>, <span class="number">70</span>, <span class="number">95</span>, <span class="number">30</span>, <span class="number">62</span>, <span class="number">15</span>, <span class="number">23</span>, <span class="number">69</span>]</span><br><span class="line">[<span class="number">50</span>, <span class="number">196</span>, <span class="number">146</span>, <span class="number">140</span>, <span class="number">190</span>, <span class="number">60</span>, <span class="number">124</span>, <span class="number">30</span>, <span class="number">46</span>, <span class="number">138</span>]</span><br><span class="line">[<span class="number">98</span>, <span class="number">73</span>, <span class="number">70</span>, <span class="number">95</span>, <span class="number">62</span>, <span class="number">69</span>]</span><br></pre></td></tr></table></figure>





<h1 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h1><ul>
<li>元组与列表唯一的不同是，元组是不可变序列，不能单独对元组的某一个元素进行修改。</li>
</ul>
<h2 id="创建空元组"><a href="#创建空元组" class="headerlink" title="创建空元组"></a>创建空元组</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">emptytuple = ()</span><br></pre></td></tr></table></figure>

<h2 id="创建元组"><a href="#创建元组" class="headerlink" title="创建元组"></a>创建元组</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tuplearr = (<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="tuple-函数"><a href="#tuple-函数" class="headerlink" title="tuple() 函数"></a>tuple() 函数</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">tuple</span>(<span class="built_in">range</span>(<span class="number">5</span>, <span class="number">20</span>)))</span><br></pre></td></tr></table></figure>

<h2 id="删除元组"><a href="#删除元组" class="headerlink" title="删除元组"></a>删除元组</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tuplearr = (<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>)</span><br><span class="line"><span class="keyword">del</span> tuplearr</span><br></pre></td></tr></table></figure>

<h2 id="遍历元组"><a href="#遍历元组" class="headerlink" title="遍历元组"></a>遍历元组</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tuplearr = (<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> tuplearr:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line"><span class="keyword">for</span> index, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(tuplearr):</span><br><span class="line">    <span class="built_in">print</span>(index, item)</span><br></pre></td></tr></table></figure>

<h2 id="访问元素-1"><a href="#访问元素-1" class="headerlink" title="访问元素"></a>访问元素</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tuplearr = (<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(tuplearr[<span class="number">2</span>])</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">第三个元素</span><br></pre></td></tr></table></figure>



<h2 id="修改元素-1"><a href="#修改元素-1" class="headerlink" title="修改元素"></a>修改元素</h2><blockquote>
<p>元组和列表最大的不同，就在于元组是不可变序列，元组内的元组不可以被修改。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tuplearr = (<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>)</span><br><span class="line">tuplearr[<span class="number">1</span>] = <span class="string">&quot;第五个元素&quot;</span></span><br></pre></td></tr></table></figure>

<p>运行结果：报错</p>
<blockquote>
<p>如果想要修改元组的元素，必须将整个元组全部重新赋值。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tuplearr = (<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第二个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(tuplearr)</span><br><span class="line">tuplearr = (<span class="string">&quot;第一个元素&quot;</span>, <span class="string">&quot;第五个元素&quot;</span>, <span class="string">&quot;第三个元素&quot;</span>, <span class="string">&quot;第四个元素&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(tuplearr)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">(<span class="string">&#x27;第一个元素&#x27;</span>, <span class="string">&#x27;第二个元素&#x27;</span>, <span class="string">&#x27;第三个元素&#x27;</span>, <span class="string">&#x27;第四个元素&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;第一个元素&#x27;</span>, <span class="string">&#x27;第五个元素&#x27;</span>, <span class="string">&#x27;第三个元素&#x27;</span>, <span class="string">&#x27;第四个元素&#x27;</span>)</span><br></pre></td></tr></table></figure>





<h2 id="元组推导式"><a href="#元组推导式" class="headerlink" title="元组推导式"></a>元组推导式</h2><blockquote>
<p>元组推导式和列表推导式不同的地方在于，列表推导式生成的是一个列表对象，而元组推导式生成的是一个生成器对象，我们需要使用 <code>tuple()</code> 函数将其转换为元组。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">randomtuple1 = (random.randint(<span class="number">10</span>, <span class="number">20</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>))</span><br><span class="line">randomtuple1 = <span class="built_in">tuple</span>(randomtuple1)</span><br><span class="line"><span class="built_in">print</span>(randomtuple1)</span><br><span class="line"></span><br><span class="line">randomtuple2 = (x * <span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> randomtuple1)</span><br><span class="line">randomtuple2 = <span class="built_in">tuple</span>(randomtuple2)</span><br><span class="line"><span class="built_in">print</span>(randomtuple2)</span><br><span class="line"></span><br><span class="line">randomtuple3 = (x <span class="keyword">for</span> x <span class="keyword">in</span> randomtuple1 <span class="keyword">if</span> x &gt; <span class="number">15</span>)</span><br><span class="line">randomtuple3 = <span class="built_in">tuple</span>(randomtuple3)</span><br><span class="line"><span class="built_in">print</span>(randomtuple3)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">(<span class="number">18</span>, <span class="number">10</span>, <span class="number">13</span>, <span class="number">17</span>, <span class="number">16</span>)</span><br><span class="line">(<span class="number">36</span>, <span class="number">20</span>, <span class="number">26</span>, <span class="number">34</span>, <span class="number">32</span>)</span><br><span class="line">(<span class="number">18</span>, <span class="number">17</span>, <span class="number">16</span>)</span><br></pre></td></tr></table></figure>



<h1 id="列表与元组的区别"><a href="#列表与元组的区别" class="headerlink" title="列表与元组的区别"></a>列表与元组的区别</h1><ul>
<li>列表是可变序列，列表元素可以修改；元组是不可变序列，元组元素不可以修改。</li>
<li>列表可以使用 <code>append()</code> 、<code>extend()</code> 、<code>insert()</code> 、<code>remove()</code> 、<code>pop()</code> 等方法对列表进行修改，元组没有这些方法修改元素，同时元组也无法删除元素。</li>
<li>列表支持用切片修改元素，元组不支持切片修改元素。</li>
<li>元组的访问速度比列表快。</li>
<li>列表不能作为字典的键，元组可以。</li>
</ul>
<h1 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h1><ul>
<li>字典通过键值获取字典中保存的数据，不通过索引获取。</li>
<li>字典是无序的。</li>
<li>字典是可变序列的。</li>
<li>字典的键值是唯一的，如果有相同键值，后面的会覆盖前面的。</li>
<li>字典是键必须不可变。</li>
</ul>
<h2 id="创建空字典"><a href="#创建空字典" class="headerlink" title="创建空字典"></a>创建空字典</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dictionary = &#123;&#125;</span><br><span class="line">dictionary = <span class="built_in">dict</span>()</span><br></pre></td></tr></table></figure>



<h2 id="创建字典"><a href="#创建字典" class="headerlink" title="创建字典"></a>创建字典</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dictionary = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;肖总&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(dictionary)</span><br><span class="line"></span><br><span class="line">keylist = [<span class="string">&quot;key1&quot;</span>, <span class="string">&quot;key2&quot;</span>, <span class="string">&quot;key3&quot;</span>]</span><br><span class="line">valuelist = [<span class="string">&quot;value1&quot;</span>, <span class="string">&quot;value2&quot;</span>, <span class="string">&quot;value3&quot;</span>, <span class="string">&quot;value4&quot;</span>]</span><br><span class="line">dictionary = <span class="built_in">dict</span>(<span class="built_in">zip</span>(keylist, valuelist))</span><br><span class="line"><span class="built_in">print</span>(dictionary)</span><br><span class="line"></span><br><span class="line">dictionary = <span class="built_in">dict</span>(key1=<span class="string">&quot;value1&quot;</span>, key2=<span class="string">&quot;value2&quot;</span>, key3=<span class="string">&quot;value3&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(dictionary)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;肖总&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;key1&#x27;</span>: <span class="string">&#x27;value1&#x27;</span>, <span class="string">&#x27;key2&#x27;</span>: <span class="string">&#x27;value2&#x27;</span>, <span class="string">&#x27;key3&#x27;</span>: <span class="string">&#x27;value3&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;key1&#x27;</span>: <span class="string">&#x27;value1&#x27;</span>, <span class="string">&#x27;key2&#x27;</span>: <span class="string">&#x27;value2&#x27;</span>, <span class="string">&#x27;key3&#x27;</span>: <span class="string">&#x27;value3&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用 <code>zip()</code> 函数创建字典，字典元素个数取两个列表长度较短的那个。</p>
</blockquote>
<h2 id="删除字典"><a href="#删除字典" class="headerlink" title="删除字典"></a>删除字典</h2><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">dictionary</span>.clear()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">del</span> dictionary</span><br></pre></td></tr></table></figure>



<h2 id="访问字典"><a href="#访问字典" class="headerlink" title="访问字典"></a>访问字典</h2><p>字典只能通过键值去访问内部的元素。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dictionary = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;肖总&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(dictionary[<span class="string">&quot;name&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(dictionary.get(<span class="string">&quot;name&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(dictionary[<span class="string">&quot;age&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(dictionary.get(<span class="string">&quot;age&quot;</span>))</span><br></pre></td></tr></table></figure>

<p>执行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">肖总</span><br><span class="line">肖总</span><br><span class="line"><span class="number">18</span></span><br><span class="line"><span class="number">18</span></span><br></pre></td></tr></table></figure>

<p>值得一提的是，如果直接使用 <code>[键值]</code>获得的时候，字典中不存在该键值，会直接爆错。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dictionary = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;肖总&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(dictionary[<span class="string">&quot;sex&quot;</span>])</span><br></pre></td></tr></table></figure>

<p>运行结果：报错</p>
<p>使用 <code>get()</code>方法如果没有该键值会返回 <code>None</code>值，而且可以设置第二个参数为默认值。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dictionary = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;肖总&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(dictionary.get(<span class="string">&quot;sex&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(dictionary.get(<span class="string">&quot;sex&quot;</span>, <span class="string">&quot;未知&quot;</span>))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="literal">None</span></span><br><span class="line">未知</span><br></pre></td></tr></table></figure>



<h2 id="遍历字典"><a href="#遍历字典" class="headerlink" title="遍历字典"></a>遍历字典</h2><p>可以使用字典的 <code>items()</code> 方法遍历字典。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dictionary = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;肖总&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> dictionary.items():</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> dictionary.items():</span><br><span class="line">    <span class="built_in">print</span>(key, value)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;肖总&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;age&#x27;</span>, <span class="number">18</span>)</span><br><span class="line">name 肖总</span><br><span class="line">age <span class="number">18</span></span><br></pre></td></tr></table></figure>



<h2 id="修改元素-2"><a href="#修改元素-2" class="headerlink" title="修改元素"></a>修改元素</h2><p>字典可以直接通过添加键值的方式，对字典中的元素进行添加，修改等操作。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dictionary = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;肖总&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(dictionary)</span><br><span class="line">dictionary[<span class="string">&quot;sex&quot;</span>] = <span class="string">&quot;男&quot;</span></span><br><span class="line"><span class="built_in">print</span>(dictionary)</span><br><span class="line">dictionary[<span class="string">&quot;sex&quot;</span>] = <span class="string">&quot;女&quot;</span></span><br><span class="line"><span class="built_in">print</span>(dictionary)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;肖总&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;肖总&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;sex&#x27;</span>: <span class="string">&#x27;男&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;肖总&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;sex&#x27;</span>: <span class="string">&#x27;女&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>



<p>字典可以通过 <code>del</code>命令删除字典元素。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dictionary = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;肖总&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(dictionary)</span><br><span class="line"><span class="keyword">del</span> dictionary[<span class="string">&quot;age&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(dictionary)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;肖总&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;肖总&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<p>如果删除一个不存在的键值，会直接报错。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dictionary = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;肖总&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;</span><br><span class="line"><span class="keyword">del</span> dictionary[<span class="string">&quot;sex&quot;</span>]</span><br></pre></td></tr></table></figure>

<p>运行结果：报错</p>
<p>正确的删除方式为：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dictionary = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;肖总&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;sex&quot;</span> <span class="keyword">in</span> dictionary:</span><br><span class="line">    <span class="keyword">del</span> dictionary[<span class="string">&quot;sex&quot;</span>]</span><br></pre></td></tr></table></figure>



<h2 id="字典推导式"><a href="#字典推导式" class="headerlink" title="字典推导式"></a>字典推导式</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">key = [<span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>]</span><br><span class="line">value = [<span class="string">&quot;肖总&quot;</span>, <span class="string">&quot;18&quot;</span>]</span><br><span class="line">dictionary = &#123;i: j + <span class="string">&quot;~&quot;</span> <span class="keyword">for</span> i, j <span class="keyword">in</span> <span class="built_in">zip</span>(key, value)&#125;</span><br><span class="line"><span class="built_in">print</span>(dictionary)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;肖总~&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="string">&#x27;18~&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>





<h1 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h1><blockquote>
<p>集合和列表一样，都是若干个元素的集合，不过集合和列表的区别在于，集合中如果有重复元素，只会保留一个。</p>
</blockquote>
<h2 id="创建集合"><a href="#创建集合" class="headerlink" title="创建集合"></a>创建集合</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">setname = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(setname)</span><br></pre></td></tr></table></figure>



<p>可以使用 <code>set()</code>函数，将列表，元组转换为集合。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">set</span>(<span class="built_in">list</span>))</span><br><span class="line"><span class="built_in">tuple</span> = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">tuple</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">set</span>(<span class="built_in">tuple</span>))</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>]</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br></pre></td></tr></table></figure>



<h2 id="修改集合"><a href="#修改集合" class="headerlink" title="修改集合"></a>修改集合</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">setname = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(setname)</span><br><span class="line">setname.add(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(setname)</span><br><span class="line">setname.remove(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(setname)</span><br></pre></td></tr></table></figure>



<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br></pre></td></tr></table></figure>



<h2 id="集合运算"><a href="#集合运算" class="headerlink" title="集合运算"></a>集合运算</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">setname1 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">setname2 = &#123;<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line"><span class="comment"># 交集</span></span><br><span class="line"><span class="built_in">print</span>(setname1 &amp; setname2)</span><br><span class="line"><span class="comment"># 并集</span></span><br><span class="line"><span class="built_in">print</span>(setname1 | setname2)</span><br><span class="line"><span class="comment"># 差集</span></span><br><span class="line"><span class="built_in">print</span>(setname1 - setname2)</span><br><span class="line"><span class="built_in">print</span>(setname2 - setname1)</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">&#123;<span class="number">5</span>&#125;</span><br></pre></td></tr></table></figure>





<h1 id="序列之间的区别"><a href="#序列之间的区别" class="headerlink" title="序列之间的区别"></a>序列之间的区别</h1><table>
<thead>
<tr>
<th>序列</th>
<th>是否可变</th>
<th>是否重复</th>
<th>是否有序</th>
<th>定义符号</th>
</tr>
</thead>
<tbody><tr>
<td>列表(list）</td>
<td>可变</td>
<td>可重复</td>
<td>有序</td>
<td>[]</td>
</tr>
<tr>
<td>元组(tuple）</td>
<td>不可变</td>
<td>可重复</td>
<td>有序</td>
<td>()</td>
</tr>
<tr>
<td>字典(dictionary）</td>
<td>可变</td>
<td>不可重复</td>
<td>无序</td>
<td>{key:value}</td>
</tr>
<tr>
<td>集合(set）</td>
<td>可变</td>
<td>不可重复</td>
<td>无序</td>
<td>{}</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Git的安装&amp;IDEA整合Git</title>
    <url>/2020/02/16/tool/Git%E7%9A%84%E5%AE%89%E8%A3%85&amp;IDEA%E6%95%B4%E5%90%88Git/</url>
    <content><![CDATA[<p>Git是一个开源的分布式版本控制系统，可以有效、高速地处理从很小到非常大的项目版本管理。<br>也是Linus Torvalds为了帮助管理Linux内核开发而开发的一个开放源码的版本控制软件。</p>
<span id="more"></span>

<h2 id="1、下载与安装Git"><a href="#1、下载与安装Git" class="headerlink" title="1、下载与安装Git"></a>1、下载与安装Git</h2><h3 id="第一种方法"><a href="#第一种方法" class="headerlink" title="第一种方法"></a>第一种方法</h3><p>官网：<a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a><br><img src="/images/2020/02/20200216200615234.png" alt="在这里插入图片描述">但是官网的下载速度非常慢，我试了几次都下载失败。</p>
<h3 id="第二种方法"><a href="#第二种方法" class="headerlink" title="第二种方法"></a>第二种方法</h3><p>电脑管家，没错，就是腾讯电脑管家，无意中发现在电脑管家的软件市场里面竟然有Git这个软件，而且——<strong>下载速度非常快</strong>【重点】<br><img src="/images/2020/02/20200216200924932.png" alt="在这里插入图片描述"></p>
<h3 id="第三种方法"><a href="#第三种方法" class="headerlink" title="第三种方法"></a>第三种方法</h3><p>我在自己的百度网盘中上传了Git的软件安装包，需要的可以去下载。<br><strong>链接</strong>：<a href="https://pan.baidu.com/s/1nBZHt0mBhFZadLSm2PYsXQ">https://pan.baidu.com/s/1nBZHt0mBhFZadLSm2PYsXQ</a><br><strong>提取码</strong>：enhm </p>
<h3 id="Git的安装"><a href="#Git的安装" class="headerlink" title="Git的安装"></a>Git的安装</h3><p>Git的安装非常简单，直接一路<strong>next</strong>就可以了，傻瓜式安装。<br>如果安装成功，打开cmd命令控制台，输入<strong>git –version</strong>即可查看到安装的git的版本。<br><img src="/images/2020/02/20200216201557805.png" alt="在这里插入图片描述"></p>
<p>如上图，说明安装成功！</p>
<h2 id="2、Git的配置"><a href="#2、Git的配置" class="headerlink" title="2、Git的配置"></a>2、Git的配置</h2><h3 id="配置全局用户名和密码"><a href="#配置全局用户名和密码" class="headerlink" title="配置全局用户名和密码"></a>配置全局用户名和密码</h3><p>安装成功后，随便在任何目录中点击鼠标右键，发现右键目录栏中多出了两栏。<br><img src="/images/2020/02/20200216202052724.png" alt="在这里插入图片描述"></p>
<p>点击<strong>Git Bash Here</strong>，就会进入Git的命令窗口，如下图：<br><img src="/images/2020/02/20200216202402590.png" alt="在这里插入图片描述"></p>
<p>我们在这个命令窗口中先配置一下全局用户名和邮箱，可以直接使用GitHub注册的账号的用户名和邮箱，命令如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;your_name&quot;</span>  </span><br><span class="line">git config --global user.email <span class="string">&quot;your_email@youremail.com&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="配置秘钥"><a href="#配置秘钥" class="headerlink" title="配置秘钥"></a>配置秘钥</h3><p>配置完全局用户名和邮箱，应该在生成一下Git的秘钥。<br>说到秘钥，就需要解释一下秘钥的作用了。</p>
<p>Git是一个远程仓库托管工具，可以远程链接云仓库上传自己的代码或资料，而像github，码云这些托管平台，一般使用两种协议进行数据传输，分别是https和ssh，其中使用https协议提交代码需要用户名和密码，而使用ssh协议则不需要用户名和密码，但是需要秘钥。<br>总的来说，秘钥主要就是用于ssh协议传输的时候使用的授权工具。</p>
<p>在Git命令窗口输入命令。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;your_email@youremail.com&quot;</span></span><br></pre></td></tr></table></figure>
<p>输入完整命令，秘钥会自动生成在电脑用户目录下的.ssh文件中。<br><img src="/images/2020/02/20200216203921810.png" alt="在这里插入图片描述"></p>
<h3 id="github配置公钥"><a href="#github配置公钥" class="headerlink" title="github配置公钥"></a>github配置公钥</h3><p>我们先打开github网站，登录自己的账号，点击右上角的头像，就会有选项栏下拉，选择<strong>Settings</strong>。<br><img src="/images/2020/02/20200216204649687.png" alt="在这里插入图片描述"><br><img src="/images/2020/02/20200216205209368.png" alt="在这里插入图片描述"><br><img src="/images/2020/02/20200216205647937.png" alt="在这里插入图片描述"></p>
<h2 id="3、IDEA整合Git及使用"><a href="#3、IDEA整合Git及使用" class="headerlink" title="3、IDEA整合Git及使用"></a>3、IDEA整合Git及使用</h2><h3 id="IDEA整合Git"><a href="#IDEA整合Git" class="headerlink" title="IDEA整合Git"></a>IDEA整合Git</h3><p><img src="/images/2020/02/20200216210721164.png" alt="在这里插入图片描述"></p>
<h3 id="在IDEA中使用Git并上传文件"><a href="#在IDEA中使用Git并上传文件" class="headerlink" title="在IDEA中使用Git并上传文件"></a>在IDEA中使用Git并上传文件</h3><p>第一步，先创建一个Git本地仓库。<br><img src="/images/2020/02/2020021621132882.png" alt="在这里插入图片描述"><br><img src="/images/2020/02/20200216211335883.png" alt="在这里插入图片描述"></p>
<p>在选择仓库目录的时候，选择项目所在的目录，点击OK。同时在该目录下生成.git文件，说明仓库创建成功。<br><img src="/images/2020/02/20200216211536120.png" alt="在这里插入图片描述"></p>
<p>同时在IDEA的右上角会出现几个和Git相关的图标。<br><img src="/images/2020/02/20200216211722395.png" alt="在这里插入图片描述"><br><img src="/images/2020/02/20200216212352242.png" alt="在这里插入图片描述"></p>
<h3 id="上传文件"><a href="#上传文件" class="headerlink" title="上传文件"></a>上传文件</h3><p>点击COMMIT后，Git会将文件提交到本地仓库中，我们还需要远程将文件推送到远程仓库中。<br><img src="/images/2020/04/2020040411452756.png" alt="在这里插入图片描述"></p>
<p>创建仓库之后，VCS的目录也发生了变化，我们点击Git-&gt;Push。<br>如果是第一次和远程仓库建立链接，那么需要输入远程仓库的地址。<br><img src="/images/2020/02/20200216213318728.png" alt="在这里插入图片描述"></p>
<p>最后，我们点击最下面的PUSH，就可以将之前添加到本地仓库中的所有文件推送到远程仓库中去了。</p>
]]></content>
      <categories>
        <category>开发工具</category>
      </categories>
      <tags>
        <tag>IDEA</tag>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEA 插件 Alibaba Cloud Toolkit，一键部署前后端项目</title>
    <url>/2021/05/31/tool/IDEA%20%E6%8F%92%E4%BB%B6%20Alibaba%20Cloud%20Toolkit%EF%BC%8C%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2%E5%89%8D%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE/</url>
    <content><![CDATA[<h1 id="Alibaba-Cloud-Toolkit"><a href="#Alibaba-Cloud-Toolkit" class="headerlink" title="Alibaba Cloud Toolkit"></a>Alibaba Cloud Toolkit</h1><p>Alibaba Cloud Toolkit，顾名思义，这是一个由阿里开发的，用于快速部署云服务项目的 IDEA 插件工具。<br>使用该插件，可以在本地直接一键部署项目到云端服务器。</p>
<span id="more"></span>

<h2 id="下载-IDEA-插件"><a href="#下载-IDEA-插件" class="headerlink" title="下载 IDEA 插件"></a>下载 IDEA 插件</h2><p>File -&gt; Settings -&gt; Plugins</p>
<p>在插件的搜索栏输入 <code>Alibaba Cloud Toolkit</code>，下载、安装、重启 IDEA 即可。<br><img src="/images/2021/05/20210531231020147.png" alt="在这里插入图片描述"></p>
<h2 id="配置云端服务器"><a href="#配置云端服务器" class="headerlink" title="配置云端服务器"></a>配置云端服务器</h2><p>这里的云端服务器，可以是真正的云端服务器，比如阿里云服务器，腾讯云服务器等等，也可以是自己本地上的虚拟机服务器。</p>
<p>在 IDEA 的侧边或者底部的标签上可以找到一个 <code>Alibaba Cloud View</code> 的标签，打开该标签即可。</p>
<p><img src="/images/2021/05/20210531232711449.png" alt="在这里插入图片描述"></p>
<p>在该标签栏中点击右上角的 <code>Add Host</code> 按钮，按照自己的配置信息进行配置即可。</p>
<p><img src="/images/2021/05/20210531233029430.png" alt="在这里插入图片描述"><br>配置完主机信息，就会在标签页面形成一条主机记录，点击记录的 <code>Upload</code>  按钮，配置上传文件的属性。</p>
<p><img src="/images/2021/05/20210531233204440.png" alt="在这里插入图片描述"></p>
<p><img src="/images/2021/05/20210531233526517.png" alt="在这里插入图片描述"><br>在后续的开发过程中，只要更新了新的 <code>jar</code> 包之后，直接使用 <code>Upload</code> 按钮，即可直接一键部署项目到云端服务器。<br>前端项目也是同样的步骤和原理。</p>
<p>到此为止，使用 Alibaba Cloud Toolkit 插件工具来一键部署项目就完成了，在文章末尾，附带前后端项目部署的 <code>sh</code> 脚本文件。</p>
<h2 id="sh-脚本文件"><a href="#sh-脚本文件" class="headerlink" title="sh 脚本文件"></a>sh 脚本文件</h2><h3 id="后端项目部署脚本"><a href="#后端项目部署脚本" class="headerlink" title="后端项目部署脚本"></a>后端项目部署脚本</h3><ul>
<li>spring-boot.sh<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">服务名称</span></span><br><span class="line">SERVICE_NAME=zero-admin</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">项目路径</span></span><br><span class="line">SERVICE_DIR=/usr/web-project/zero-admin</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">日志文件</span></span><br><span class="line">LOG_FILE=$&#123;SERVICE_DIR&#125;/log.log</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">jar名称</span></span><br><span class="line">JAR_NAME=zero-web-1\.0-SNAPSHOT\.jar</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进程文件名称</span></span><br><span class="line">PID_FILE=$&#123;SERVICE_NAME&#125;\.pid</span><br><span class="line"></span><br><span class="line">help()&#123;</span><br><span class="line">  echo &quot;=== spring-boot shell help start ===&quot;</span><br><span class="line">  echo &quot;start 启动服务&quot;</span><br><span class="line">  echo &quot;stop 停止服务&quot;</span><br><span class="line">  echo &quot;restart 重启服务&quot;</span><br><span class="line">  echo &quot;===  spring-boot shell help end  ===&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">start()&#123;</span><br><span class="line">  if [ ! -x $&#123;JAR_NAME&#125; ]</span><br><span class="line">  then</span><br><span class="line">    echo &quot;=== $&#123;JAR_NAME&#125;添加可执行权限 ===&quot;</span><br><span class="line">    chmod +x $&#123;JAR_NAME&#125;</span><br><span class="line">  fi</span><br><span class="line">  nohup java -Dfile.encoding=UTF-8 -jar $&#123;JAR_NAME&#125; --spring.profiles.active=prod &gt;$&#123;LOG_FILE&#125; 2&gt;&amp;1 &amp;</span><br><span class="line">  echo $! &gt; $&#123;SERVICE_DIR&#125;/$&#123;PID_FILE&#125;</span><br><span class="line">	echo &quot;=== 服务$&#123;SERVICE_NAME&#125;已启动 ===&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stop()&#123;</span><br><span class="line">  P_ID=$(cat $&#123;SERVICE_DIR&#125;/$&#123;PID_FILE&#125;)</span><br><span class="line">  if [ &quot;$&#123;P_ID&#125;&quot; == &quot;&quot; ]</span><br><span class="line">  then</span><br><span class="line">    echo &quot;=== 服务$&#123;SERVICE_NAME&#125;不存在或者已停止 ===&quot;</span><br><span class="line">  else</span><br><span class="line">    kill &quot;$&#123;P_ID&#125;&quot;</span><br><span class="line">    rm -rf $&#123;SERVICE_DIR&#125;/$&#123;PID_FILE&#125;</span><br><span class="line">    echo &quot;=== 服务$&#123;SERVICE_NAME&#125;已停止 ===&quot;</span><br><span class="line">  fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">restart()&#123;</span><br><span class="line">  stop</span><br><span class="line">  sleep 2</span><br><span class="line">  start</span><br><span class="line">  echo &quot;=== 服务$&#123;SERVICE_NAME&#125;已重启 ===&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cd $&#123;SERVICE_DIR&#125;</span><br><span class="line"></span><br><span class="line">case $&#123;1&#125; in</span><br><span class="line">    &quot;&quot;)</span><br><span class="line">      echo &quot;=== 参数错误 ===&quot;</span><br><span class="line">        ;;</span><br><span class="line">    help)</span><br><span class="line">      help</span><br><span class="line">        ;;</span><br><span class="line">    start)</span><br><span class="line">      start</span><br><span class="line">        ;;</span><br><span class="line">    stop)</span><br><span class="line">     	stop</span><br><span class="line">        ;;</span><br><span class="line">    restart)</span><br><span class="line">      restart</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">      help</span><br><span class="line">        ;;</span><br><span class="line">esac</span><br><span class="line"></span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h3 id="前端项目部署脚本"><a href="#前端项目部署脚本" class="headerlink" title="前端项目部署脚本"></a>前端项目部署脚本</h3><ul>
<li>vue-app.sh</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">VueApp的项目目录</span></span><br><span class="line">VUE_APP_DIR=/usr/web-project/zero-admin/dist</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Docker 停止 nginx 服务</span></span><br><span class="line">docker stop nginx</span><br><span class="line">sleep 2</span><br><span class="line">docker cp $&#123;VUE_APP_DIR&#125; nginx:$&#123;VIE_APP_DIR&#125;</span><br><span class="line">docker start nginx</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>开发工具</category>
      </categories>
      <tags>
        <tag>IDEA</tag>
        <tag>Alibaba</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEA数据库集成管理工具Database的使用</title>
    <url>/2020/07/23/tool/IDEA%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9B%86%E6%88%90%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7Database%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<blockquote>
<p>最近重新安装了一个新的IDEA，新的开发工具，自然带给人新的生活和心情，今天我们来学习使用IDEA自带的数据库集成管理工具Database的使用。</p>
</blockquote>
<span id="more"></span>

<h2 id="一、打开Database"><a href="#一、打开Database" class="headerlink" title="一、打开Database"></a>一、打开Database</h2><p><img src="/images/2020/07/20200723215200316.png" alt="在这里插入图片描述"></p>
<h2 id="二、配置Database"><a href="#二、配置Database" class="headerlink" title="二、配置Database"></a>二、配置Database</h2><p>首先，我们需要根据我们所使用的数据库类型来选择数据源，因为作者常用的数据库为MySQL，所以在博客中就以MySQL作为例子来进行配置。</p>
<h3 id="2-1、选择数据库"><a href="#2-1、选择数据库" class="headerlink" title="2.1、选择数据库"></a>2.1、选择数据库</h3><p><img src="/images/2020/07/20200723215358424.png" alt="在这里插入图片描述"></p>
<h3 id="2-2、配置数据库连接信息"><a href="#2-2、配置数据库连接信息" class="headerlink" title="2.2、配置数据库连接信息"></a>2.2、配置数据库连接信息</h3><p><img src="/images/2020/07/20200723220359941.png" alt="在这里插入图片描述"></p>
<h3 id="2-3、下载数据库驱动"><a href="#2-3、下载数据库驱动" class="headerlink" title="2.3、下载数据库驱动"></a>2.3、下载数据库驱动</h3><p><img src="/images/2020/07/20200723220359876.png" alt="在这里插入图片描述"></p>
<h3 id="2-4、下载中……"><a href="#2-4、下载中……" class="headerlink" title="2.4、下载中……"></a>2.4、下载中……</h3><p><img src="/images/2020/07/20200723220359308.png" alt="在这里插入图片描述"></p>
<h3 id="2-5、报错"><a href="#2-5、报错" class="headerlink" title="2.5、报错"></a>2.5、报错</h3><p>下载驱动成功后，我们点击测试按钮，结果爆出一个错误：</p>
<blockquote>
<p>Server returns invalid timezone. Need to set ‘serverTimezone’ property.</p>
</blockquote>
<p><img src="/images/2020/07/20200723221047682.png" alt="在这里插入图片描述"></p>
<h3 id="2-6、解决爆错"><a href="#2-6、解决爆错" class="headerlink" title="2.6、解决爆错"></a>2.6、解决爆错</h3><p><img src="/images/2020/07/20200723221653493.png" alt="在这里插入图片描述"></p>
<p><img src="/images/2020/07/20200723221451412.png" alt="在这里插入图片描述"><br><img src="/images/2020/07/20200723221451393.png" alt="在这里插入图片描述"></p>
<h2 id="三、使用Database"><a href="#三、使用Database" class="headerlink" title="三、使用Database"></a>三、使用Database</h2><p><img src="/images/2020/07/20200723222003723.png" alt="在这里插入图片描述"></p>
]]></content>
      <categories>
        <category>开发工具</category>
      </categories>
      <tags>
        <tag>IDEA</tag>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven安装与配置&amp;IDEA整合Maven</title>
    <url>/2020/01/26/tool/Maven%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE&amp;IDEA%E6%95%B4%E5%90%88Maven/</url>
    <content><![CDATA[<p>Maven是一个项目管理工具，它包含了一个项目对象模型 (Project Object Model)，一组标准集合，一个项目生命周期(Project Lifecycle)，一个依赖管理系统(Dependency Management System)，和用来运行定义在生命周期阶段(phase)中插件(plugin)目标(goal)的逻辑。当你使用Maven的时候，你用一个明确定义的项目对象模型来描述你的项目，然后Maven可以应用横切的逻辑，这些逻辑来自一组共享的（或者自定义的）插件。<br>现在，我们就来配置一个Maven，并将Maven工具和IDEA进行整合，让我们可以通过IDEA来创建Maven项目。</p>
<span id="more"></span>

<h2 id="下载Maven。"><a href="#下载Maven。" class="headerlink" title="下载Maven。"></a>下载Maven。</h2><p>Maven官网地址为：<a href="https://maven.apache.org/download.cgi">https://maven.apache.org/download.cgi</a></p>
<p><img src="/images/2020/01/2020012619064198.png" alt="在这里插入图片描述"></p>
<p><strong>从Maven官网上下载Maven的压缩包之后，直接在安装目录下解压缩即可。</strong></p>
<h2 id="配置Maven环境"><a href="#配置Maven环境" class="headerlink" title="配置Maven环境"></a>配置Maven环境</h2><p>将Maven解压缩之后，Maven还不可以直接使用，需要对Maven进行相关的配置。</p>
<h3 id="配置Maven系统环境变量"><a href="#配置Maven系统环境变量" class="headerlink" title="配置Maven系统环境变量"></a>配置Maven系统环境变量</h3><p>按照顺序打开：此电脑（右键）-&gt;属性-&gt;高级系统设置-&gt;高级-&gt;环境变量</p>
<p><img src="/images/2020/01/20200126191808702.png" alt="在这里插入图片描述"></p>
<p>在环境变量中点击新建，配置一个新的系统变量：</p>
<p>变量名：MAVEN_HOME<br>变量值：E:\Program Files\apache-maven-3.6.1 <strong>（变量值的属性是你放置Maven解压缩包的路径）</strong></p>
<h3 id="配置Path属性"><a href="#配置Path属性" class="headerlink" title="配置Path属性"></a>配置Path属性</h3><p><img src="/images/2020/01/20200126192130313.png" alt="在这里插入图片描述"></p>
<p>编辑系统变量中的path变量，并在path中新建一个变量值</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">%MAVEN_HOME%\bin</span><br></pre></td></tr></table></figure>
<p>配置好了之后，点击确定，保存配置。</p>
<h3 id="验证是否成功"><a href="#验证是否成功" class="headerlink" title="验证是否成功"></a>验证是否成功</h3><p>然后就可以打开cmd创建，输入mvn -v，如果出现你的Maven版本号，就说明已经配置成功了。<br><img src="/images/2020/01/20200126192741414.png" alt="在这里插入图片描述"></p>
<h2 id="修改Maven配置"><a href="#修改Maven配置" class="headerlink" title="修改Maven配置"></a>修改Maven配置</h2><p>以上说明你已经安装好了Maven，但是我们需要使用，还需要修改maven的配置文件。</p>
<p>打开Maven的安装目录，找到conf文件下的settings.xml文件，使用编辑软件打开它。<br><img src="/images/2020/01/20200126192950315.png" alt="在这里插入图片描述"></p>
<h3 id="修改Maven仓库目录"><a href="#修改Maven仓库目录" class="headerlink" title="修改Maven仓库目录"></a>修改Maven仓库目录</h3><p>首先我们先配置Maven的本地仓库：<br><img src="/images/2020/01/20200126193234677.png" alt="在这里插入图片描述"></p>
<p>如果这个本地库不配置，那么Maven默认是在C盘用户目录下的.m2目录下，在这里，我将本地库的目录放到了<strong>F:\Maven\repository</strong>目录下，如果没有这个目录，可以直接手动创建目录。</p>
<h3 id="修改Maven中央仓库的访问路径"><a href="#修改Maven中央仓库的访问路径" class="headerlink" title="修改Maven中央仓库的访问路径"></a>修改Maven中央仓库的访问路径</h3><p>其次，我们需要配置Maven中央仓库的访问路径：<br><img src="/images/2020/01/2020012619361683.png" alt="在这里插入图片描述"></p>
<p>我配置的是国内的阿里云镜像仓库，如果不配置，那么默认使用的是国外的Maven中央仓库，如果网不好，可能会使得Maven在使用的时候jar下载速度慢。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>        </span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="修改Maven的JDK编译版本"><a href="#修改Maven的JDK编译版本" class="headerlink" title="修改Maven的JDK编译版本"></a>修改Maven的JDK编译版本</h3><p>最后，我们需要配置Maven的JDK编译版本：<br><img src="/images/2020/01/20200126194003435.png" alt="在这里插入图片描述">Maven默认的JDK编译版本很低，有1.4的，也有1.5的，但是普遍不高，所以我直接配置了一个JDK1.8的默认编译版本。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profile</span>&gt;</span>     </span><br><span class="line">	<span class="tag">&lt;<span class="name">id</span>&gt;</span>jdk<span class="tag">&lt;/<span class="name">id</span>&gt;</span>   </span><br><span class="line">	<span class="tag">&lt;<span class="name">activation</span>&gt;</span>        </span><br><span class="line">		<span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span>    </span><br><span class="line">		<span class="tag">&lt;<span class="name">jdk</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">jdk</span>&gt;</span>      </span><br><span class="line">	<span class="tag">&lt;/<span class="name">activation</span>&gt;</span>  </span><br><span class="line">	<span class="tag">&lt;<span class="name">properties</span>&gt;</span>  </span><br><span class="line">		<span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">maven.compiler.compilerVersion</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.compilerVersion</span>&gt;</span>   </span><br><span class="line">	<span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>到此为止，Maven的配置就结束了，我们就可以使用IDEA来整合Maven，并创建Maven项目了。</p>
<p><strong>打开IDEA，按照下图进行配置：</strong><br><img src="/images/2020/01/20200126194801751.png" alt="在这里插入图片描述"><br>除此之外，为了解决Maven项目在创建骨架时太慢的问题，我们需要修改运行参数：</p>
<p>在下图红框选中的地方，填入如下参数：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">-DarchetypeCatalog=internal</span><br></pre></td></tr></table></figure>
<p><img src="/images/2020/01/20200126195329470.png" alt="在这里插入图片描述"></p>
<p>到此为止，Maven的配置和IDEA整合Maven工具就完成了。</p>
]]></content>
      <categories>
        <category>开发工具</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>IDEA</tag>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven项目pom.xml project标签爆红解决方法</title>
    <url>/2020/08/19/tool/Maven%E9%A1%B9%E7%9B%AEpom.xml%20project%E6%A0%87%E7%AD%BE%E7%88%86%E7%BA%A2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<p>今天在打开项目的时候，发现了一个Maven项目的问题，在Maven项目的pom.xml文件中，project标签爆出了一个错误。</p>
<span id="more"></span>
<p><img src="/images/2020/020200819081650697.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>‘parent.relativePath’ of POM com.hrp:springboot_jpa:1.0-SNAPSHOT (F:\IdeaCode\java-web\springboot_jpa\pom.xml) points at com.hrp:java-web instead of org.springframework.boot:spring-boot-starter-parent, please verify your project structure</p>
</blockquote>
<blockquote>
<p>POM com.hrp：springboot_jpa：1.0-SNAPSHOT（F：\ IdeaCode \ java-web \ springboot_jpa \ pom.xml）的’parent.relativePath’指向com.hrp：java-web而不是org.springframework.boot：spring -boot-starter-parent，请验证您的项目结构</p>
</blockquote>
<p>总而言之，这个问题是说在project标签下的parent.relativePath标签指向的路径出现了错误，所以导致报错。</p>
<p><strong>要解决这个问题的方法也很简单，在parent标签下添加一个<code>&lt;relativePath/&gt;</code>标签即可。</strong></p>
<p><img src="/images/2020/020200819082030419.png" alt="在这里插入图片描述"></p>
<p><strong>添加该标签之后，我们重新更新Maven项目，爆错就会消失了</strong></p>
<p><img src="/images/2020/020200819082324299.png" alt="在这里插入图片描述"></p>
]]></content>
      <categories>
        <category>开发工具</category>
      </categories>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven本地仓库删除.lastUpdated结尾的文件</title>
    <url>/2020/03/13/tool/Maven%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E5%88%A0%E9%99%A4.lastUpdated%E7%BB%93%E5%B0%BE%E7%9A%84%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<p>Maven 中有很多下载失败的，以.lastUpdated结尾的错误文件，我们可以直接将这些文件删除</p>
<span id="more"></span>

<h2 id="cmd命令删除"><a href="#cmd命令删除" class="headerlink" title="cmd命令删除"></a>cmd命令删除</h2><p>打开cmd命令窗口，进入Maven本地仓库，执行如下命令：</p>
<p><strong>第一步：进入本地仓库：</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">cd F:\Maven\repository</span><br></pre></td></tr></table></figure>
<p><strong>第二步：执行以下命令：</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> /r %i <span class="title function_">in</span> <span class="params">(*.lastUpdated)</span> <span class="keyword">do</span> del %i</span><br></pre></td></tr></table></figure>


<h2 id="Java代码删除"><a href="#Java代码删除" class="headerlink" title="Java代码删除"></a>Java代码删除</h2><p>使用的是cmd命令窗口的方式，没有学习过这种命令的同学可能无法看懂，而这里使用的是Java代码的实现方式。<br>只需要运行下面代码的main方法，就可以递归删除Maven本地仓库下的所有以.lastUpdated为后缀的错误文件。</p>
<ul>
<li>运行前记得将常量<code>FILE_PATH</code>修改为自己的Maven本地仓库。<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeleteErrorFile</span> &#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * FILE_NAME为Maven仓库的路径</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">FILE_PATH</span> <span class="operator">=</span> <span class="string">&quot;F:\\Maven\\repository&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">suffix</span> <span class="operator">=</span> <span class="string">&quot;.lastUpdated&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">		</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		deleteErrorFile(<span class="keyword">new</span> <span class="title class_">File</span>(FILE_PATH));</span><br><span class="line">		System.out.println(<span class="string">&quot;一共在Maven仓库中删除了&quot;</span> + count + <span class="string">&quot;个错误文件&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">deleteErrorFile</span><span class="params">(File file)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span>(file.isDirectory()) &#123;</span><br><span class="line">            <span class="keyword">for</span>(String childrenFile : file.list()) &#123;</span><br><span class="line">                deleteErrorFile(<span class="keyword">new</span> <span class="title class_">File</span>(file,childrenFile));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(file.getName().endsWith(suffix)) &#123;</span><br><span class="line">                file.delete();</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ul>
]]></content>
      <categories>
        <category>开发工具</category>
      </categories>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>Postman发送POST请求及日期格式的参数</title>
    <url>/2020/03/20/tool/Postman%E5%8F%91%E9%80%81POST%E8%AF%B7%E6%B1%82%E5%8F%8A%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E7%9A%84%E5%8F%82%E6%95%B0/</url>
    <content><![CDATA[<p>Postman在发送POST请求的时候，所有参数写在Request Body（请求体）中，如果需要的参数类型的日期格式的，只需要将日期格式写为<code>2000/01/01</code>即可，Postman会自动识别为日期格式的数据。</p>
<span id="more"></span>

<ul>
<li>如果是2000-01-01格式，Postman无法识别为日期，而是当做普通字符串处理。</li>
</ul>
<p><img src="/images/2020/03/20200320164729364.png" alt="在这里插入图片描述"></p>
]]></content>
      <categories>
        <category>开发工具</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Postman</tag>
      </tags>
  </entry>
  <entry>
    <title>Postman的下载、安装与使用</title>
    <url>/2020/02/23/tool/Postman%E7%9A%84%E4%B8%8B%E8%BD%BD%E3%80%81%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h2 id="什么是Postman"><a href="#什么是Postman" class="headerlink" title="什么是Postman"></a>什么是Postman</h2><p>Postman是一款接口测试工具，可以模仿浏览器发出各种类型的HTTP请求，用来测试API是否可用。</p>
<span id="more"></span>

<h2 id="为什么要用Postman"><a href="#为什么要用Postman" class="headerlink" title="为什么要用Postman"></a>为什么要用Postman</h2><p>有一些小白可能会问，我可以直接在浏览器上访问应用程序的API不可以吗？为什么还需要多此一举使用Postman这么一个工具呢？<br>其实原因很简单，在没有html页面的情况下，我们直接在浏览器地址栏中输入的请求路径，请求类型全部都是Get方式的。<br>而对于RestFul开发风格而言，这很显然是不能满足的。</p>
<p><strong>举个栗子</strong><br>我们就以上一篇博文<a href="https://blog.csdn.net/qq_45193304/article/details/104455794">SpringBoot+SpringDataJPA</a>搭建的项目环境为例子。<br>在这个项目的web层中，有这么一个接口<strong>Get请求</strong>的接口：<code>/user/page/&#123;pageNum&#125;</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;page/&#123;pageNum&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;Page&lt;User&gt;&gt; <span class="title function_">findByPage</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@PathVariable(&quot;pageNum&quot;)</span> Integer pageNum,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(defaultValue = &quot;5&quot;)</span> Integer pageSize)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(userService.findByPage(pageNum,pageSize));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们直接启动项目，访问一下这个接口。<br><img src="/images/2020/01/20200223113154298.png" alt="在这里插入图片描述"><br>我们发现使用浏览器访问这个API没有任何问题，那么我们现在把这个API的请求方式改为POST，看看会发生什么？</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;page/&#123;pageNum&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;Page&lt;User&gt;&gt; <span class="title function_">findByPage</span><span class="params">(</span></span><br><span class="line"><span class="params">        <span class="meta">@PathVariable(&quot;pageNum&quot;)</span> Integer pageNum,</span></span><br><span class="line"><span class="params">        <span class="meta">@RequestParam(defaultValue = &quot;5&quot;)</span> Integer pageSize)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseEntity.ok(userService.findByPage(pageNum,pageSize));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们重启这个项目，再次使用浏览器访问这个API。<br><img src="/images/2020/01/20200223113638247.png" alt="在这里插入图片描述"></p>
<p><img src="/images/2020/01/20200223113835412.png" alt="在这里插入图片描述"></p>
<p>无论是页面，还是程序控制台，都爆出了不支持GET请求的错误，这个时候，我们使用浏览器就无法测试这个POST请求的API是否能够正常工作了。</p>
<ul>
<li><strong>而Postman这个工具，就能够解决这个问题。</strong></li>
</ul>
<h2 id="Postman的下载、安装与使用"><a href="#Postman的下载、安装与使用" class="headerlink" title="Postman的下载、安装与使用"></a>Postman的下载、安装与使用</h2><p>Postman下载官网地址：<a href="https://www.postman.com/downloads/">https://www.postman.com/downloads/</a></p>
<p><img src="/images/2020/01/20200223114315178.png" alt="在这里插入图片描述"></p>
<p>我们根据上图选择合适的版本进行下载，下载完整之后，直接点击运行，就可以安装完成。<br>我们运行Postman后，就会打开下面的界面，我们可以通过Postman来模拟发送其他各种类型的请求。</p>
<p><img src="/images/2020/01/202002231147543.png" alt="在这里插入图片描述"></p>
]]></content>
      <categories>
        <category>开发工具</category>
      </categories>
      <tags>
        <tag>Postman</tag>
        <tag>HTTP</tag>
      </tags>
  </entry>
  <entry>
    <title>一篇博客教会你怎么安装Docker</title>
    <url>/2020/04/16/tool/%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%95%99%E4%BC%9A%E4%BD%A0%E6%80%8E%E4%B9%88%E5%AE%89%E8%A3%85Docker/</url>
    <content><![CDATA[<h1 id="一、什么是Docker"><a href="#一、什么是Docker" class="headerlink" title="一、什么是Docker?"></a>一、什么是Docker?</h1><p>Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的 Linux或Windows 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</p>
<span id="more"></span>
<p>Docker是基于Linux 64bit的，无法在32bit的linux/Windows/unix环境下使用，所以今天我们在CentOS系统上安装Docker。</p>
<h1 id="二、安装Docker"><a href="#二、安装Docker" class="headerlink" title="二、安装Docker"></a>二、安装Docker</h1><p>本次的安装在CentOS8的系统环境下安装，如果不会安装CentOS系统的，可以参考我的博客：<br><a href="/2020/04/19/linux/一篇博客教会你怎么安装CentOS系统/">一篇博客教会你怎么安装CentOS系统</a></p>
<h2 id="1、更新yum源为最新"><a href="#1、更新yum源为最新" class="headerlink" title="1、更新yum源为最新"></a>1、更新yum源为最新</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">sudo yum update</span><br></pre></td></tr></table></figure>
<h2 id="2、安装需要的软件包"><a href="#2、安装需要的软件包" class="headerlink" title="2、安装需要的软件包"></a>2、安装需要的软件包</h2><p>yum-utils提供yum-config-manager功能，另外两个是devicemapper驱动依赖</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">sudo yum install <span class="literal">-y</span> yum<span class="literal">-utils</span> device<span class="literal">-mapper-persistent-data</span> lvm2</span><br></pre></td></tr></table></figure>

<h2 id="3、设置yum源为阿里云"><a href="#3、设置yum源为阿里云" class="headerlink" title="3、设置yum源为阿里云"></a>3、设置yum源为阿里云</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">sudo yum<span class="literal">-config-manager</span> <span class="literal">--add-repo</span> http://mirrors.aliyun.com/docker<span class="literal">-ce</span>/linux/centos/docker<span class="literal">-ce</span>.repo</span><br></pre></td></tr></table></figure>
<p>可以通过 <code>yum repolist</code>命令查看是否已有<code>docker-ce-stable</code>仓库。</p>
<h2 id="4、安装docker"><a href="#4、安装docker" class="headerlink" title="4、安装docker"></a>4、安装docker</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">sudo yum install docker<span class="literal">-ce</span> <span class="literal">--nobest</span></span><br></pre></td></tr></table></figure>
<h2 id="5、查看安装版本"><a href="#5、查看安装版本" class="headerlink" title="5、查看安装版本"></a>5、查看安装版本</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">dovker <span class="literal">-v</span></span><br></pre></td></tr></table></figure>
<p>安装成功后，可以使用<code>docker -v</code>命令来查看docker版本。</p>
<h1 id="三、设置Docker的国内镜像"><a href="#三、设置Docker的国内镜像" class="headerlink" title="三、设置Docker的国内镜像"></a>三、设置Docker的国内镜像</h1><p>如果使用Docker提供的国外镜像，下载或者说拉取文件的时候速度会非常慢，所以我们直接修改Docker的镜像为国内镜像，这样拉取文件的速度就会非常快。</p>
<h2 id="1、编辑文件"><a href="#1、编辑文件" class="headerlink" title="1、编辑文件"></a>1、编辑文件</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">vi /etc/docker/daemon.json</span><br></pre></td></tr></table></figure>

<h2 id="2、在该文件中输入如下内容"><a href="#2、在该文件中输入如下内容" class="headerlink" title="2、在该文件中输入如下内容"></a>2、在该文件中输入如下内容</h2><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="四、启动Docker服务"><a href="#四、启动Docker服务" class="headerlink" title="四、启动Docker服务"></a>四、启动Docker服务</h1><h2 id="1、启动Docker服务"><a href="#1、启动Docker服务" class="headerlink" title="1、启动Docker服务"></a>1、启动Docker服务</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">systemctl <span class="built_in">start</span> docker</span><br></pre></td></tr></table></figure>
<h2 id="2、查看Docker服务状态"><a href="#2、查看Docker服务状态" class="headerlink" title="2、查看Docker服务状态"></a>2、查看Docker服务状态</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">systemctl status docker</span><br></pre></td></tr></table></figure>
<h2 id="3、停止Docker服务"><a href="#3、停止Docker服务" class="headerlink" title="3、停止Docker服务"></a>3、停止Docker服务</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">systemctl stop docker</span><br></pre></td></tr></table></figure>
<h2 id="4、重启Docker服务"><a href="#4、重启Docker服务" class="headerlink" title="4、重启Docker服务"></a>4、重启Docker服务</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>
<h2 id="5、设置Docker服务开机自启"><a href="#5、设置Docker服务开机自启" class="headerlink" title="5、设置Docker服务开机自启"></a>5、设置Docker服务开机自启</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">systemctl enable docker</span><br></pre></td></tr></table></figure>

<h1 id="五、Docker常用命令"><a href="#五、Docker常用命令" class="headerlink" title="五、Docker常用命令"></a>五、Docker常用命令</h1><h2 id="1、Docker在线帮助文档"><a href="#1、Docker在线帮助文档" class="headerlink" title="1、Docker在线帮助文档"></a>1、Docker在线帮助文档</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">docker <span class="literal">--help</span></span><br></pre></td></tr></table></figure>
<h2 id="2、查看Docker概要信息"><a href="#2、查看Docker概要信息" class="headerlink" title="2、查看Docker概要信息"></a>2、查看Docker概要信息</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">docker info</span><br></pre></td></tr></table></figure>

<h2 id="3、镜像相关命令"><a href="#3、镜像相关命令" class="headerlink" title="3、镜像相关命令"></a>3、镜像相关命令</h2><h3 id="3-1、查看本地已有镜像"><a href="#3-1、查看本地已有镜像" class="headerlink" title="3.1、查看本地已有镜像"></a>3.1、查看本地已有镜像</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>REPOSITORY</th>
<th>TAG</th>
<th>IMAGE ID</th>
<th>CREATED</th>
<th>SIZE</th>
</tr>
</thead>
<tbody><tr>
<td>镜像名称</td>
<td>标签</td>
<td>镜像ID（唯一）</td>
<td>镜像创建时间</td>
<td>镜像占用大小</td>
</tr>
</tbody></table>
<h3 id="3-2、搜索镜像"><a href="#3-2、搜索镜像" class="headerlink" title="3.2、搜索镜像"></a>3.2、搜索镜像</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">docker search [镜像名称]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>NAME</th>
<th>DESCRIPTION</th>
<th>STARS</th>
<th>OFFICIAL</th>
<th>AUTOMATED</th>
</tr>
</thead>
<tbody><tr>
<td>镜像名称</td>
<td>描述</td>
<td>星（代表好评）</td>
<td>是否官方提供</td>
<td>是否由DockerHub自动构建</td>
</tr>
</tbody></table>
<h3 id="3-3、拉取镜像"><a href="#3-3、拉取镜像" class="headerlink" title="3.3、拉取镜像"></a>3.3、拉取镜像</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">docker pull [镜像名称]</span><br></pre></td></tr></table></figure>

<h3 id="3-4、删除镜像"><a href="#3-4、删除镜像" class="headerlink" title="3.4、删除镜像"></a>3.4、删除镜像</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment">#按镜像名称删除镜像</span></span><br><span class="line">docker rmi [镜像名称]</span><br><span class="line"><span class="comment">#按镜像ID删除镜像</span></span><br><span class="line">docker rmi [镜像<span class="type">ID</span>]</span><br><span class="line"><span class="comment">#删除所有镜像</span></span><br><span class="line">docker rmi `docker images <span class="literal">-q</span>`</span><br></pre></td></tr></table></figure>

<h2 id="4、容器相关命令"><a href="#4、容器相关命令" class="headerlink" title="4、容器相关命令"></a>4、容器相关命令</h2><h3 id="4-1、查看运行中容器"><a href="#4-1、查看运行中容器" class="headerlink" title="4.1、查看运行中容器"></a>4.1、查看运行中容器</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment">#查看容器</span></span><br><span class="line">docker <span class="built_in">ps</span></span><br><span class="line"><span class="comment">#查看所有容器</span></span><br><span class="line">docker <span class="built_in">ps</span> <span class="literal">-a</span></span><br><span class="line"><span class="comment">#查看最后一次运行的容器</span></span><br><span class="line">docker <span class="built_in">ps</span> <span class="literal">-l</span></span><br><span class="line"><span class="comment">#查看停止的容器</span></span><br><span class="line">docker <span class="built_in">ps</span> <span class="operator">-f</span> status=exited</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>CONTAINER ID</th>
<th>IMAGE</th>
<th>COMMAND</th>
<th>CREATED</th>
<th>STATUS</th>
<th>PORTS</th>
<th>NAMES</th>
</tr>
</thead>
<tbody><tr>
<td>容器ID</td>
<td>镜像名称</td>
<td>运行命令</td>
<td>创建时间</td>
<td>状态</td>
<td>端口映射关系</td>
<td>容器名称</td>
</tr>
</tbody></table>
<h3 id="4-2、创建容器"><a href="#4-2、创建容器" class="headerlink" title="4.2、创建容器"></a>4.2、创建容器</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">docker run</span><br><span class="line"><span class="comment">#表示运行容器</span></span><br><span class="line"><span class="literal">-i</span></span><br><span class="line"><span class="comment">#表示运行容器后进入其命令行</span></span><br><span class="line"><span class="literal">-t</span></span><br><span class="line"><span class="comment">#表示为创建容器命名</span></span><br><span class="line"><span class="literal">--name</span></span><br><span class="line"><span class="comment">#表示目录映射关系</span></span><br><span class="line"><span class="literal">-v</span></span><br><span class="line"><span class="comment">#表示创建一个守护式容器在后台运行</span></span><br><span class="line"><span class="literal">-d</span></span><br><span class="line"><span class="comment">#表示端口映射，前者是宿主机端口，后者是容器内映射端口</span></span><br><span class="line"><span class="literal">-p</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3、退出容器"><a href="#4-3、退出容器" class="headerlink" title="4.3、退出容器"></a>4.3、退出容器</h3><p>在容器内执行命令</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure>


<h3 id="4-4、停止容器"><a href="#4-4、停止容器" class="headerlink" title="4.4、停止容器"></a>4.4、停止容器</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment">#按容器名称停止容器</span></span><br><span class="line">docker stop [容器名称]</span><br><span class="line"><span class="comment">#按容器ID停止容器</span></span><br><span class="line">docker stop [容器<span class="type">ID</span>]</span><br></pre></td></tr></table></figure>

<h3 id="4-5、运行容器"><a href="#4-5、运行容器" class="headerlink" title="4.5、运行容器"></a>4.5、运行容器</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment">#按容器名称启动容器</span></span><br><span class="line">docker <span class="built_in">start</span> [容器名称]</span><br><span class="line"><span class="comment">#按容器ID启动容器</span></span><br><span class="line">docker <span class="built_in">start</span> [容器<span class="type">ID</span>]</span><br></pre></td></tr></table></figure>

<h3 id="4-6、文件拷贝"><a href="#4-6、文件拷贝" class="headerlink" title="4.6、文件拷贝"></a>4.6、文件拷贝</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment">#把宿主机文件拷贝到容器内</span></span><br><span class="line">docker <span class="built_in">cp</span> [文件名称] [容器名称]:/[目录<span class="number">1</span>]/[目录<span class="number">2</span>]</span><br><span class="line"><span class="comment">#把容器内文件拷贝到宿主机中</span></span><br><span class="line">docker <span class="built_in">cp</span> [容器名称]:/[目录<span class="number">1</span>]/[文件名称] /[目录<span class="number">1</span>]/[目录<span class="number">2</span>]</span><br></pre></td></tr></table></figure>

<h3 id="4-7、目录挂载"><a href="#4-7、目录挂载" class="headerlink" title="4.7、目录挂载"></a>4.7、目录挂载</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment">#把宿主机文件拷贝到容器内</span></span><br><span class="line">docker run <span class="literal">-di</span> <span class="literal">-v</span> /[目录]/[文件名称]:/[目录]/[文件名称] <span class="literal">--name</span>=[容器名称]</span><br></pre></td></tr></table></figure>

<h3 id="4-8、查看容器IP地址"><a href="#4-8、查看容器IP地址" class="headerlink" title="4.8、查看容器IP地址"></a>4.8、查看容器IP地址</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">docker inspect <span class="literal">--format</span>=<span class="string">&#x27;&#123;&#123;.NetworkSetings.IpAddress&#125;&#125;&#x27;</span> [容器名称]</span><br></pre></td></tr></table></figure>

<h3 id="4-9、删除容器"><a href="#4-9、删除容器" class="headerlink" title="4.9、删除容器"></a>4.9、删除容器</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> [容器名称]</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>开发工具</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
</search>
